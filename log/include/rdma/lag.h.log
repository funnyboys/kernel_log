commit bd3920eac133103f0d4aa5fc62290e6df9a6c6da
Author: Maor Gottlieb <maorg@mellanox.com>
Date:   Thu Apr 30 22:21:43 2020 +0300

    RDMA/core: Add LAG functionality
    
    Add support to get the RoCE LAG xmit slave by building skb of the RoCE
    packet and call to master_get_xmit_slave.  If driver wants to get the
    slave assume all slaves are available, then need to set
    RDMA_LAG_FLAGS_HASH_ALL_SLAVES in flags.
    
    Link: https://lore.kernel.org/r/20200430192146.12863-14-maorg@mellanox.com
    Signed-off-by: Maor Gottlieb <maorg@mellanox.com>
    Reviewed-by: Leon Romanovsky <leonro@mellanox.com>
    Signed-off-by: Jason Gunthorpe <jgg@mellanox.com>

diff --git a/include/rdma/lag.h b/include/rdma/lag.h
new file mode 100644
index 000000000000..7c06ec9b2eef
--- /dev/null
+++ b/include/rdma/lag.h
@@ -0,0 +1,23 @@
+/* SPDX-License-Identifier: GPL-2.0 OR Linux-OpenIB */
+/*
+ * Copyright (c) 2020 Mellanox Technologies. All rights reserved.
+ */
+
+#ifndef _RDMA_LAG_H_
+#define _RDMA_LAG_H_
+
+#include <net/lag.h>
+
+struct ib_device;
+struct rdma_ah_attr;
+
+enum rdma_lag_flags {
+	RDMA_LAG_FLAGS_HASH_ALL_SLAVES = 1 << 0
+};
+
+void rdma_lag_put_ah_roce_slave(struct net_device *xmit_slave);
+struct net_device *rdma_lag_get_ah_roce_slave(struct ib_device *device,
+					      struct rdma_ah_attr *ah_attr,
+					      gfp_t flags);
+
+#endif /* _RDMA_LAG_H_ */
