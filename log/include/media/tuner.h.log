commit c942fddf8793b2013be8c901b47d0a8dc02bf99f
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Mon May 27 08:55:06 2019 +0200

    treewide: Replace GPLv2 boilerplate/reference with SPDX - rule 157
    
    Based on 3 normalized pattern(s):
    
      this program is free software you can redistribute it and or modify
      it under the terms of the gnu general public license as published by
      the free software foundation either version 2 of the license or at
      your option any later version this program is distributed in the
      hope that it will be useful but without any warranty without even
      the implied warranty of merchantability or fitness for a particular
      purpose see the gnu general public license for more details
    
      this program is free software you can redistribute it and or modify
      it under the terms of the gnu general public license as published by
      the free software foundation either version 2 of the license or at
      your option any later version [author] [kishon] [vijay] [abraham]
      [i] [kishon]@[ti] [com] this program is distributed in the hope that
      it will be useful but without any warranty without even the implied
      warranty of merchantability or fitness for a particular purpose see
      the gnu general public license for more details
    
      this program is free software you can redistribute it and or modify
      it under the terms of the gnu general public license as published by
      the free software foundation either version 2 of the license or at
      your option any later version [author] [graeme] [gregory]
      [gg]@[slimlogic] [co] [uk] [author] [kishon] [vijay] [abraham] [i]
      [kishon]@[ti] [com] [based] [on] [twl6030]_[usb] [c] [author] [hema]
      [hk] [hemahk]@[ti] [com] this program is distributed in the hope
      that it will be useful but without any warranty without even the
      implied warranty of merchantability or fitness for a particular
      purpose see the gnu general public license for more details
    
    extracted by the scancode license scanner the SPDX license identifier
    
      GPL-2.0-or-later
    
    has been chosen to replace the boilerplate/reference in 1105 file(s).
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Reviewed-by: Allison Randal <allison@lohutok.net>
    Reviewed-by: Richard Fontana <rfontana@redhat.com>
    Reviewed-by: Kate Stewart <kstewart@linuxfoundation.org>
    Cc: linux-spdx@vger.kernel.org
    Link: https://lkml.kernel.org/r/20190527070033.202006027@linutronix.de
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index b3edc14e763f..ff85d7227f91 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -1,18 +1,9 @@
+/* SPDX-License-Identifier: GPL-2.0-or-later */
 /*
  * tuner.h - definition for different tuners
  *
  * Copyright (C) 1997 Markus Schroeder (schroedm@uni-duesseldorf.de)
  * minor modifications by Ralph Metzler (rjkm@thp.uni-koeln.de)
- *
- * This program is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * This program is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
  */
 
 #ifndef _TUNER_H

commit 6aad127d37b609ca40ee3b93454a58ee6ed5a1ce
Author: Mauro Carvalho Chehab <mchehab@osg.samsung.com>
Date:   Fri Jan 29 06:11:30 2016 -0200

    [media] v4l2-mc.h: move tuner PAD definitions to this new header
    
    The customer PC hardware can be shipped with lots of different
    configurations, as vendors use to replace some of the chips on
    their hardware along the time. All drivers that support such
    devices are prepared to handle the hardware differences, using
    their own auto-probing logic.
    
    They do it in a way that number of inputs and outputs for a given
    hardware type doesn't change.
    
    Now that we're adding media controller capabilities to those drivers,
    we need to standardize the number of inputs and outputs for each
    hardware type, as we want to have a generic function at the V4L2
    core that would create the links for the entities that are expected
    on such hardware.
    
    Such standard is already there for tuners, but tuner.h is not the
    best place to store such data, as we'll need to add definitions also
    for analog TV demodulators.
    
    Also, we'll need a place to put a set of MC handling functions. So,
    let's create a v4l2-mc.h to store such kind of definitions.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@osg.samsung.com>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index c5994fe865a0..b3edc14e763f 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -20,29 +20,7 @@
 #ifdef __KERNEL__
 
 #include <linux/videodev2.h>
-
-/**
- * enum tuner_pad_index - tuner pad index
- *
- * @TUNER_PAD_RF_INPUT:	Radiofrequency (RF) sink pad, usually linked to a
- *			RF connector entity.
- * @TUNER_PAD_OUTPUT:	Tuner output pad. This is actually more complex than
- *			a single pad output, as, in addition to luminance and
- *			chrominance IF a tuner may have internally an
- *			audio decoder (like xc3028) or it may produce an audio
- *			IF that will be used by an audio decoder like msp34xx.
- *			It may also have an IF-PLL demodulator on it, like
- *			tuners with tda9887. Yet, currently, we don't need to
- *			represent all the dirty details, as this is transparent
- *			for the V4L2 API usage. So, let's represent all kinds
- *			of different outputs as a single source pad.
- * @TUNER_NUM_PADS:	Number of pads of the tuner.
- */
-enum tuner_pad_index {
-	TUNER_PAD_RF_INPUT,
-	TUNER_PAD_OUTPUT,
-	TUNER_NUM_PADS
-};
+#include <media/v4l2-mc.h>
 
 #define ADDR_UNSET (255)
 

commit 163c9bca101caf000691b56fb3834905e62cbba3
Author: Mauro Carvalho Chehab <mchehab@osg.samsung.com>
Date:   Wed Jan 27 08:39:33 2016 -0200

    [media] tuner.h: rename TUNER_PAD_IF_OUTPUT to TUNER_PAD_OUTPUT
    
    The output of a tuner is not only IF frequencies. They may also
    output audio on some of its pins, and may even be a zero-IF tuner,
    with outputs a baseband. So, rename the PAD name to make it
    clearer and add a proper documentation about that at tuner.h.
    
    No functional changes.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@osg.samsung.com>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index e5321fda5489..c5994fe865a0 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -21,11 +21,26 @@
 
 #include <linux/videodev2.h>
 
-/* Tuner PADs */
-/* FIXME: is this the right place for it? */
+/**
+ * enum tuner_pad_index - tuner pad index
+ *
+ * @TUNER_PAD_RF_INPUT:	Radiofrequency (RF) sink pad, usually linked to a
+ *			RF connector entity.
+ * @TUNER_PAD_OUTPUT:	Tuner output pad. This is actually more complex than
+ *			a single pad output, as, in addition to luminance and
+ *			chrominance IF a tuner may have internally an
+ *			audio decoder (like xc3028) or it may produce an audio
+ *			IF that will be used by an audio decoder like msp34xx.
+ *			It may also have an IF-PLL demodulator on it, like
+ *			tuners with tda9887. Yet, currently, we don't need to
+ *			represent all the dirty details, as this is transparent
+ *			for the V4L2 API usage. So, let's represent all kinds
+ *			of different outputs as a single source pad.
+ * @TUNER_NUM_PADS:	Number of pads of the tuner.
+ */
 enum tuner_pad_index {
 	TUNER_PAD_RF_INPUT,
-	TUNER_PAD_IF_OUTPUT,
+	TUNER_PAD_OUTPUT,
 	TUNER_NUM_PADS
 };
 

commit 188d2d551244f4196b616c90f3411732a6ebb2ab
Author: Mauro Carvalho Chehab <mchehab@osg.samsung.com>
Date:   Mon Aug 31 13:23:03 2015 -0300

    [media] tuner-core: add an input pad
    
    Tuners actually have at least one connector on its input.
    
    Add a PAD to connect it.
    
    Acked-by: Hans Verkuil <hans.verkuil@cisco.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@osg.samsung.com>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 486b6a54363b..e5321fda5489 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -21,6 +21,14 @@
 
 #include <linux/videodev2.h>
 
+/* Tuner PADs */
+/* FIXME: is this the right place for it? */
+enum tuner_pad_index {
+	TUNER_PAD_RF_INPUT,
+	TUNER_PAD_IF_OUTPUT,
+	TUNER_NUM_PADS
+};
+
 #define ADDR_UNSET (255)
 
 #define TUNER_TEMIC_PAL			0        /* 4002 FH5 (3X 7756, 9483) */

commit 62e93f090b0903def1d7455c311c50b9e6f38ef2
Author: Mauro Carvalho Chehab <mchehab@osg.samsung.com>
Date:   Mon Oct 5 09:54:23 2015 -0300

    [media] tuner.h: Make checkpatch.pl happier
    
    Remove some bad whitespaces before tabs and fix the initial
    comment to be compliant with Kernel coding style.
    
    Now, the only complains are about long comment lines at the
    defines. Those warnings should be ok to be kept.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@osg.samsung.com>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 4445dcbfdb80..486b6a54363b 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -1,23 +1,19 @@
 /*
-    tuner.h - definition for different tuners
-
-    Copyright (C) 1997 Markus Schroeder (schroedm@uni-duesseldorf.de)
-    minor modifications by Ralph Metzler (rjkm@thp.uni-koeln.de)
-
-    This program is free software; you can redistribute it and/or modify
-    it under the terms of the GNU General Public License as published by
-    the Free Software Foundation; either version 2 of the License, or
-    (at your option) any later version.
-
-    This program is distributed in the hope that it will be useful,
-    but WITHOUT ANY WARRANTY; without even the implied warranty of
-    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-    GNU General Public License for more details.
-
-    You should have received a copy of the GNU General Public License
-    along with this program; if not, write to the Free Software
-    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
-*/
+ * tuner.h - definition for different tuners
+ *
+ * Copyright (C) 1997 Markus Schroeder (schroedm@uni-duesseldorf.de)
+ * minor modifications by Ralph Metzler (rjkm@thp.uni-koeln.de)
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ */
 
 #ifndef _TUNER_H
 #define _TUNER_H
@@ -83,8 +79,11 @@
 #define TUNER_PHILIPS_FM1236_MK3	43
 
 #define TUNER_PHILIPS_4IN1		44	/* ATI TV Wonder Pro - Conexant */
-/* Microtune merged with Temic 12/31/1999 partially financed by Alps - these may be similar to Temic */
-#define TUNER_MICROTUNE_4049FM5 	45
+	/*
+	 * Microtune merged with Temic 12/31/1999 partially financed by Alps.
+	 * these may be similar to Temic
+	 */
+#define TUNER_MICROTUNE_4049FM5		45
 #define TUNER_PANASONIC_VP27		46
 #define TUNER_LG_NTSC_TAPE		47
 
@@ -115,11 +114,11 @@
 
 #define TUNER_PHILIPS_TUV1236D		68	/* ATI HDTV Wonder */
 #define TUNER_TNF_5335MF                69	/* Sabrent Bt848   */
-#define TUNER_SAMSUNG_TCPN_2121P30A     70 	/* Hauppauge PVR-500MCE NTSC */
+#define TUNER_SAMSUNG_TCPN_2121P30A     70	/* Hauppauge PVR-500MCE NTSC */
 #define TUNER_XC2028			71
 
 #define TUNER_THOMSON_FE6600		72	/* DViCO FusionHDTV DVB-T Hybrid */
-#define TUNER_SAMSUNG_TCPG_6121P30A     73 	/* Hauppauge PVR-500 PAL */
+#define TUNER_SAMSUNG_TCPG_6121P30A     73	/* Hauppauge PVR-500 PAL */
 #define TUNER_TDA9887                   74      /* This tuner should be used only internally */
 #define TUNER_TEA5761			75	/* Only FM Radio Tuner */
 #define TUNER_XC5000			76	/* Xceive Silicon Tuner */
@@ -143,25 +142,26 @@
 #define TUNER_SONY_BTF_PB463Z		91	/* NTSC */
 
 /* tv card specific */
-#define TDA9887_PRESENT 		(1<<0)
-#define TDA9887_PORT1_INACTIVE 		(1<<1)
-#define TDA9887_PORT2_INACTIVE 		(1<<2)
-#define TDA9887_QSS 			(1<<3)
-#define TDA9887_INTERCARRIER 		(1<<4)
-#define TDA9887_PORT1_ACTIVE 		(1<<5)
-#define TDA9887_PORT2_ACTIVE 		(1<<6)
-#define TDA9887_INTERCARRIER_NTSC 	(1<<7)
+#define TDA9887_PRESENT			(1<<0)
+#define TDA9887_PORT1_INACTIVE		(1<<1)
+#define TDA9887_PORT2_INACTIVE		(1<<2)
+#define TDA9887_QSS			(1<<3)
+#define TDA9887_INTERCARRIER		(1<<4)
+#define TDA9887_PORT1_ACTIVE		(1<<5)
+#define TDA9887_PORT2_ACTIVE		(1<<6)
+#define TDA9887_INTERCARRIER_NTSC	(1<<7)
 /* Tuner takeover point adjustment, in dB, -16 <= top <= 15 */
-#define TDA9887_TOP_MASK 		(0x3f << 8)
-#define TDA9887_TOP_SET 		(1 << 13)
-#define TDA9887_TOP(top) 		(TDA9887_TOP_SET | (((16 + (top)) & 0x1f) << 8))
+#define TDA9887_TOP_MASK		(0x3f << 8)
+#define TDA9887_TOP_SET			(1 << 13)
+#define TDA9887_TOP(top)		(TDA9887_TOP_SET | \
+					 (((16 + (top)) & 0x1f) << 8))
 
 /* config options */
-#define TDA9887_DEEMPHASIS_MASK 	(3<<16)
-#define TDA9887_DEEMPHASIS_NONE 	(1<<16)
-#define TDA9887_DEEMPHASIS_50 		(2<<16)
-#define TDA9887_DEEMPHASIS_75 		(3<<16)
-#define TDA9887_AUTOMUTE 		(1<<18)
+#define TDA9887_DEEMPHASIS_MASK		(3<<16)
+#define TDA9887_DEEMPHASIS_NONE		(1<<16)
+#define TDA9887_DEEMPHASIS_50		(2<<16)
+#define TDA9887_DEEMPHASIS_75		(3<<16)
+#define TDA9887_AUTOMUTE		(1<<18)
 #define TDA9887_GATING_18		(1<<19)
 #define TDA9887_GAIN_NORMAL		(1<<20)
 #define TDA9887_RIF_41_3		(1<<21)  /* radio IF1 41.3 vs 33.3 */
@@ -183,7 +183,7 @@
 enum tuner_mode {
 	T_RADIO		= 1 << V4L2_TUNER_RADIO,
 	T_ANALOG_TV     = 1 << V4L2_TUNER_ANALOG_TV,
-	/* Don't need to map V4L2_TUNER_DIGITAL_TV, as tuner-core won't use it */
+	/* Don't map V4L2_TUNER_DIGITAL_TV, as tuner-core won't use it */
 };
 
 /**
@@ -227,7 +227,7 @@ struct tuner_setup {
 	unsigned int	type;
 	unsigned int	mode_mask;
 	void		*config;
-	int (*tuner_callback) (void *dev, int component, int cmd, int arg);
+	int (*tuner_callback)(void *dev, int component, int cmd, int arg);
 };
 
 #endif /* __KERNEL__ */

commit 07c68a7423c4e44cc4f85caa83bb7fae36367250
Author: Mauro Carvalho Chehab <mchehab@osg.samsung.com>
Date:   Mon Oct 5 09:50:36 2015 -0300

    [media] DocBook: Document include/media/tuner.h
    
    This is part of the V4L2 core, so its kABI should be
    documented at device-drivers DocBook.
    
    Add the meta-tags for that.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@osg.samsung.com>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index b46ebb48fe74..4445dcbfdb80 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -166,33 +166,67 @@
 #define TDA9887_GAIN_NORMAL		(1<<20)
 #define TDA9887_RIF_41_3		(1<<21)  /* radio IF1 41.3 vs 33.3 */
 
+/**
+ * enum tuner_mode      - Mode of the tuner
+ *
+ * @T_RADIO:        Tuner core will work in radio mode
+ * @T_ANALOG_TV:    Tuner core will work in analog TV mode
+ *
+ * Older boards only had a single tuner device, but some devices have a
+ * separate tuner for radio. In any case, the tuner-core needs to know if
+ * the tuner chip(s) will be used in radio mode or analog TV mode, as, on
+ * radio mode, frequencies are specified on a different range than on TV
+ * mode. This enum is used by the tuner core in order to work with the
+ * proper tuner range and eventually use a different tuner chip while in
+ * radio mode.
+ */
 enum tuner_mode {
 	T_RADIO		= 1 << V4L2_TUNER_RADIO,
 	T_ANALOG_TV     = 1 << V4L2_TUNER_ANALOG_TV,
 	/* Don't need to map V4L2_TUNER_DIGITAL_TV, as tuner-core won't use it */
 };
 
-/* Older boards only had a single tuner device. Nowadays multiple tuner
-   devices may be present on a single board. Using TUNER_SET_TYPE_ADDR
-   to pass the tuner_setup structure it is possible to setup each tuner
-   device in turn.
-
-   Since multiple devices may be present it is no longer sufficient to
-   send a command to a single i2c device. Instead you should broadcast
-   the command to all i2c devices.
-
-   By setting the mode_mask correctly you can select which commands are
-   accepted by a specific tuner device. For example, set mode_mask to
-   T_RADIO if the device is a radio-only tuner. That specific tuner will
-   only accept commands when the tuner is in radio mode and ignore them
-   when the tuner is set to TV mode.
+/**
+ * struct tuner_setup   - setup the tuner chipsets
+ *
+ * @addr:		I2C address used to control the tuner device/chipset
+ * @type:		Type of the tuner, as defined at the TUNER_* macros.
+ *			Each different tuner model should have an unique
+ *			identifier.
+ * @mode_mask:		Mask with the allowed tuner modes: V4L2_TUNER_RADIO,
+ *			V4L2_TUNER_ANALOG_TV and/or V4L2_TUNER_DIGITAL_TV,
+ *			describing if the tuner should be used to support
+ *			Radio, analog TV and/or digital TV.
+ * @config:		Used to send tuner-specific configuration for complex
+ *			tuners that require extra parameters to be set.
+ *			Only a very few tuners require it and its usage on
+ *			newer tuners should be avoided.
+ * @tuner_callback:	Some tuners require to call back the bridge driver,
+ *			in order to do some tasks like rising a GPIO at the
+ *			bridge chipset, in order to do things like resetting
+ *			the device.
+ *
+ * Older boards only had a single tuner device. Nowadays multiple tuner
+ * devices may be present on a single board. Using TUNER_SET_TYPE_ADDR
+ * to pass the tuner_setup structure it is possible to setup each tuner
+ * device in turn.
+ *
+ * Since multiple devices may be present it is no longer sufficient to
+ * send a command to a single i2c device. Instead you should broadcast
+ * the command to all i2c devices.
+ *
+ * By setting the mode_mask correctly you can select which commands are
+ * accepted by a specific tuner device. For example, set mode_mask to
+ * T_RADIO if the device is a radio-only tuner. That specific tuner will
+ * only accept commands when the tuner is in radio mode and ignore them
+ * when the tuner is set to TV mode.
  */
 
 struct tuner_setup {
-	unsigned short	addr; 	/* I2C address */
-	unsigned int	type;   /* Tuner type */
-	unsigned int	mode_mask;  /* Allowed tuner modes */
-	void		*config;    /* configuraion for more complex tuners */
+	unsigned short	addr;
+	unsigned int	type;
+	unsigned int	mode_mask;
+	void		*config;
 	int (*tuner_callback) (void *dev, int component, int cmd, int arg);
 };
 

commit cdcd141c95f0c2b88e0b0869028c320cd031a23b
Author: Ondrej Zary <linux@rainbow-software.org>
Date:   Sat Apr 6 14:21:36 2013 -0300

    [media] tuner-core: Change config from unsigned int to void *
    
    config looks like a hack that was added to tuner-core to allow some
    configuration of TDA8290 tuner (it's not used by any other driver).
    But with the new configuration options of tda8290 driver (no_i2c_gate
    and std_map), it's no longer sufficient.
    Change config to be void * instead, which allows passing tuner-dependent
    config struct to drivers.
    Also update saa7134 driver to reflect this change (no other driver uses this).
    
    Signed-off-by: Ondrej Zary <linux@rainbow-software.org>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 24eaafe461bd..b46ebb48fe74 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -192,7 +192,7 @@ struct tuner_setup {
 	unsigned short	addr; 	/* I2C address */
 	unsigned int	type;   /* Tuner type */
 	unsigned int	mode_mask;  /* Allowed tuner modes */
-	unsigned int	config; /* configuraion for more complex tuners */
+	void		*config;    /* configuraion for more complex tuners */
 	int (*tuner_callback) (void *dev, int component, int cmd, int arg);
 };
 

commit e4d2a6162d2a0a27be16b75da36f6bba64af63bc
Author: Hans Verkuil <hans.verkuil@cisco.com>
Date:   Sat Mar 9 13:14:32 2013 -0300

    [media] tuner: add Sony BTF tuners
    
    This adds support for three Sony BTF tuners:
    TUNER_SONY_BTF_PG472Z: PAL+SECAM
    TUNER_SONY_BTF_PK467Z: NTSC-M-JP
    TUNER_SONY_BTF_PB463Z: NTSC-M
    These come from the go7007 staging driver where they were implemented in
    the wis-sony-tuner i2c driver.
    Adding support for these tuners to tuner-types.c is the first step towards
    removing the wis-sony-tuner driver.
    
    Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 926aff9bdf65..24eaafe461bd 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -138,6 +138,10 @@
 #define TUNER_XC4000			87	/* Xceive Silicon Tuner */
 #define TUNER_XC5000C			88	/* Xceive Silicon Tuner */
 
+#define TUNER_SONY_BTF_PG472Z		89	/* PAL+SECAM */
+#define TUNER_SONY_BTF_PK467Z		90	/* NTSC_JP */
+#define TUNER_SONY_BTF_PB463Z		91	/* NTSC */
+
 /* tv card specific */
 #define TDA9887_PRESENT 		(1<<0)
 #define TDA9887_PORT1_INACTIVE 		(1<<1)

commit f21cfaf6381e2330c4e2f619d4cedc72146a8cf7
Author: Michael Krufky <mkrufky@kernellabs.com>
Date:   Tue Feb 7 01:22:34 2012 -0300

    [media] tuner: add support for Xceive XC5000C
    
    Signed-off-by: Michael Krufky <mkrufky@kernellabs.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 29e1920e7339..926aff9bdf65 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -136,6 +136,7 @@
 #define TUNER_TENA_TNF_5337		86
 
 #define TUNER_XC4000			87	/* Xceive Silicon Tuner */
+#define TUNER_XC5000C			88	/* Xceive Silicon Tuner */
 
 /* tv card specific */
 #define TDA9887_PRESENT 		(1<<0)

commit cd4ca7afc61d3b18fcd635002459fb6b1d701099
Author: Miroslav Slugen <thunder.mmm@gmail.com>
Date:   Sun Dec 11 18:47:32 2011 -0300

    [media] tuner: Fix numberspace conflict between xc4000 and pti 5nf05 tuners
    
    Update xc4000 tuner definition, number 81 is already in use by
    TUNER_PARTSNIC_PTI_5NF05.
    
    Cc: stable@kernel.org
    Signed-off-by: Miroslav Slugen <thunder.mmm@gmail.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 89c290b69a5c..29e1920e7339 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -127,7 +127,6 @@
 #define TUNER_PHILIPS_FMD1216MEX_MK3	78
 #define TUNER_PHILIPS_FM1216MK5		79
 #define TUNER_PHILIPS_FQ1216LME_MK3	80	/* Active loopthrough, no FM */
-#define TUNER_XC4000			81	/* Xceive Silicon Tuner */
 
 #define TUNER_PARTSNIC_PTI_5NF05	81
 #define TUNER_PHILIPS_CU1216L           82
@@ -136,6 +135,8 @@
 #define TUNER_PHILIPS_FQ1236_MK5	85	/* NTSC, TDA9885, no FM radio */
 #define TUNER_TENA_TNF_5337		86
 
+#define TUNER_XC4000			87	/* Xceive Silicon Tuner */
+
 /* tv card specific */
 #define TDA9887_PRESENT 		(1<<0)
 #define TDA9887_PORT1_INACTIVE 		(1<<1)

commit 8d009a0c41475a482aca17d2a9fc8e6965f2fdf9
Author: Davide Ferri <davidef1986@gmail.com>
Date:   Tue Jun 23 22:34:06 2009 -0300

    [media] dib0700: add initial code for PCTV 340e by Davide Ferri
    
    This is initial code written by Davide Ferri for the PCTV 340e, including
    a new xc4000 driver.  I am checking in all the code unmodified, and making
    no assertions about its quality (other than confirming it compiles).
    
    [mchehab@redhat.com: rebased on the top of the current tree]
    Signed-off-by: Devin Heitmueller <dheitmueller@kernellabs.com>
    Signed-off-by: Davide Ferri <davidef1986@gmail.com>
    Cc: Patrick Boettcher <pboettcher@kernellabs.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 963e33471835..89c290b69a5c 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -127,6 +127,8 @@
 #define TUNER_PHILIPS_FMD1216MEX_MK3	78
 #define TUNER_PHILIPS_FM1216MK5		79
 #define TUNER_PHILIPS_FQ1216LME_MK3	80	/* Active loopthrough, no FM */
+#define TUNER_XC4000			81	/* Xceive Silicon Tuner */
+
 #define TUNER_PARTSNIC_PTI_5NF05	81
 #define TUNER_PHILIPS_CU1216L           82
 #define TUNER_NXP_TDA18271		83

commit 437f5fa34225db0d981536692678afc590e5c87f
Author: Mauro Carvalho Chehab <mchehab@redhat.com>
Date:   Mon Feb 21 21:03:59 2011 -0300

    [media] tuner: Remove remaining usages of T_DIGITAL_TV
    
    A few places used T_DIGITAL_TV internally. Remove the usage of this
    obsolete mode mask.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 32dfd5f33cd7..963e33471835 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -161,7 +161,7 @@
 enum tuner_mode {
 	T_RADIO		= 1 << V4L2_TUNER_RADIO,
 	T_ANALOG_TV     = 1 << V4L2_TUNER_ANALOG_TV,
-	T_DIGITAL_TV    = 1 << V4L2_TUNER_DIGITAL_TV,
+	/* Don't need to map V4L2_TUNER_DIGITAL_TV, as tuner-core won't use it */
 };
 
 /* Older boards only had a single tuner device. Nowadays multiple tuner

commit 2d351df443b0b324a440b5fd053074562d36a7f5
Author: Mauro Carvalho Chehab <mchehab@redhat.com>
Date:   Mon Feb 14 18:53:12 2011 -0200

    [media] Remove the remaining usages for T_STANDBY
    
    tda9887 used to use the T_STANDBY type internally, while tea5761
    used it to put the device to sleep. Fix the code for it to work
    properly with the tuner core changes and remove this flag from
    tuner.h.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 1d596427d124..32dfd5f33cd7 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -21,6 +21,7 @@
 
 #ifndef _TUNER_H
 #define _TUNER_H
+#ifdef __KERNEL__
 
 #include <linux/videodev2.h>
 
@@ -157,13 +158,10 @@
 #define TDA9887_GAIN_NORMAL		(1<<20)
 #define TDA9887_RIF_41_3		(1<<21)  /* radio IF1 41.3 vs 33.3 */
 
-#ifdef __KERNEL__
-
 enum tuner_mode {
 	T_RADIO		= 1 << V4L2_TUNER_RADIO,
 	T_ANALOG_TV     = 1 << V4L2_TUNER_ANALOG_TV,
 	T_DIGITAL_TV    = 1 << V4L2_TUNER_DIGITAL_TV,
-	T_STANDBY	= 1 << 31
 };
 
 /* Older boards only had a single tuner device. Nowadays multiple tuner
@@ -193,11 +191,3 @@ struct tuner_setup {
 #endif /* __KERNEL__ */
 
 #endif /* _TUNER_H */
-
-/*
- * Overrides for Emacs so that we follow Linus's tabbing style.
- * ---------------------------------------------------------------------------
- * Local variables:
- * c-basic-offset: 8
- * End:
- */

commit cbde689823776d187ba1b307a171625dbc02dd4f
Author: Mauro Carvalho Chehab <mchehab@redhat.com>
Date:   Fri Feb 4 10:42:09 2011 -0300

    [media] tuner-core: Better implement standby mode
    
    In the past, T_STANDBY were used on devices with a separate radio tuner to
    mark a tuner that were disabled. With the time, it got newer meanings.
    
    Also, due to a bug at the logic, the driver might incorrectly return
    T_STANDBY to userspace.
    
    So, instead of keeping the abuse, just use a boolean for storing
    such information.
    
    We can't remove T_STANDBY yet, as this is used on two other drivers. A
    latter patch will address its usage outside tuner-core.
    
    Thanks-to: Devin Heitmueller <dheitmueller@kernellabs.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 5eec5292d01e..1d596427d124 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -160,7 +160,6 @@
 #ifdef __KERNEL__
 
 enum tuner_mode {
-	T_UNINITIALIZED = 0,
 	T_RADIO		= 1 << V4L2_TUNER_RADIO,
 	T_ANALOG_TV     = 1 << V4L2_TUNER_ANALOG_TV,
 	T_DIGITAL_TV    = 1 << V4L2_TUNER_DIGITAL_TV,

commit 0cda12556bf3ebe47ee98eb6767a085c204ee35e
Author: Mauro Carvalho Chehab <mchehab@redhat.com>
Date:   Wed Jan 19 16:05:30 2011 -0200

    [media] tuner-simple: add support for Tena TNF5337 MFD
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 51811eac46f1..5eec5292d01e 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -131,6 +131,7 @@
 #define TUNER_NXP_TDA18271		83
 #define TUNER_SONY_BTF_PXN01Z		84
 #define TUNER_PHILIPS_FQ1236_MK5	85	/* NTSC, TDA9885, no FM radio */
+#define TUNER_TENA_TNF_5337		86
 
 /* tv card specific */
 #define TDA9887_PRESENT 		(1<<0)

commit 095c24710aa508a303edff86709637007113fbbf
Author: Andy Walls <awalls@md.metrocast.net>
Date:   Sat Jun 12 20:20:36 2010 -0300

    V4L/DVB: tuner: Add a definition for the Philips FQ1236 MK5 NTSC tuner
    
    Signed-off-by: Andy Walls <awalls@md.metrocast.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 5505c5360ca3..51811eac46f1 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -130,6 +130,7 @@
 #define TUNER_PHILIPS_CU1216L           82
 #define TUNER_NXP_TDA18271		83
 #define TUNER_SONY_BTF_PXN01Z		84
+#define TUNER_PHILIPS_FQ1236_MK5	85	/* NTSC, TDA9885, no FM radio */
 
 /* tv card specific */
 #define TDA9887_PRESENT 		(1<<0)

commit dbb9de9bc137e08dc47db960d5730e3251932e2b
Author: Andy Walls <awalls@radix.net>
Date:   Wed Feb 10 19:02:58 2010 -0300

    V4L/DVB: tuner-types: Add Sony BTF-Pxn01Z tuner type used on GigaPocket cards
    
    Sony makes custome tuners for its GigaPocket line of ivtv based capture
    cards.  This adds an entry to the tuner-types list for such tuners.
    Parameters are based on experiments by Eric Anderson <rico99@sbcglobal.net>.
    
    Signed-off-by: Andy Walls <awalls@radix.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 4d5b53ff17db..5505c5360ca3 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -129,6 +129,7 @@
 #define TUNER_PARTSNIC_PTI_5NF05	81
 #define TUNER_PHILIPS_CU1216L           82
 #define TUNER_NXP_TDA18271		83
+#define TUNER_SONY_BTF_PXN01Z		84
 
 /* tv card specific */
 #define TDA9887_PRESENT 		(1<<0)

commit 93463895ae0a87b689d71d65c44d5ccdcd950dc4
Author: Michael Krufky <mkrufky@kernellabs.com>
Date:   Tue Sep 15 23:04:18 2009 -0300

    V4L/DVB (12964): tuner-core: add support for NXP TDA18271 without TDA829X demod
    
    Add support for NXP TDA18271 as a standalone tuner, allowing the use of
    analog demodulators other than the Philips/NXP TDA829x.
    
    Signed-off-by: Michael Krufky <mkrufky@kernellabs.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index b1f57e175e9a..4d5b53ff17db 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -128,6 +128,7 @@
 #define TUNER_PHILIPS_FQ1216LME_MK3	80	/* Active loopthrough, no FM */
 #define TUNER_PARTSNIC_PTI_5NF05	81
 #define TUNER_PHILIPS_CU1216L           82
+#define TUNER_NXP_TDA18271		83
 
 /* tv card specific */
 #define TDA9887_PRESENT 		(1<<0)

commit e558170a91677d3065be3922bb4467d8969d875c
Author: Antti Palosaari <crope@iki.fi>
Date:   Tue Sep 15 14:37:20 2009 -0300

    V4L/DVB (12950): tuner-simple: add Philips CU1216L
    
    add Philips CU1216L NIM
    
    Signed-off-by: Antti Palosaari <crope@iki.fi>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index c146f2f530b0..b1f57e175e9a 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -127,6 +127,7 @@
 #define TUNER_PHILIPS_FM1216MK5		79
 #define TUNER_PHILIPS_FQ1216LME_MK3	80	/* Active loopthrough, no FM */
 #define TUNER_PARTSNIC_PTI_5NF05	81
+#define TUNER_PHILIPS_CU1216L           82
 
 /* tv card specific */
 #define TDA9887_PRESENT 		(1<<0)

commit e3e1920b28d47cb18b477fc9884b889f9622fc97
Author: Andy Walls <awalls@radix.net>
Date:   Wed Jul 22 21:02:44 2009 -0300

    V4L/DVB (12334): tuner-simple: Add an entry for the Partsnic PTI-5NF05 NTSC tuner
    
    Signed-off-by: Andy Walls <awalls@radix.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index cbf97f45fbec..c146f2f530b0 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -126,6 +126,7 @@
 #define TUNER_PHILIPS_FMD1216MEX_MK3	78
 #define TUNER_PHILIPS_FM1216MK5		79
 #define TUNER_PHILIPS_FQ1216LME_MK3	80	/* Active loopthrough, no FM */
+#define TUNER_PARTSNIC_PTI_5NF05	81
 
 /* tv card specific */
 #define TDA9887_PRESENT 		(1<<0)

commit 5ddc9b100fc96e8f3c6d435cecd9d09e5b9673f9
Author: Andy Walls <awalls@radix.net>
Date:   Sun Jun 7 21:39:03 2009 -0300

    V4L/DVB (11933): tuner-simple, tveeprom: Add Philips FQ1216LME MK3 analog tuner
    
    Signed-off-by: Andy Walls <awalls@radix.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 735a2a941166..cbf97f45fbec 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -125,6 +125,7 @@
 #define TUNER_TCL_MF02GIP_5N		77	/* TCL MF02GIP_5N */
 #define TUNER_PHILIPS_FMD1216MEX_MK3	78
 #define TUNER_PHILIPS_FM1216MK5		79
+#define TUNER_PHILIPS_FQ1216LME_MK3	80	/* Active loopthrough, no FM */
 
 /* tv card specific */
 #define TDA9887_PRESENT 		(1<<0)

commit 8475cbcb0f885189969915eb3680d10fc525d722
Author: Dmitri Belimov <d.belimov@gmail.com>
Date:   Mon May 11 08:16:06 2009 -0300

    V4L/DVB (11775): tuner: add support Philips MK5 tuner
    
    Signed-off-by: Beholder Intl. Ltd. Dmitry Belimov <d.belimov@gmail.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 7d4e2db78076..735a2a941166 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -124,6 +124,7 @@
 #define TUNER_XC5000			76	/* Xceive Silicon Tuner */
 #define TUNER_TCL_MF02GIP_5N		77	/* TCL MF02GIP_5N */
 #define TUNER_PHILIPS_FMD1216MEX_MK3	78
+#define TUNER_PHILIPS_FM1216MK5		79
 
 /* tv card specific */
 #define TDA9887_PRESENT 		(1<<0)

commit 953cafc04e9ef9d2fd9f8afb3b3bbde1f8bb9317
Author: Darron Broad <darron@kewl.org>
Date:   Wed Oct 15 14:14:30 2008 -0300

    V4L/DVB (9268): tuner: add FMD1216MEX tuner
    
    This tuner was already supported by proxy as an FMD1216ME, however,
    the MEX uses a different FM Radio IF so this addition is now required.
    
    Signed-off-by: Darron Broad <darron@kewl.org>
    Signed-off-by: Steven Toth <stoth@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 67c1f514d0e2..7d4e2db78076 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -123,6 +123,7 @@
 #define TUNER_TEA5761			75	/* Only FM Radio Tuner */
 #define TUNER_XC5000			76	/* Xceive Silicon Tuner */
 #define TUNER_TCL_MF02GIP_5N		77	/* TCL MF02GIP_5N */
+#define TUNER_PHILIPS_FMD1216MEX_MK3	78
 
 /* tv card specific */
 #define TDA9887_PRESENT 		(1<<0)

commit d7cba043d7ec840d67bd5143779d1febe7d83407
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Fri Sep 12 13:31:45 2008 -0300

    V4L/DVB (9049): convert tuner drivers to use dvb_frontend->callback
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index ba818985cc84..67c1f514d0e2 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -179,7 +179,7 @@ struct tuner_setup {
 	unsigned int	type;   /* Tuner type */
 	unsigned int	mode_mask;  /* Allowed tuner modes */
 	unsigned int	config; /* configuraion for more complex tuners */
-	int (*tuner_callback) (void *dev, int command,int arg);
+	int (*tuner_callback) (void *dev, int component, int cmd, int arg);
 };
 
 #endif /* __KERNEL__ */

commit 8f2b7b70600212f8c809a7bc2d17d33561842440
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Tue Aug 5 10:11:25 2008 -0300

    V4L/DVB (8626): Add support for TCL tuner MF02GIP-5N-E
    
    Thanks to Sistema Fenix (http://www.sistemafenix.com.br/) and CDI Brasil
    (www.cdibrasil.com.br/) for sponsoring this development.
    
    Signed-off-by: Gilberto <gilberto@sistemafenix.com.br>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 77068fcc86bd..ba818985cc84 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -122,6 +122,7 @@
 #define TUNER_TDA9887                   74      /* This tuner should be used only internally */
 #define TUNER_TEA5761			75	/* Only FM Radio Tuner */
 #define TUNER_XC5000			76	/* Xceive Silicon Tuner */
+#define TUNER_TCL_MF02GIP_5N		77	/* TCL MF02GIP_5N */
 
 /* tv card specific */
 #define TDA9887_PRESENT 		(1<<0)

commit ab8b870e430d3e2cfb299f81e0ae0aef7fe5bfda
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Apr 22 14:46:05 2008 -0300

    V4L/DVB (7381): tuner: rename TUNER_PHILIPS_ATSC to TUNER_PHILIPS_FCV1236D
    
    TUNER_PHILIPS_ATSC is an ambiguous name for a tuner.  Rename it to
    TUNER_PHILIPS_FCV1236D to be more descriptive.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 1bf24a6ed8f1..77068fcc86bd 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -78,7 +78,7 @@
 
 #define TUNER_HITACHI_NTSC		40
 #define TUNER_PHILIPS_PAL_MK		41
-#define TUNER_PHILIPS_ATSC		42
+#define TUNER_PHILIPS_FCV1236D		42
 #define TUNER_PHILIPS_FM1236_MK3	43
 
 #define TUNER_PHILIPS_4IN1		44	/* ATI TV Wonder Pro - Conexant */

commit 27c685a4b09b5e391023d769cddb97e4fcb3b9e1
Author: Steven Toth <stoth@hauppauge.com>
Date:   Sat Jan 5 16:50:14 2008 -0300

    V4L/DVB (7042): xc5000: Tuner analog support
    
    From Zhang: This an updated patch that adds analog support for
    the xc5000 tuner driver. it was tested on a Pinnacle PCTV HD 800i
    card (patches to follow).
    
    Patch commited as-is, cleanup to follow ... Steve.
    
    Signed-off-by: Chaogui Zhang <czhang1974@gmail.com>
    Signed-off-by: Steven Toth <stoth@hauppauge.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 97be269afbee..1bf24a6ed8f1 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -121,6 +121,7 @@
 #define TUNER_SAMSUNG_TCPG_6121P30A     73 	/* Hauppauge PVR-500 PAL */
 #define TUNER_TDA9887                   74      /* This tuner should be used only internally */
 #define TUNER_TEA5761			75	/* Only FM Radio Tuner */
+#define TUNER_XC5000			76	/* Xceive Silicon Tuner */
 
 /* tv card specific */
 #define TDA9887_PRESENT 		(1<<0)

commit ab1660503ac3af7febfcf987648509b484d4feda
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Sun Dec 9 02:26:48 2007 -0300

    V4L/DVB (6785): tda8290: remove dependency on struct tuner
    
    - remove dependency of tda8290 module on struct tuner
    - move tuner_foo printk macros from tuner-driver.h into tuner-core.c
    - clean up #includes of tuner-i2c.h / tuner-driver.h
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index d49392d90e56..97be269afbee 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -24,8 +24,6 @@
 
 #include <linux/videodev2.h>
 
-extern int tuner_debug;
-
 #define ADDR_UNSET (255)
 
 #define TUNER_TEMIC_PAL			0        /* 4002 FH5 (3X 7756, 9483) */

commit 0b5f4a12e628893624b478523fb4e2708c605710
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Sat Oct 27 13:09:16 2007 -0300

    V4L/DVB (6469): tuner: remove TUNER_PHILIPS_TDA8295
    
    TUNER_PHILIPS_TDA8290 will autodetect a TDA8290 or a TDA8295,
    so we don't need this separate entry anymore.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index faacd2d50b72..d49392d90e56 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -124,8 +124,6 @@ extern int tuner_debug;
 #define TUNER_TDA9887                   74      /* This tuner should be used only internally */
 #define TUNER_TEA5761			75	/* Only FM Radio Tuner */
 
-#define TUNER_PHILIPS_TDA8295           76
-
 /* tv card specific */
 #define TDA9887_PRESENT 		(1<<0)
 #define TDA9887_PORT1_INACTIVE 		(1<<1)

commit 5bea1cd3871351d70cc7624af138f8aa68b7be77
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Mon Oct 22 09:56:38 2007 -0300

    V4L/DVB (6435): tda8290: add support for NXP TDA18271 tuner and TDA8295 analog demod
    
    Add basic support for NXP TDA8295 analog demod and TDA18271 tuner silicon.
    
    TDA8295 + TDA8275a not yet tested.
    TDA8290 + TDA18271 not yet supported.
    
    Digital mode of TDA18271 not yet tested & needs more work.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Reviewed-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index d49392d90e56..faacd2d50b72 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -124,6 +124,8 @@ extern int tuner_debug;
 #define TUNER_TDA9887                   74      /* This tuner should be used only internally */
 #define TUNER_TEA5761			75	/* Only FM Radio Tuner */
 
+#define TUNER_PHILIPS_TDA8295           76
+
 /* tv card specific */
 #define TDA9887_PRESENT 		(1<<0)
 #define TDA9887_PORT1_INACTIVE 		(1<<1)

commit 12466577853b0d057f4416f4c7020e544f3a4209
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Wed Oct 24 11:08:20 2007 -0300

    V4L/DVB (6422): Add the pending entries for xc2028/3028 based boards
    
    Also replaces all occurrences of TUNER_XCEIVE_XC3028 to TUNER_XC2028.
    
    Some work is still may be required to make sure that non-tm6000 drivers will
    be capable of using tuner-xc2028.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index c03dceb92605..d49392d90e56 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -117,7 +117,7 @@ extern int tuner_debug;
 #define TUNER_PHILIPS_TUV1236D		68	/* ATI HDTV Wonder */
 #define TUNER_TNF_5335MF                69	/* Sabrent Bt848   */
 #define TUNER_SAMSUNG_TCPN_2121P30A     70 	/* Hauppauge PVR-500MCE NTSC */
-#define TUNER_XCEIVE_XC3028		71
+#define TUNER_XC2028			71
 
 #define TUNER_THOMSON_FE6600		72	/* DViCO FusionHDTV DVB-T Hybrid */
 #define TUNER_SAMSUNG_TCPG_6121P30A     73 	/* Hauppauge PVR-500 PAL */

commit 5e082f1521598a91c9194b2356b157cade9b6e87
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Fri Aug 3 18:32:38 2007 -0300

    V4L/DVB (5978): tuner: Better tuner radio support
    
    Add radio support for the Thomson DTT7612 tuner.
    
    This tuner uses a different 1st intermediate frequency than the other radio
    tuners supported (a lot of NTSC radio tuners probably need this change too).
    
    Add a new tuner-simple parameter, radio_if.  It selects the 1st IF used for
    radio reception.  The radio frequency setting code in tuner-simple now uses
    this field, instead of a special case select() block for each tuner with radio
    support.
    
    The tuner parameters for tuners that used a 33.3 MHz RIF now set radio_if to 1
    in tuner-types.c.
    
    The Thomson DTT7612 gets radio_if = 2, also add has_tda9887 = 1 and
    fm_gain_normal = 1.
    
    Add some defines for tda9887 bits that control IF setting in radio mode.
    
    Add a new tda9887 config option, TDA9887_RIF_41_3, that selects a 41.3 MHz
    radio IF.
    
    Fix the way tda9887 radio options work.  The driver was modifying the default
    radio mode config templates based on the TDA9887_XXXX flags.  This means that
    _all_ tuners would get the same settings.  If you had a one tuner than used
    TDA9887_GAIN_NORMAL and one that didn't, both would get the setting.  Now the
    tda9987 driver just checks if tuner mode is radio and then applies the config
    settings directly to the data being sent, just like how all the TV mode
    settings already work.
    
    The PLL setting math is made a little more accurate.
    
    And a grammar error in a printk is fixed.
    
    Signed-off-by:  Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 160381c72e4b..c03dceb92605 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -146,6 +146,7 @@ extern int tuner_debug;
 #define TDA9887_AUTOMUTE 		(1<<18)
 #define TDA9887_GATING_18		(1<<19)
 #define TDA9887_GAIN_NORMAL		(1<<20)
+#define TDA9887_RIF_41_3		(1<<21)  /* radio IF1 41.3 vs 33.3 */
 
 #ifdef __KERNEL__
 

commit 8218b0b2caecf4af55742e12e9986c15605bb197
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Jun 26 13:12:08 2007 -0300

    V4L/DVB (5793): Tuner: remove hardware-specific info from public header
    
    Move internal structures and debug macros to drivers/media/video/tuner-driver.h
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 88eaf8930203..160381c72e4b 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -23,8 +23,6 @@
 #define _TUNER_H
 
 #include <linux/videodev2.h>
-#include <linux/i2c.h>
-#include <media/tuner-types.h>
 
 extern int tuner_debug;
 
@@ -183,72 +181,6 @@ struct tuner_setup {
 	int (*tuner_callback) (void *dev, int command,int arg);
 };
 
-struct tuner_operations {
-	void (*set_tv_freq)(struct i2c_client *c, unsigned int freq);
-	void (*set_radio_freq)(struct i2c_client *c, unsigned int freq);
-	int  (*has_signal)(struct i2c_client *c);
-	int  (*is_stereo)(struct i2c_client *c);
-	int  (*get_afc)(struct i2c_client *c);
-	void (*tuner_status)(struct i2c_client *c);
-	void (*standby)(struct i2c_client *c);
-	void (*release)(struct i2c_client *c);
-};
-
-struct tuner {
-	/* device */
-	struct i2c_client i2c;
-
-	unsigned int type;	/* chip type */
-
-	unsigned int mode;
-	unsigned int mode_mask;	/* Combination of allowable modes */
-
-	unsigned int tv_freq;	/* keep track of the current settings */
-	unsigned int radio_freq;
-	u16 	     last_div;
-	unsigned int audmode;
-	v4l2_std_id  std;
-
-	int          using_v4l2;
-	void *priv;
-
-	/* used by tda9887 */
-	unsigned int       tda9887_config;
-
-	unsigned int config;
-	int (*tuner_callback) (void *dev, int command,int arg);
-
-	struct tuner_operations ops;
-};
-
-extern unsigned const int tuner_count;
-
-extern int microtune_init(struct i2c_client *c);
-extern int xc3028_init(struct i2c_client *c);
-extern int tda8290_init(struct i2c_client *c);
-extern int tda8290_probe(struct i2c_client *c);
-extern int default_tuner_init(struct i2c_client *c);
-
-extern int tea5767_autodetection(struct i2c_client *c);
-extern int tea5767_tuner_init(struct i2c_client *c);
-
-extern int tda9887_tuner_init(struct i2c_client *c);
-
-extern int tea5761_tuner_init(struct i2c_client *c);
-extern int tea5761_autodetection(struct i2c_client *c);
-
-#define tuner_warn(fmt, arg...) do {\
-	printk(KERN_WARNING "%s %d-%04x: " fmt, t->i2c.driver->driver.name, \
-			i2c_adapter_id(t->i2c.adapter), t->i2c.addr , ##arg); } while (0)
-#define tuner_info(fmt, arg...) do {\
-	printk(KERN_INFO "%s %d-%04x: " fmt, t->i2c.driver->driver.name, \
-			i2c_adapter_id(t->i2c.adapter), t->i2c.addr , ##arg); } while (0)
-#define tuner_dbg(fmt, arg...) do {\
-	extern int tuner_debug; \
-	if (tuner_debug) \
-		printk(KERN_DEBUG "%s %d-%04x: " fmt, t->i2c.driver->driver.name, \
-			i2c_adapter_id(t->i2c.adapter), t->i2c.addr , ##arg); } while (0)
-
 #endif /* __KERNEL__ */
 
 #endif /* _TUNER_H */

commit 7a91a80a0d1a0a83a94e773ec6245b31b7c4ceed
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Wed Jun 6 16:10:39 2007 -0300

    V4L/DVB (5753): Tuner: create struct tuner_operations
    
    Move tuner callback function pointers out of struct tuner, into
    struct tuner_operations.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index da821a027e76..88eaf8930203 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -183,6 +183,17 @@ struct tuner_setup {
 	int (*tuner_callback) (void *dev, int command,int arg);
 };
 
+struct tuner_operations {
+	void (*set_tv_freq)(struct i2c_client *c, unsigned int freq);
+	void (*set_radio_freq)(struct i2c_client *c, unsigned int freq);
+	int  (*has_signal)(struct i2c_client *c);
+	int  (*is_stereo)(struct i2c_client *c);
+	int  (*get_afc)(struct i2c_client *c);
+	void (*tuner_status)(struct i2c_client *c);
+	void (*standby)(struct i2c_client *c);
+	void (*release)(struct i2c_client *c);
+};
+
 struct tuner {
 	/* device */
 	struct i2c_client i2c;
@@ -207,15 +218,7 @@ struct tuner {
 	unsigned int config;
 	int (*tuner_callback) (void *dev, int command,int arg);
 
-	/* function ptrs */
-	void (*set_tv_freq)(struct i2c_client *c, unsigned int freq);
-	void (*set_radio_freq)(struct i2c_client *c, unsigned int freq);
-	int  (*has_signal)(struct i2c_client *c);
-	int  (*is_stereo)(struct i2c_client *c);
-	int  (*get_afc)(struct i2c_client *c);
-	void (*tuner_status)(struct i2c_client *c);
-	void (*standby)(struct i2c_client *c);
-	void (*release)(struct i2c_client *c);
+	struct tuner_operations ops;
 };
 
 extern unsigned const int tuner_count;

commit be2b85a13543bbaf1a141b3a54f84c1e3b059e69
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Mon Jun 4 14:40:27 2007 -0300

    V4L/DVB (5741): Tuner: add release callback
    
    Individual tuner drivers are now allocating memory themselves for
    their own private data structures.  This changeset adds a release
    callback to the tuner operations, so that newer drivers that may
    require more complex data structures may release this private data
    themselves.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index b901373c6e10..da821a027e76 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -215,6 +215,7 @@ struct tuner {
 	int  (*get_afc)(struct i2c_client *c);
 	void (*tuner_status)(struct i2c_client *c);
 	void (*standby)(struct i2c_client *c);
+	void (*release)(struct i2c_client *c);
 };
 
 extern unsigned const int tuner_count;

commit b208319993ceff7ebfcc6bb914fe94d29e48a891
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue May 29 22:54:06 2007 -0300

    V4L/DVB (5719): Tuner: Move device-specific private data out of tuner struct
    
    Create private data struct for device specific private data.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 7861babd4c90..b901373c6e10 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -199,21 +199,10 @@ struct tuner {
 	v4l2_std_id  std;
 
 	int          using_v4l2;
+	void *priv;
 
 	/* used by tda9887 */
 	unsigned int       tda9887_config;
-	unsigned char 	   tda9887_data[4];
-
-	/* used by MT2032 */
-	unsigned int xogc;
-	unsigned int radio_if2;
-
-	/* used by tda8290 */
-	unsigned char tda8290_easy_mode;
-	unsigned char tda827x_lpsel;
-	unsigned char tda827x_addr;
-	unsigned char tda827x_ver;
-	unsigned int sgIF;
 
 	unsigned int config;
 	int (*tuner_callback) (void *dev, int command,int arg);

commit 8573a9e6a8ed724b7e3074dc8762d4117ed0b3aa
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sun Apr 8 01:09:11 2007 -0300

    V4L/DVB (5563a): Add experimental support for tea5761 tuner
    
    This driver were made based on tea5761 specs.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 6dcf3c45707d..7861babd4c90 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -124,6 +124,7 @@ extern int tuner_debug;
 #define TUNER_THOMSON_FE6600		72	/* DViCO FusionHDTV DVB-T Hybrid */
 #define TUNER_SAMSUNG_TCPG_6121P30A     73 	/* Hauppauge PVR-500 PAL */
 #define TUNER_TDA9887                   74      /* This tuner should be used only internally */
+#define TUNER_TEA5761			75	/* Only FM Radio Tuner */
 
 /* tv card specific */
 #define TDA9887_PRESENT 		(1<<0)
@@ -233,11 +234,16 @@ extern int microtune_init(struct i2c_client *c);
 extern int xc3028_init(struct i2c_client *c);
 extern int tda8290_init(struct i2c_client *c);
 extern int tda8290_probe(struct i2c_client *c);
-extern int tea5767_tuner_init(struct i2c_client *c);
 extern int default_tuner_init(struct i2c_client *c);
+
 extern int tea5767_autodetection(struct i2c_client *c);
+extern int tea5767_tuner_init(struct i2c_client *c);
+
 extern int tda9887_tuner_init(struct i2c_client *c);
 
+extern int tea5761_tuner_init(struct i2c_client *c);
+extern int tea5761_autodetection(struct i2c_client *c);
+
 #define tuner_warn(fmt, arg...) do {\
 	printk(KERN_WARNING "%s %d-%04x: " fmt, t->i2c.driver->driver.name, \
 			i2c_adapter_id(t->i2c.adapter), t->i2c.addr , ##arg); } while (0)

commit 7c59b6615fed9d3006b1e7b865fb07e483129611
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue May 1 23:26:29 2007 +0200

    i2c: Cleanup the includes of <linux/i2c.h>
    
    Clean up the includes of <linux/i2c.h>. Only include this header file
    when we actually need it.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index a41ac41113ac..6dcf3c45707d 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -23,6 +23,7 @@
 #define _TUNER_H
 
 #include <linux/videodev2.h>
+#include <linux/i2c.h>
 #include <media/tuner-types.h>
 
 extern int tuner_debug;

commit cfeb88398f004a0e85ee011fd89a01f5d3bf3c81
Author: Hartmut Hackmann <hartmut.hackmann@t-online.de>
Date:   Fri Apr 27 12:31:17 2007 -0300

    V4L/DVB (5323): Updated support for tuner callbacks
    
    This change supplies a more generic version of the tuner callback.
    The tuner struct now has a function pointer
      int (*tuner_callback) (void *dev, int command, int arg)
    additionally to a int config parameter.
    both can be set through the TUNER_SET_TYPE_ADDR client call.
    Note that the meaning of the parameters depend on the tuner type.
    
    Signed-off-by: Hartmut Hackmann <hartmut.hackmann@t-online.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index fe567129b22b..a41ac41113ac 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -173,15 +173,12 @@ enum tuner_mode {
    when the tuner is set to TV mode.
  */
 
-/* allows to access the GPIOs of the host (pci bridge) */
-typedef void (*tuner_gpio_func_t) (void *dev, int bit_no,int value);
-
 struct tuner_setup {
 	unsigned short	addr; 	/* I2C address */
 	unsigned int	type;   /* Tuner type */
 	unsigned int	mode_mask;  /* Allowed tuner modes */
 	unsigned int	config; /* configuraion for more complex tuners */
-	tuner_gpio_func_t gpio_func;
+	int (*tuner_callback) (void *dev, int command,int arg);
 };
 
 struct tuner {
@@ -215,8 +212,9 @@ struct tuner {
 	unsigned char tda827x_addr;
 	unsigned char tda827x_ver;
 	unsigned int sgIF;
+
 	unsigned int config;
-	tuner_gpio_func_t gpio_func;
+	int (*tuner_callback) (void *dev, int command,int arg);
 
 	/* function ptrs */
 	void (*set_tv_freq)(struct i2c_client *c, unsigned int freq);

commit de956c1e0f89413a3837b642d592e2dff3e3eb78
Author: Hartmut Hackmann <hartmut.hackmann@t-online.de>
Date:   Fri Apr 27 12:31:12 2007 -0300

    V4L/DVB (5313): Added a config entry and a gpio function pointer to tuner struct
    
    These entries mainly are to support configurations of the tda827x
    silicon tuner with a preamplifier.
    The values can be set throgh the attach inform or through
    the extended TUNER_SET_TYPE_ADDR client call. The function pointer
    will only be updated if the parameter is not NULL.
    Since a typecast is necessary to set the pointer, i added a typedef for
    this pointer (tuner_gpio_func_t) in tuner.h
    
    Signed-off-by: Hartmut Hackmann <hartmut.hackmann@t-online.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 99acf847365c..fe567129b22b 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -173,10 +173,15 @@ enum tuner_mode {
    when the tuner is set to TV mode.
  */
 
+/* allows to access the GPIOs of the host (pci bridge) */
+typedef void (*tuner_gpio_func_t) (void *dev, int bit_no,int value);
+
 struct tuner_setup {
 	unsigned short	addr; 	/* I2C address */
 	unsigned int	type;   /* Tuner type */
 	unsigned int	mode_mask;  /* Allowed tuner modes */
+	unsigned int	config; /* configuraion for more complex tuners */
+	tuner_gpio_func_t gpio_func;
 };
 
 struct tuner {
@@ -210,6 +215,8 @@ struct tuner {
 	unsigned char tda827x_addr;
 	unsigned char tda827x_ver;
 	unsigned int sgIF;
+	unsigned int config;
+	tuner_gpio_func_t gpio_func;
 
 	/* function ptrs */
 	void (*set_tv_freq)(struct i2c_client *c, unsigned int freq);

commit cefccc8011c58b559498396f0ccefa0a0ffa3f53
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Mon Dec 4 08:31:35 2006 -0300

    V4L/DVB (4934): Usbvision radio requires GainNormal at e register
    
    Adds an option to select GainNormal at tda9887 and make usbvision
    to use it.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 3116e750132f..99acf847365c 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -145,6 +145,7 @@ extern int tuner_debug;
 #define TDA9887_DEEMPHASIS_75 		(3<<16)
 #define TDA9887_AUTOMUTE 		(1<<18)
 #define TDA9887_GATING_18		(1<<19)
+#define TDA9887_GAIN_NORMAL		(1<<20)
 
 #ifdef __KERNEL__
 

commit d7304dee3b7e29e801ba59bbf9a47440c196263d
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Thu Aug 24 22:43:45 2006 -0300

    V4L/DVB (4533): Tda9887: add configuration setting for L standard PLL gating
    
    Add a tuner config parameter for TDA9887, default_pll_gating_18, that
    changes the L standard PLL gating value from 36% to 0% (datasheet says
    0%, tda9887 code says 18%).
    Turn this on for Microtune 4049FM5, as recomended by tuner datasheet.
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 2f7b00b08e88..3116e750132f 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -144,6 +144,7 @@ extern int tuner_debug;
 #define TDA9887_DEEMPHASIS_50 		(2<<16)
 #define TDA9887_DEEMPHASIS_75 		(3<<16)
 #define TDA9887_AUTOMUTE 		(1<<18)
+#define TDA9887_GATING_18		(1<<19)
 
 #ifdef __KERNEL__
 

commit 153962364dc6fa4a24571885fbe76506d8968610
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Fri Jun 23 16:13:56 2006 -0300

    V4L/DVB (4205): Merge tda9887 module into tuner.
    
    Most uses a tda988[5/6/7] IF demodulator as part of the device.
    Having this as a separate stuff makes harder to configure it, since there
    are some tda9887 options that are tuner-dependent and should be bound into
    tuner-types structures.
    This patch merges tda9887 module into tuner. More work is required to make
    tuner-types to properly use it.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 1601014c3f1e..2f7b00b08e88 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -25,6 +25,8 @@
 #include <linux/videodev2.h>
 #include <media/tuner-types.h>
 
+extern int tuner_debug;
+
 #define ADDR_UNSET (255)
 
 #define TUNER_TEMIC_PAL			0        /* 4002 FH5 (3X 7756, 9483) */
@@ -120,6 +122,7 @@
 
 #define TUNER_THOMSON_FE6600		72	/* DViCO FusionHDTV DVB-T Hybrid */
 #define TUNER_SAMSUNG_TCPG_6121P30A     73 	/* Hauppauge PVR-500 PAL */
+#define TUNER_TDA9887                   74      /* This tuner should be used only internally */
 
 /* tv card specific */
 #define TDA9887_PRESENT 		(1<<0)
@@ -191,6 +194,10 @@ struct tuner {
 
 	int          using_v4l2;
 
+	/* used by tda9887 */
+	unsigned int       tda9887_config;
+	unsigned char 	   tda9887_data[4];
+
 	/* used by MT2032 */
 	unsigned int xogc;
 	unsigned int radio_if2;
@@ -207,6 +214,8 @@ struct tuner {
 	void (*set_radio_freq)(struct i2c_client *c, unsigned int freq);
 	int  (*has_signal)(struct i2c_client *c);
 	int  (*is_stereo)(struct i2c_client *c);
+	int  (*get_afc)(struct i2c_client *c);
+	void (*tuner_status)(struct i2c_client *c);
 	void (*standby)(struct i2c_client *c);
 };
 
@@ -219,6 +228,7 @@ extern int tda8290_probe(struct i2c_client *c);
 extern int tea5767_tuner_init(struct i2c_client *c);
 extern int default_tuner_init(struct i2c_client *c);
 extern int tea5767_autodetection(struct i2c_client *c);
+extern int tda9887_tuner_init(struct i2c_client *c);
 
 #define tuner_warn(fmt, arg...) do {\
 	printk(KERN_WARNING "%s %d-%04x: " fmt, t->i2c.driver->driver.name, \

commit 9c26c8b169f4a7e2db9a3d5abd3ba74ea032dafd
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Thu Apr 27 01:29:17 2006 -0300

    V4L/DVB (3919): V4l: rename TUNER_LG_TDVS_H062F to TUNER_LG_TDVS_H06XF
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 0f4f2de65042..1601014c3f1e 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -108,7 +108,7 @@
 #define TUNER_TEA5767			62	/* Only FM Radio Tuner */
 #define TUNER_PHILIPS_FMD1216ME_MK3	63
 
-#define TUNER_LG_TDVS_H062F		64	/* DViCO FusionHDTV 5 */
+#define TUNER_LG_TDVS_H06XF		64	/* TDVS H061F, H062F, H064F */
 #define TUNER_YMEC_TVF66T5_B_DFF	65	/* Acorp Y878F */
 #define TUNER_LG_TALN			66
 #define TUNER_PHILIPS_TD1316		67

commit c344933af5a8610d71bd0d92fe43a1519ed72ed8
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Wed Apr 19 18:50:35 2006 -0300

    V4L/DVB (3814): Add support for Samsung TCPG 6121P30A PAL tuner.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 017fed7d5e4d..0f4f2de65042 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -119,6 +119,7 @@
 #define TUNER_XCEIVE_XC3028		71
 
 #define TUNER_THOMSON_FE6600		72	/* DViCO FusionHDTV DVB-T Hybrid */
+#define TUNER_SAMSUNG_TCPG_6121P30A     73 	/* Hauppauge PVR-500 PAL */
 
 /* tv card specific */
 #define TDA9887_PRESENT 		(1<<0)

commit f3629be8388a679590eb919919ee63e2715ec25e
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Sat Mar 11 17:02:01 2006 -0300

    V4L/DVB (3445): LG TALN series: add PAL / SECAM support
    
    - added tuner_lg_taln_pal_secam_ranges
    - renamed tuner 66 from TUNER_LG_NTSC_TALN_MINI to TUNER_LG_TALN
    - updated FlyTV mini Asus Digimatrix with new tuner
    
    Thanks-to: Rickard Osser <ricky@osser.se>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 02d7d9a76fa2..017fed7d5e4d 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -110,7 +110,7 @@
 
 #define TUNER_LG_TDVS_H062F		64	/* DViCO FusionHDTV 5 */
 #define TUNER_YMEC_TVF66T5_B_DFF	65	/* Acorp Y878F */
-#define TUNER_LG_NTSC_TALN_MINI		66
+#define TUNER_LG_TALN			66
 #define TUNER_PHILIPS_TD1316		67
 
 #define TUNER_PHILIPS_TUV1236D		68	/* ATI HDTV Wonder */

commit 91ae3299d7d3493a25e5f26cbaceeb18e7760ef3
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Wed Mar 1 00:04:42 2006 -0300

    V4L/DVB (3411): FE6600 is a Thomson tuner
    
    - The tuner used in DViCO FusionHDTV DVB-T hybrid is made by Thomson
    - renamed tuner and dvb_pll structs accordingly
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 039c77e02d34..02d7d9a76fa2 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -118,7 +118,7 @@
 #define TUNER_SAMSUNG_TCPN_2121P30A     70 	/* Hauppauge PVR-500MCE NTSC */
 #define TUNER_XCEIVE_XC3028		71
 
-#define TUNER_FE6600			72	/* DViCO FusionHDTV DVB-T Hybrid */
+#define TUNER_THOMSON_FE6600		72	/* DViCO FusionHDTV DVB-T Hybrid */
 
 /* tv card specific */
 #define TDA9887_PRESENT 		(1<<0)

commit 780dfef37e2c941985b708f67aa0074edc922bea
Author: Chris Pascoe <c.pascoe@itee.uq.edu.au>
Date:   Tue Feb 28 08:34:59 2006 -0300

    V4L/DVB (3408): DViCO FusionHDTV DVB-T Hybrid and ZL10353-based FusionHDTV DVB-T Plus support
    
    Add support for the FE6600 tuner used on the DVB-T Hybrid board.
    Add support for the Zarlink ZL10353 DVB-T demodulator, which supersedes the
    MT352, used on the DViCO FusionHDTV DVB-T Hybrid and later model Plus boards.
    
    Signed-off-by: Chris Pascoe <c.pascoe@itee.uq.edu.au>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index f51759c0d180..039c77e02d34 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -116,9 +116,10 @@
 #define TUNER_PHILIPS_TUV1236D		68	/* ATI HDTV Wonder */
 #define TUNER_TNF_5335MF                69	/* Sabrent Bt848   */
 #define TUNER_SAMSUNG_TCPN_2121P30A     70 	/* Hauppauge PVR-500MCE NTSC */
-
 #define TUNER_XCEIVE_XC3028		71
 
+#define TUNER_FE6600			72	/* DViCO FusionHDTV DVB-T Hybrid */
+
 /* tv card specific */
 #define TDA9887_PRESENT 		(1<<0)
 #define TDA9887_PORT1_INACTIVE 		(1<<1)

commit 0004fd59d57a5875db8897966c414a88b5dad481
Author: Markus Rechberger <mrechberger@gmail.com>
Date:   Mon Feb 27 00:07:27 2006 -0300

    V4L/DVB (3291): Added support for xc3028 analogue tuner  (Hauppauge HVR900, Terratec Hybrid XS)
    
    Added support for xc3028 to v4l which adds support for:
     * Terratec Hybrid XS (analogue)
     * Hauppauge HVR 900 (analogue)
    
    
    Signed-off-by: Markus Rechberger <mrechberger@gmail.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index a5beeac495c7..f51759c0d180 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -117,6 +117,8 @@
 #define TUNER_TNF_5335MF                69	/* Sabrent Bt848   */
 #define TUNER_SAMSUNG_TCPN_2121P30A     70 	/* Hauppauge PVR-500MCE NTSC */
 
+#define TUNER_XCEIVE_XC3028		71
+
 /* tv card specific */
 #define TDA9887_PRESENT 		(1<<0)
 #define TDA9887_PORT1_INACTIVE 		(1<<1)
@@ -209,6 +211,7 @@ struct tuner {
 extern unsigned const int tuner_count;
 
 extern int microtune_init(struct i2c_client *c);
+extern int xc3028_init(struct i2c_client *c);
 extern int tda8290_init(struct i2c_client *c);
 extern int tda8290_probe(struct i2c_client *c);
 extern int tea5767_tuner_init(struct i2c_client *c);

commit 27487d44712aaa37710cc508d5bd6119f5e9f976
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sun Jan 15 15:04:52 2006 -0200

    V4L/DVB (3384): Separate tv & radio freqs, fix cb/freq transmit order for tuners that need this.
    
    - Moved MSP_SET_MATRIX to v4l2-common.h
    - Fix typos and integer overflows in tea5767.c
    - Split old freq field into a tv_freq and a radio_freq. Prevents
      that a radio tuner is initialized with a tv frequency or vice versa.
    - When switching to radio mode initialize the tuner with the last
      used radio frequency (this was already done for the TV mode).
      As a result of these changes the tuner module now remembers the
      last set radio and TV frequencies, which is what you would expect
      to happen.
    - Move out of range frequencies to the closest valid frequency as per
      v4l2 API spec.
    - Fix incorrect initial radio frequency (multiplier is 16000, not 16)
    - Add boundary check for out of range frequencies.
    - Use new flag to check if the order of the CB and freq. depends on
      the last set frequency. That is needed for some tuners or you can
      get static as a result. The flag is added for those tuners where I know
      that the datasheet indicates that this is necessary.
    - For this new check use the last set div value, not the last frequency
      as radio frequencies are always much higher due to the 16000 multiplier.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index a1d63787bc08..a5beeac495c7 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -179,7 +179,9 @@ struct tuner {
 	unsigned int mode;
 	unsigned int mode_mask;	/* Combination of allowable modes */
 
-	unsigned int freq;	/* keep track of the current settings */
+	unsigned int tv_freq;	/* keep track of the current settings */
+	unsigned int radio_freq;
+	u16 	     last_div;
 	unsigned int audmode;
 	v4l2_std_id  std;
 
@@ -197,8 +199,8 @@ struct tuner {
 	unsigned int sgIF;
 
 	/* function ptrs */
-	void (*tv_freq)(struct i2c_client *c, unsigned int freq);
-	void (*radio_freq)(struct i2c_client *c, unsigned int freq);
+	void (*set_tv_freq)(struct i2c_client *c, unsigned int freq);
+	void (*set_radio_freq)(struct i2c_client *c, unsigned int freq);
 	int  (*has_signal)(struct i2c_client *c);
 	int  (*is_stereo)(struct i2c_client *c);
 	void (*standby)(struct i2c_client *c);

commit b3d37042d7d33baf0247d1df31031e64427f39b3
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Fri Jan 13 14:10:25 2006 -0200

    V4L/DVB (3363): Add support for Samsung tuner TCPN 2121P30A
    
    - Add support for Samsung tuner TCPN 2121P30A, used in
      Hauppauge PVR-500 cards.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index c88b506971cf..a1d63787bc08 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -115,6 +115,7 @@
 
 #define TUNER_PHILIPS_TUV1236D		68	/* ATI HDTV Wonder */
 #define TUNER_TNF_5335MF                69	/* Sabrent Bt848   */
+#define TUNER_SAMSUNG_TCPN_2121P30A     70 	/* Hauppauge PVR-500MCE NTSC */
 
 /* tv card specific */
 #define TDA9887_PRESENT 		(1<<0)

commit 7b0ac9cdd42b254ae2ec0f6c1cc6389655e4ba96
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Fri Jan 13 14:10:25 2006 -0200

    V4L/DVB (3359): Redesign tuners struct for maximum flexibility
    
    - Tunertype struct redefined to allow one or more tuner_params structs
      per tuner definition, one for each video standard.
    - Each tuner_params struct has an element containing an arbitrary
      amount of tuner_ranges.
      (this is needed for dvb tuners - to be handled later)
    - A tuner_range may be referenced by multiple tuner_params structs.
      There are many duplicates in here. Reusing tuner_range structs,
      rather than defining new ones for each tuner, will cut down on
      memory usage, and is preferred when possible.
    - tunertype struct contains an element, has_tda988x.
      We must set this for all tunertypes that contain a tda988x
      chip, and then we can remove this setting from the various
      card structs.
    - Improves tuners array memory usage efficiency.
    - Right now, all tuners are using the first tuner_params[] array element
      for analog mode. In the future, we will be merging similar tuner
      definitions together, such that each tuner definition will have a
      tuner_params struct for each available video standard. At that point,
      the tuner_params[] array element will be chosen based on the video
      standard in use.
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 27cbf08c931d..c88b506971cf 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -23,6 +23,7 @@
 #define _TUNER_H
 
 #include <linux/videodev2.h>
+#include <media/tuner-types.h>
 
 #define ADDR_UNSET (255)
 

commit f9195ded25a4e8fba09c67aa24b42cd98a242d7d
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Wed Jan 11 19:01:01 2006 -0200

    V4L/DVB (3347): Fixes some bad global variables
    
    - Debug global var is already used inside kernel, so renamed
    debug to tuner_debug for the tuner module
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 7674b121ce8b..27cbf08c931d 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -218,8 +218,8 @@ extern int tea5767_autodetection(struct i2c_client *c);
 	printk(KERN_INFO "%s %d-%04x: " fmt, t->i2c.driver->driver.name, \
 			i2c_adapter_id(t->i2c.adapter), t->i2c.addr , ##arg); } while (0)
 #define tuner_dbg(fmt, arg...) do {\
-	extern int debug; \
-	if (debug) \
+	extern int tuner_debug; \
+	if (tuner_debug) \
 		printk(KERN_DEBUG "%s %d-%04x: " fmt, t->i2c.driver->driver.name, \
 			i2c_adapter_id(t->i2c.adapter), t->i2c.addr , ##arg); } while (0)
 

commit cab462f716cdd522edc71436482d8734e8258489
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Mon Jan 9 15:53:26 2006 -0200

    V4L/DVB (3307): Some cleanups at I2C modules
    
    - i2c names shorten
    - removed obsoleted flags on newer modules
    - small cleanups
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 584f3ab1fcf7..7674b121ce8b 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -214,7 +214,6 @@ extern int tea5767_autodetection(struct i2c_client *c);
 #define tuner_warn(fmt, arg...) do {\
 	printk(KERN_WARNING "%s %d-%04x: " fmt, t->i2c.driver->driver.name, \
 			i2c_adapter_id(t->i2c.adapter), t->i2c.addr , ##arg); } while (0)
-
 #define tuner_info(fmt, arg...) do {\
 	printk(KERN_INFO "%s %d-%04x: " fmt, t->i2c.driver->driver.name, \
 			i2c_adapter_id(t->i2c.adapter), t->i2c.addr , ##arg); } while (0)

commit fac9e89999a12f378112fe93764b30196bc03f46
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Mon Jan 9 15:32:40 2006 -0200

    V4L/DVB (3278): convert diagnostics over to the new v4l2-common.h macros.
    
    
    - Convert diagnostics over to the new v4l2-common.h macros.
    - deprecated tuner_debug option, the new option is debug.
    - renamed cx25840_debug to debug.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 6a8ef189e5fa..584f3ab1fcf7 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -202,7 +202,6 @@ struct tuner {
 	void (*standby)(struct i2c_client *c);
 };
 
-extern unsigned int tuner_debug;
 extern unsigned const int tuner_count;
 
 extern int microtune_init(struct i2c_client *c);
@@ -220,7 +219,8 @@ extern int tea5767_autodetection(struct i2c_client *c);
 	printk(KERN_INFO "%s %d-%04x: " fmt, t->i2c.driver->driver.name, \
 			i2c_adapter_id(t->i2c.adapter), t->i2c.addr , ##arg); } while (0)
 #define tuner_dbg(fmt, arg...) do {\
-	if (tuner_debug) \
+	extern int debug; \
+	if (debug) \
 		printk(KERN_DEBUG "%s %d-%04x: " fmt, t->i2c.driver->driver.name, \
 			i2c_adapter_id(t->i2c.adapter), t->i2c.addr , ##arg); } while (0)
 

commit 5e453dc757385ec892a818e4e3b5de027987ced9
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Mon Jan 9 15:32:31 2006 -0200

    V4L/DVB (3269): ioctls cleanups.
    
    
    - Now, all internal ioctls are at v4l2-common.h
    - removed unused ioctl at saa6752hs.h
    - all debug ioctl code moved to v4l2-common.c
    - removed duplicated stuff from other cards
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index c5f034ecb002..6a8ef189e5fa 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -115,10 +115,6 @@
 #define TUNER_PHILIPS_TUV1236D		68	/* ATI HDTV Wonder */
 #define TUNER_TNF_5335MF                69	/* Sabrent Bt848   */
 
-#define TUNER_SET_TYPE_ADDR          _IOW('T',3,int)
-#define TUNER_SET_STANDBY            _IOW('T',4,int)
-#define TDA9887_SET_CONFIG           _IOW('t',5,int)
-
 /* tv card specific */
 #define TDA9887_PRESENT 		(1<<0)
 #define TDA9887_PORT1_INACTIVE 		(1<<1)

commit a544521ef06ee7b8a3d82fa29627401196fda77a
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Mon Jan 9 15:25:39 2006 -0200

    V4L/DVB (3245): Added some comments about multiple tuner support.
    
    
    - Added some comments to make clearer how to use ioctl api to handle
    multiple tuners at the same board.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index aa91ce35915b..c5f034ecb002 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -150,10 +150,26 @@ enum tuner_mode {
 	T_STANDBY	= 1 << 31
 };
 
+/* Older boards only had a single tuner device. Nowadays multiple tuner
+   devices may be present on a single board. Using TUNER_SET_TYPE_ADDR
+   to pass the tuner_setup structure it is possible to setup each tuner
+   device in turn.
+
+   Since multiple devices may be present it is no longer sufficient to
+   send a command to a single i2c device. Instead you should broadcast
+   the command to all i2c devices.
+
+   By setting the mode_mask correctly you can select which commands are
+   accepted by a specific tuner device. For example, set mode_mask to
+   T_RADIO if the device is a radio-only tuner. That specific tuner will
+   only accept commands when the tuner is in radio mode and ignore them
+   when the tuner is set to TV mode.
+ */
+
 struct tuner_setup {
-	unsigned short	addr;
-	unsigned int	type;
-	unsigned int	mode_mask;
+	unsigned short	addr; 	/* I2C address */
+	unsigned int	type;   /* Tuner type */
+	unsigned int	mode_mask;  /* Allowed tuner modes */
 };
 
 struct tuner {

commit 83ac8722be6d34b9bbcaabfff825d5847ce3a9d4
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Mon Jan 9 15:25:29 2006 -0200

    V4L/DVB (3196): correct Thomson DTT 761x frequency ranges
    
    
    - Corrected Thomson DTT 7611 tuner programming, based on spec sheet
    - renamed to Thomson DTT 761x
    - applies to DTT 7611 7611A 7612 7613 7613A 7614 7615 7615A
    (DTT 7610 is similar, but slightly different programming)
    - corrected frequency ranges for analog and digital modes
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index b39e908cd068..aa91ce35915b 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -102,7 +102,7 @@
 #define TUNER_YMEC_TVF_8531MF		58
 #define TUNER_YMEC_TVF_5533MF		59	/* Pixelview Pro Ultra NTSC */
 
-#define TUNER_THOMSON_DTT7611		60	/* DViCO FusionHDTV 3 Gold-T */
+#define TUNER_THOMSON_DTT761X		60	/* DTT 7611 7611A 7612 7613 7613A 7614 7615 7615A */
 #define TUNER_TENA_9533_DI		61
 #define TUNER_TEA5767			62	/* Only FM Radio Tuner */
 #define TUNER_PHILIPS_FMD1216ME_MK3	63

commit 7e57819169d4f9a1d7af55fb645ece3fb981e2e3
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Mon Jan 9 15:25:27 2006 -0200

    V4L/DVB (3167): added ntsc parameter to tuner and more standardized debugs
    
    - Debug message changed to be coherent with other modules
    - added ntsc parameter
    - parameters moved to the beginning at the file
    - tuner_status moved to a better position.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 567f05549e3a..b39e908cd068 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -202,15 +202,15 @@ extern int tea5767_autodetection(struct i2c_client *c);
 
 #define tuner_warn(fmt, arg...) do {\
 	printk(KERN_WARNING "%s %d-%04x: " fmt, t->i2c.driver->driver.name, \
-			t->i2c.adapter->nr, t->i2c.addr , ##arg); } while (0)
+			i2c_adapter_id(t->i2c.adapter), t->i2c.addr , ##arg); } while (0)
+
 #define tuner_info(fmt, arg...) do {\
 	printk(KERN_INFO "%s %d-%04x: " fmt, t->i2c.driver->driver.name, \
-			t->i2c.adapter->nr, t->i2c.addr , ##arg); } while (0)
+			i2c_adapter_id(t->i2c.adapter), t->i2c.addr , ##arg); } while (0)
 #define tuner_dbg(fmt, arg...) do {\
 	if (tuner_debug) \
-		printk(KERN_DEBUG "%s %d-%04x: " fmt, \
-			t->i2c.driver->driver.name, \
-			t->i2c.adapter->nr, t->i2c.addr , ##arg); } while (0)
+		printk(KERN_DEBUG "%s %d-%04x: " fmt, t->i2c.driver->driver.name, \
+			i2c_adapter_id(t->i2c.adapter), t->i2c.addr , ##arg); } while (0)
 
 #endif /* __KERNEL__ */
 

commit f98c55ea18e87905bdf69eb4a187e94572ed9494
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Mon Jan 9 15:25:18 2006 -0200

    V4L/DVB (3116): tda9887 improvements: better defaults, better configurability.
    
    - Set the tuner takeover point to 0x10 for NTSC/radio and 0x14 for PAL/SECAM.
    - Allow override through TDA9887_SET_CONFIG
    - PAL-N belongs with PAL-BG as does PAL-H. PAL-Nc belongs to PAL-M
    - Add SECAM-BGH
    - Set video freq to cVideoIF_38_90 for DK standards.
    - Add cTunerGainLow to radio, change deemphasis to 75 for mono.
    - Add ntsc module param for 'M' and 'J' (Japanese) standards.
    - Fix module handling for 2.4.
    - Now able to select all standards through pal/secam/ntsc module options
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index e224722a7ff7..567f05549e3a 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -120,20 +120,25 @@
 #define TDA9887_SET_CONFIG           _IOW('t',5,int)
 
 /* tv card specific */
-# define TDA9887_PRESENT             (1<<0)
-# define TDA9887_PORT1_INACTIVE      (1<<1)
-# define TDA9887_PORT2_INACTIVE      (1<<2)
-# define TDA9887_QSS                 (1<<3)
-# define TDA9887_INTERCARRIER        (1<<4)
-# define TDA9887_PORT1_ACTIVE        (1<<5)
-# define TDA9887_PORT2_ACTIVE        (1<<6)
-# define TDA9887_INTERCARRIER_NTSC   (1<<7)
+#define TDA9887_PRESENT 		(1<<0)
+#define TDA9887_PORT1_INACTIVE 		(1<<1)
+#define TDA9887_PORT2_INACTIVE 		(1<<2)
+#define TDA9887_QSS 			(1<<3)
+#define TDA9887_INTERCARRIER 		(1<<4)
+#define TDA9887_PORT1_ACTIVE 		(1<<5)
+#define TDA9887_PORT2_ACTIVE 		(1<<6)
+#define TDA9887_INTERCARRIER_NTSC 	(1<<7)
+/* Tuner takeover point adjustment, in dB, -16 <= top <= 15 */
+#define TDA9887_TOP_MASK 		(0x3f << 8)
+#define TDA9887_TOP_SET 		(1 << 13)
+#define TDA9887_TOP(top) 		(TDA9887_TOP_SET | (((16 + (top)) & 0x1f) << 8))
+
 /* config options */
-# define TDA9887_DEEMPHASIS_MASK     (3<<16)
-# define TDA9887_DEEMPHASIS_NONE     (1<<16)
-# define TDA9887_DEEMPHASIS_50       (2<<16)
-# define TDA9887_DEEMPHASIS_75       (3<<16)
-# define TDA9887_AUTOMUTE            (1<<18)
+#define TDA9887_DEEMPHASIS_MASK 	(3<<16)
+#define TDA9887_DEEMPHASIS_NONE 	(1<<16)
+#define TDA9887_DEEMPHASIS_50 		(2<<16)
+#define TDA9887_DEEMPHASIS_75 		(3<<16)
+#define TDA9887_AUTOMUTE 		(1<<18)
 
 #ifdef __KERNEL__
 

commit 174329d951e2fe39f779d67e9488b7a7f15df69c
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Mon Jan 9 15:25:10 2006 -0200

    V4L/DVB (3062): Fix wrong tuner.h define for tuner 46
    
    - Fix wrong tuner.h define for tuner 46 (it's a Panasonic, not a Microtune).
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index b28aa17213f5..e224722a7ff7 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -82,9 +82,9 @@
 #define TUNER_PHILIPS_FM1236_MK3	43
 
 #define TUNER_PHILIPS_4IN1		44	/* ATI TV Wonder Pro - Conexant */
-/* Microtune mergeged with Temic 12/31/1999 partially financed by Alps - these may be similar to Temic */
+/* Microtune merged with Temic 12/31/1999 partially financed by Alps - these may be similar to Temic */
 #define TUNER_MICROTUNE_4049FM5 	45
-#define TUNER_MICROTUNE_4042_FI5	46
+#define TUNER_PANASONIC_VP27		46
 #define TUNER_LG_NTSC_TAPE		47
 
 #define TUNER_TNF_8831BGFF		48

commit e142e5107f1e4103dad16e391a41166e15b66a9c
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Mon Jan 9 15:25:03 2006 -0200

    V4L (1021): Tuner description now follows the same CodingStyle as the others
    
    - Tuner description now follows the same CodingStyle as the others
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index b37cde606692..b28aa17213f5 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -115,28 +115,6 @@
 #define TUNER_PHILIPS_TUV1236D		68	/* ATI HDTV Wonder */
 #define TUNER_TNF_5335MF                69	/* Sabrent Bt848   */
 
-#define NOTUNER 0
-#define PAL     1	/* PAL_BG */
-#define PAL_I   2
-#define NTSC    3
-#define SECAM   4
-#define ATSC    5
-#define RADIO   6
-
-#define NoTuner 0
-#define Philips 1
-#define TEMIC   2
-#define Sony    3
-#define Alps    4
-#define LGINNOTEK 5
-#define SHARP   6
-#define Samsung 7
-#define Microtune 8
-#define HITACHI 9
-#define Panasonic 10
-#define TCL     11
-#define THOMSON 12
-
 #define TUNER_SET_TYPE_ADDR          _IOW('T',3,int)
 #define TUNER_SET_STANDBY            _IOW('T',4,int)
 #define TDA9887_SET_CONFIG           _IOW('t',5,int)

commit 604f28e2b8d34cbaf08f0351374645f161335a82
Author: Laurent Riffard <laurent.riffard@free.fr>
Date:   Sat Nov 26 20:43:39 2005 +0100

    [PATCH] i2c: Drop i2c_driver.{owner,name}, 5 of 11
    
    We should use the i2c_driver.driver's .name and .owner fields
    instead of the i2c_driver's ones.
    
    This patch updates the drivers/media/video and usb/media drivers.
    
    Signed-off-by: Laurent Riffard <laurent.riffard@free.fr>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index faa0f8e3091b..b37cde606692 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -218,14 +218,15 @@ extern int default_tuner_init(struct i2c_client *c);
 extern int tea5767_autodetection(struct i2c_client *c);
 
 #define tuner_warn(fmt, arg...) do {\
-	printk(KERN_WARNING "%s %d-%04x: " fmt, t->i2c.driver->name, \
+	printk(KERN_WARNING "%s %d-%04x: " fmt, t->i2c.driver->driver.name, \
 			t->i2c.adapter->nr, t->i2c.addr , ##arg); } while (0)
 #define tuner_info(fmt, arg...) do {\
-	printk(KERN_INFO "%s %d-%04x: " fmt, t->i2c.driver->name, \
+	printk(KERN_INFO "%s %d-%04x: " fmt, t->i2c.driver->driver.name, \
 			t->i2c.adapter->nr, t->i2c.addr , ##arg); } while (0)
 #define tuner_dbg(fmt, arg...) do {\
 	if (tuner_debug) \
-		printk(KERN_DEBUG "%s %d-%04x: " fmt, t->i2c.driver->name, \
+		printk(KERN_DEBUG "%s %d-%04x: " fmt, \
+			t->i2c.driver->driver.name, \
 			t->i2c.adapter->nr, t->i2c.addr , ##arg); } while (0)
 
 #endif /* __KERNEL__ */

commit 633323ffffae91c3f22a08e0185fbfd3fae2a825
Author: Bill Pechter <pechter@gmail.com>
Date:   Sun Nov 13 16:07:50 2005 -0800

    [PATCH] v4l:: (936) Support for sabrent bt848 version
    
    Support for Sabrent bt848 version.
    
    Signed-off-by: Bill Pechter <pechter@gmail.com>
    Signed-off-by: Nickolay V. Shmyrev <nshmyrev@yandex.ru>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 9184e534b7ef..faa0f8e3091b 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -113,6 +113,7 @@
 #define TUNER_PHILIPS_TD1316		67
 
 #define TUNER_PHILIPS_TUV1236D		68	/* ATI HDTV Wonder */
+#define TUNER_TNF_5335MF                69	/* Sabrent Bt848   */
 
 #define NOTUNER 0
 #define PAL     1	/* PAL_BG */

commit 90e9df7f186876584b938e01fcf7f40a50c950b9
Author: Hartmut Hackmann <hartmut.hackmann@t.online.de>
Date:   Tue Nov 8 21:38:42 2005 -0800

    [PATCH] V4L: 904: added dvb support for tda8275a philips tiger reference design
    
    Added dvb support for tda8275a (Philips Tiger reference design)
    
    Signed-off-by: Hartmut Hackmann <hartmut.hackmann@t.online.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 5196d9eac442..9184e534b7ef 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -211,10 +211,10 @@ extern unsigned const int tuner_count;
 
 extern int microtune_init(struct i2c_client *c);
 extern int tda8290_init(struct i2c_client *c);
+extern int tda8290_probe(struct i2c_client *c);
 extern int tea5767_tuner_init(struct i2c_client *c);
 extern int default_tuner_init(struct i2c_client *c);
 extern int tea5767_autodetection(struct i2c_client *c);
-extern int tda8290_probe(struct i2c_client *c);
 
 #define tuner_warn(fmt, arg...) do {\
 	printk(KERN_WARNING "%s %d-%04x: " fmt, t->i2c.driver->name, \

commit 01cb9633e1b294c604c2dfa01dcac95daf775213
Author: Nickolay V. Shmyrev <nshmyrev@yandex.ru>
Date:   Tue Nov 8 21:38:00 2005 -0800

    [PATCH] v4l: 826: unify whitespaces
    
    - Unify whitespaces.
    
    Signed-off-by: Nickolay V. Shmyrev <nshmyrev@yandex.ru>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 8058be63ad0e..5196d9eac442 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -214,6 +214,7 @@ extern int tda8290_init(struct i2c_client *c);
 extern int tea5767_tuner_init(struct i2c_client *c);
 extern int default_tuner_init(struct i2c_client *c);
 extern int tea5767_autodetection(struct i2c_client *c);
+extern int tda8290_probe(struct i2c_client *c);
 
 #define tuner_warn(fmt, arg...) do {\
 	printk(KERN_WARNING "%s %d-%04x: " fmt, t->i2c.driver->name, \

commit de48eebce8b63dbae7272ee80f4fe0eaddb61278
Author: Hartmut Hackmann <hartmut.hackmann@t.online.de>
Date:   Tue Nov 8 21:37:48 2005 -0800

    [PATCH] v4l: 806: add support for tda8275a
    
    - Add support for tda8275a
    
    Signed-off-by: Hartmut Hackmann <hartmut.hackmann@t.online.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 94a9511479a1..8058be63ad0e 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -192,9 +192,11 @@ struct tuner {
 	unsigned int radio_if2;
 
 	/* used by tda8290 */
-	unsigned char i2c_easy_mode[2];
-	unsigned char i2c_set_freq[8];
-	unsigned int  sgIF;
+	unsigned char tda8290_easy_mode;
+	unsigned char tda827x_lpsel;
+	unsigned char tda827x_addr;
+	unsigned char tda827x_ver;
+	unsigned int sgIF;
 
 	/* function ptrs */
 	void (*tv_freq)(struct i2c_client *c, unsigned int freq);

commit 4ac97914c6c35f6bf132071c718e034d0846b9f5
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Tue Nov 8 21:37:43 2005 -0800

    [PATCH] v4l: 800: whitespace cleanups
    
    - Whitespace Cleanups.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 81025323267f..94a9511479a1 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -215,14 +215,14 @@ extern int tea5767_autodetection(struct i2c_client *c);
 
 #define tuner_warn(fmt, arg...) do {\
 	printk(KERN_WARNING "%s %d-%04x: " fmt, t->i2c.driver->name, \
-                        t->i2c.adapter->nr, t->i2c.addr , ##arg); } while (0)
+			t->i2c.adapter->nr, t->i2c.addr , ##arg); } while (0)
 #define tuner_info(fmt, arg...) do {\
 	printk(KERN_INFO "%s %d-%04x: " fmt, t->i2c.driver->name, \
-                        t->i2c.adapter->nr, t->i2c.addr , ##arg); } while (0)
+			t->i2c.adapter->nr, t->i2c.addr , ##arg); } while (0)
 #define tuner_dbg(fmt, arg...) do {\
 	if (tuner_debug) \
-                printk(KERN_DEBUG "%s %d-%04x: " fmt, t->i2c.driver->name, \
-                        t->i2c.adapter->nr, t->i2c.addr , ##arg); } while (0)
+		printk(KERN_DEBUG "%s %d-%04x: " fmt, t->i2c.driver->name, \
+			t->i2c.adapter->nr, t->i2c.addr , ##arg); } while (0)
 
 #endif /* __KERNEL__ */
 

commit 3ae1adc6ed93d55a27523f395284940fbe056401
Author: Nickolay V. Shmyrev <nshmyrev@yandex.ru>
Date:   Tue Nov 8 21:37:39 2005 -0800

    [PATCH] v4l: 795: new config option for tda9887 to specifically set intercarrier
    
    - New config option for tda9887 to specifically set intercarrier
    
    Signed-off-by: Nickolay V. Shmyrev <nshmyrev@yandex.ru>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 7cc74b1bb6ea..81025323267f 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -148,6 +148,7 @@
 # define TDA9887_INTERCARRIER        (1<<4)
 # define TDA9887_PORT1_ACTIVE        (1<<5)
 # define TDA9887_PORT2_ACTIVE        (1<<6)
+# define TDA9887_INTERCARRIER_NTSC   (1<<7)
 /* config options */
 # define TDA9887_DEEMPHASIS_MASK     (3<<16)
 # define TDA9887_DEEMPHASIS_NONE     (1<<16)

commit e976f93725ce16b4a493d40a6dd3bccbd74b9a8a
Author: Kirk Lapray <kirk.lapray@gmail.com>
Date:   Tue Nov 8 21:37:04 2005 -0800

    [PATCH] v4l: 712: added analog support for ati hdtv wonder
    
    - Added analog support for ATI HDTV Wonder
    
    Signed-off-by: Kirk Lapray <kirk.lapray@gmail.com>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 97e16bddf651..7cc74b1bb6ea 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -112,6 +112,8 @@
 #define TUNER_LG_NTSC_TALN_MINI		66
 #define TUNER_PHILIPS_TD1316		67
 
+#define TUNER_PHILIPS_TUV1236D		68	/* ATI HDTV Wonder */
+
 #define NOTUNER 0
 #define PAL     1	/* PAL_BG */
 #define PAL_I   2

commit 70b6934a6c6b5f242a42978f3c5e4f45d476dddb
Author: Nickolay V. Shmyrev <nshmyrev@yandex.ru>
Date:   Tue Nov 8 21:36:50 2005 -0800

    [PATCH] v4l: 691: set if of tda8275 according to tv norm
    
    - Set IF of tda8275 according to tv norm.
    
    Signed-off-by: Nickolay V. Shmyrev <nshmyrev@yandex.ru>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index bf925702fbbf..97e16bddf651 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -191,6 +191,7 @@ struct tuner {
 	/* used by tda8290 */
 	unsigned char i2c_easy_mode[2];
 	unsigned char i2c_set_freq[8];
+	unsigned int  sgIF;
 
 	/* function ptrs */
 	void (*tv_freq)(struct i2c_client *c, unsigned int freq);

commit 20f441f6900d786606583263d89653c48c7093a8
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Tue Nov 8 21:36:44 2005 -0800

    [PATCH] v4l: 685: update the tveeprom tuner list with the tuner
    
    - Update the tveeprom tuner list with the tuner
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Nickolay V. Shmyrev <nshmyrev@yandex.ru>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 4f47eac90caf..bf925702fbbf 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -95,7 +95,7 @@
 #define TUNER_THOMSON_DTT7610		52
 #define TUNER_PHILIPS_FQ1286		53
 #define TUNER_PHILIPS_TDA8290		54
-#define TUNER_LG_PAL_TAPE		55	/* Hauppauge PVR-150 PAL */
+#define TUNER_TCL_2002MB		55	/* Hauppauge PVR-150 PAL */
 
 #define TUNER_PHILIPS_FQ1216AME_MK4	56	/* Hauppauge PVR-150 PAL */
 #define TUNER_PHILIPS_FQ1236A_MK4	57	/* Hauppauge PVR-500MCE NTSC */

commit 93df3413f1b4c437b93c5b64562632f4f0e2b3ca
Author: Hartmut Hackmann <hartmut.hackmann@t.online.de>
Date:   Tue Nov 8 21:36:31 2005 -0800

    [PATCH] v4l: 655: added support for the philips td1316 tuner
    
    - Added support for the Philips TD1316 tuner
    
    Signed-off-by: Hartmut Hackmann <hartmut.hackmann@t.online.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 4ad08e24a1aa..4f47eac90caf 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -110,6 +110,7 @@
 #define TUNER_LG_TDVS_H062F		64	/* DViCO FusionHDTV 5 */
 #define TUNER_YMEC_TVF66T5_B_DFF	65	/* Acorp Y878F */
 #define TUNER_LG_NTSC_TALN_MINI		66
+#define TUNER_PHILIPS_TD1316		67
 
 #define NOTUNER 0
 #define PAL     1	/* PAL_BG */

commit 10b89ee387fd6cc38532a881f64b3d35f338ea0b
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Sep 9 13:04:03 2005 -0700

    [PATCH] v4l: include saa6588 compiler option and files / fixes comments on tuner.h
    
    - Include saa6588 compiler option and files.
    - Fix comment on tuner.h
    - linux/utsname.h replaced by linux/version.h to compile on vanilla 2.6.13
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 5b01ee6b0868..4ad08e24a1aa 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -1,4 +1,4 @@
- *
+/*
     tuner.h - definition for different tuners
 
     Copyright (C) 1997 Markus Schroeder (schroedm@uni-duesseldorf.de)

commit 1c94aeecd3fd2aed66d9a1135f5329df622e6137
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Sep 9 13:03:52 2005 -0700

    [PATCH] v4l: normalize whitespace and comments in tuner lists
    
    - normalize whitespace and comments in tuner lists
    
    Signed-off-by: Philip Rowlands <phr@doc.ic.ac.uk>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 252673bfa592..5b01ee6b0868 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -26,90 +26,90 @@
 
 #define ADDR_UNSET (255)
 
-#define TUNER_TEMIC_PAL     0        /* 4002 FH5 (3X 7756, 9483) */
-#define TUNER_PHILIPS_PAL_I 1
-#define TUNER_PHILIPS_NTSC  2
-#define TUNER_PHILIPS_SECAM 3		/* you must actively select B/G, L, L` */
-
-#define TUNER_ABSENT        4
-#define TUNER_PHILIPS_PAL   5
-#define TUNER_TEMIC_NTSC    6        /* 4032 FY5 (3X 7004, 9498, 9789)  */
-#define TUNER_TEMIC_PAL_I   7        /* 4062 FY5 (3X 8501, 9957)        */
-
-#define TUNER_TEMIC_4036FY5_NTSC 8   /* 4036 FY5 (3X 1223, 1981, 7686)  */
-#define TUNER_ALPS_TSBH1_NTSC 	 9
-#define TUNER_ALPS_TSBE1_PAL 	10
-#define TUNER_ALPS_TSBB5_PAL_I 	11
-
-#define TUNER_ALPS_TSBE5_PAL 	12
-#define TUNER_ALPS_TSBC5_PAL 	13
-#define TUNER_TEMIC_4006FH5_PAL	14   /* 4006 FH5 (3X 9500, 9501, 7291)     */
-#define TUNER_ALPS_TSHC6_NTSC 	15
-
-#define TUNER_TEMIC_PAL_DK	16   /* 4016 FY5 (3X 1392, 1393)     */
-#define TUNER_PHILIPS_NTSC_M	17
-#define TUNER_TEMIC_4066FY5_PAL_I       18  /* 4066 FY5 (3X 7032, 7035) */
-#define TUNER_TEMIC_4006FN5_MULTI_PAL   19  /* B/G, I and D/K autodetected (3X 7595, 7606, 7657)*/
-
-#define TUNER_TEMIC_4009FR5_PAL         20  /* incl. FM radio (3X 7607, 7488, 7711)*/
-#define TUNER_TEMIC_4039FR5_NTSC        21  /* incl. FM radio (3X 7246, 7578, 7732)*/
-#define TUNER_TEMIC_4046FM5             22  /* you must actively select B/G, D/K, I, L, L` !  (3X 7804, 7806, 8103, 8104)*/
+#define TUNER_TEMIC_PAL			0        /* 4002 FH5 (3X 7756, 9483) */
+#define TUNER_PHILIPS_PAL_I		1
+#define TUNER_PHILIPS_NTSC		2
+#define TUNER_PHILIPS_SECAM		3	/* you must actively select B/G, L, L` */
+
+#define TUNER_ABSENT			4
+#define TUNER_PHILIPS_PAL		5
+#define TUNER_TEMIC_NTSC		6	/* 4032 FY5 (3X 7004, 9498, 9789)  */
+#define TUNER_TEMIC_PAL_I		7	/* 4062 FY5 (3X 8501, 9957) */
+
+#define TUNER_TEMIC_4036FY5_NTSC	8	/* 4036 FY5 (3X 1223, 1981, 7686) */
+#define TUNER_ALPS_TSBH1_NTSC		9
+#define TUNER_ALPS_TSBE1_PAL		10
+#define TUNER_ALPS_TSBB5_PAL_I		11
+
+#define TUNER_ALPS_TSBE5_PAL		12
+#define TUNER_ALPS_TSBC5_PAL		13
+#define TUNER_TEMIC_4006FH5_PAL		14	/* 4006 FH5 (3X 9500, 9501, 7291) */
+#define TUNER_ALPS_TSHC6_NTSC		15
+
+#define TUNER_TEMIC_PAL_DK		16	/* 4016 FY5 (3X 1392, 1393) */
+#define TUNER_PHILIPS_NTSC_M		17
+#define TUNER_TEMIC_4066FY5_PAL_I	18	/* 4066 FY5 (3X 7032, 7035) */
+#define TUNER_TEMIC_4006FN5_MULTI_PAL	19	/* B/G, I and D/K autodetected (3X 7595, 7606, 7657) */
+
+#define TUNER_TEMIC_4009FR5_PAL		20	/* incl. FM radio (3X 7607, 7488, 7711) */
+#define TUNER_TEMIC_4039FR5_NTSC	21	/* incl. FM radio (3X 7246, 7578, 7732) */
+#define TUNER_TEMIC_4046FM5		22	/* you must actively select B/G, D/K, I, L, L` !  (3X 7804, 7806, 8103, 8104) */
 #define TUNER_PHILIPS_PAL_DK		23
 
-#define TUNER_PHILIPS_FQ1216ME		24  /* you must actively select B/G/D/K, I, L, L` */
-#define TUNER_LG_PAL_I_FM	25
-#define TUNER_LG_PAL_I		26
-#define TUNER_LG_NTSC_FM	27
+#define TUNER_PHILIPS_FQ1216ME		24	/* you must actively select B/G/D/K, I, L, L` */
+#define TUNER_LG_PAL_I_FM		25
+#define TUNER_LG_PAL_I			26
+#define TUNER_LG_NTSC_FM		27
 
-#define TUNER_LG_PAL_FM		28
-#define TUNER_LG_PAL		29
-#define TUNER_TEMIC_4009FN5_MULTI_PAL_FM	30  /* B/G, I and D/K autodetected (3X 8155, 8160, 8163)*/
-#define TUNER_SHARP_2U5JF5540_NTSC  31
+#define TUNER_LG_PAL_FM			28
+#define TUNER_LG_PAL			29
+#define TUNER_TEMIC_4009FN5_MULTI_PAL_FM 30	/* B/G, I and D/K autodetected (3X 8155, 8160, 8163) */
+#define TUNER_SHARP_2U5JF5540_NTSC	31
 
-#define TUNER_Samsung_PAL_TCPM9091PD27 32
-#define TUNER_MT2032 33
-#define TUNER_TEMIC_4106FH5 	34	/* 4106 FH5 (3X 7808, 7865)*/
-#define TUNER_TEMIC_4012FY5	35	/* 4012 FY5 (3X 0971, 1099)*/
+#define TUNER_Samsung_PAL_TCPM9091PD27	32
+#define TUNER_MT2032			33
+#define TUNER_TEMIC_4106FH5		34	/* 4106 FH5 (3X 7808, 7865) */
+#define TUNER_TEMIC_4012FY5		35	/* 4012 FY5 (3X 0971, 1099) */
 
-#define TUNER_TEMIC_4136FY5	36	/* 4136 FY5 (3X 7708, 7746)*/
-#define TUNER_LG_PAL_NEW_TAPC   37
-#define TUNER_PHILIPS_FM1216ME_MK3  38
-#define TUNER_LG_NTSC_NEW_TAPC   39
+#define TUNER_TEMIC_4136FY5		36	/* 4136 FY5 (3X 7708, 7746) */
+#define TUNER_LG_PAL_NEW_TAPC		37
+#define TUNER_PHILIPS_FM1216ME_MK3	38
+#define TUNER_LG_NTSC_NEW_TAPC		39
 
-#define TUNER_HITACHI_NTSC       40
-#define TUNER_PHILIPS_PAL_MK     41
-#define TUNER_PHILIPS_ATSC       42
-#define TUNER_PHILIPS_FM1236_MK3 43
+#define TUNER_HITACHI_NTSC		40
+#define TUNER_PHILIPS_PAL_MK		41
+#define TUNER_PHILIPS_ATSC		42
+#define TUNER_PHILIPS_FM1236_MK3	43
 
-#define TUNER_PHILIPS_4IN1       44	/* ATI TV Wonder Pro - Conexant */
+#define TUNER_PHILIPS_4IN1		44	/* ATI TV Wonder Pro - Conexant */
 /* Microtune mergeged with Temic 12/31/1999 partially financed by Alps - these may be similar to Temic */
-#define TUNER_MICROTUNE_4049FM5  45
-#define TUNER_LG_NTSC_TAPE       47
-
-#define TUNER_TNF_8831BGFF       48
-#define TUNER_MICROTUNE_4042FI5  49	/* DViCO FusionHDTV 3 Gold-Q - 4042 FI5 (3X 8147) */
-#define TUNER_TCL_2002N          50
-#define TUNER_PHILIPS_FM1256_IH3   51
-
-#define TUNER_THOMSON_DTT7610    52
-#define TUNER_PHILIPS_FQ1286     53
-#define TUNER_PHILIPS_TDA8290    54
-#define TUNER_LG_PAL_TAPE        55    /* Hauppauge PVR-150 PAL */
-
-#define TUNER_PHILIPS_FQ1216AME_MK4 56 /* Hauppauge PVR-150 PAL */
-#define TUNER_PHILIPS_FQ1236A_MK4   57   /* Hauppauge PVR-500MCE NTSC */
-
-#define TUNER_YMEC_TVF_8531MF 58
-#define TUNER_YMEC_TVF_5533MF 59	/* Pixelview Pro Ultra NTSC */
-#define TUNER_THOMSON_DTT7611 60	/* DViCO FusionHDTV 3 Gold-T */
-#define TUNER_TENA_9533_DI    61
-
-#define TUNER_TEA5767         62	/* Only FM Radio Tuner */
-#define TUNER_PHILIPS_FMD1216ME_MK3 63
-#define TUNER_LG_TDVS_H062F   64	/* DViCO FusionHDTV 5 */
-#define TUNER_YMEC_TVF66T5_B_DFF 65	/* Acorp Y878F */
-
-#define TUNER_LG_NTSC_TALN_MINI 66
+#define TUNER_MICROTUNE_4049FM5 	45
+#define TUNER_MICROTUNE_4042_FI5	46
+#define TUNER_LG_NTSC_TAPE		47
+
+#define TUNER_TNF_8831BGFF		48
+#define TUNER_MICROTUNE_4042FI5		49	/* DViCO FusionHDTV 3 Gold-Q - 4042 FI5 (3X 8147) */
+#define TUNER_TCL_2002N			50
+#define TUNER_PHILIPS_FM1256_IH3	51
+
+#define TUNER_THOMSON_DTT7610		52
+#define TUNER_PHILIPS_FQ1286		53
+#define TUNER_PHILIPS_TDA8290		54
+#define TUNER_LG_PAL_TAPE		55	/* Hauppauge PVR-150 PAL */
+
+#define TUNER_PHILIPS_FQ1216AME_MK4	56	/* Hauppauge PVR-150 PAL */
+#define TUNER_PHILIPS_FQ1236A_MK4	57	/* Hauppauge PVR-500MCE NTSC */
+#define TUNER_YMEC_TVF_8531MF		58
+#define TUNER_YMEC_TVF_5533MF		59	/* Pixelview Pro Ultra NTSC */
+
+#define TUNER_THOMSON_DTT7611		60	/* DViCO FusionHDTV 3 Gold-T */
+#define TUNER_TENA_9533_DI		61
+#define TUNER_TEA5767			62	/* Only FM Radio Tuner */
+#define TUNER_PHILIPS_FMD1216ME_MK3	63
+
+#define TUNER_LG_TDVS_H062F		64	/* DViCO FusionHDTV 5 */
+#define TUNER_YMEC_TVF66T5_B_DFF	65	/* Acorp Y878F */
+#define TUNER_LG_NTSC_TALN_MINI		66
 
 #define NOTUNER 0
 #define PAL     1	/* PAL_BG */
@@ -117,7 +117,7 @@
 #define NTSC    3
 #define SECAM   4
 #define ATSC    5
-#define RADIO	6
+#define RADIO   6
 
 #define NoTuner 0
 #define Philips 1
@@ -163,21 +163,21 @@ enum tuner_mode {
 };
 
 struct tuner_setup {
-	unsigned short		addr;
-	unsigned int		type;
-	unsigned int		mode_mask;
+	unsigned short	addr;
+	unsigned int	type;
+	unsigned int	mode_mask;
 };
 
 struct tuner {
 	/* device */
 	struct i2c_client i2c;
 
-	unsigned int type;            /* chip type */
+	unsigned int type;	/* chip type */
 
-	unsigned int          mode;
-	unsigned int          mode_mask; /* Combination of allowable modes */
+	unsigned int mode;
+	unsigned int mode_mask;	/* Combination of allowable modes */
 
-	unsigned int freq;            /* keep track of the current settings */
+	unsigned int freq;	/* keep track of the current settings */
 	unsigned int audmode;
 	v4l2_std_id  std;
 
@@ -221,7 +221,7 @@ extern int tea5767_autodetection(struct i2c_client *c);
 
 #endif /* __KERNEL__ */
 
-#endif
+#endif /* _TUNER_H */
 
 /*
  * Overrides for Emacs so that we follow Linus's tabbing style.

commit 793cf9e6a54c698e109a599c8b8e303658fcaae6
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Fri Sep 9 13:03:37 2005 -0700

    [PATCH] v4l: common part Updates and tuner additions
    
    - Remove $Id CVS logs for V4L files
    - Included newer cards.
    - Added a new NEC protocol for ir based on pulse distance.
    - Enable ATSC support for DViCO FusionHDTV5 Gold.
    - Added tuner LG NTSC (TALN mini series).
    - Fixed tea5767 autodetection.
    - Resolve more tuner types.
    - Commented debug function removed from mainstream.
    - Remove comments from mainstream. Still on development tree.
    - linux/version dependencies removed.
    - BTSC Lang1 now is set to auto_stereo mode.
    - New tuner standby API.
    - i2c-core.c uses hexadecimal for the i2c address, so it should stay consistent.
    
    Signed-off-by: Uli Luckas <luckas@musoft.de>
    Signed-off-by: Mac Michaels <wmichaels1@earthlink.net>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Hermann Pitton <hermann.pitton@onlinehome.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index eeaa15ddee85..252673bfa592 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -1,5 +1,3 @@
-
-/* $Id: tuner.h,v 1.45 2005/07/28 18:41:21 mchehab Exp $
  *
     tuner.h - definition for different tuners
 
@@ -111,6 +109,8 @@
 #define TUNER_LG_TDVS_H062F   64	/* DViCO FusionHDTV 5 */
 #define TUNER_YMEC_TVF66T5_B_DFF 65	/* Acorp Y878F */
 
+#define TUNER_LG_NTSC_TALN_MINI 66
+
 #define NOTUNER 0
 #define PAL     1	/* PAL_BG */
 #define PAL_I   2
@@ -134,6 +134,7 @@
 #define THOMSON 12
 
 #define TUNER_SET_TYPE_ADDR          _IOW('T',3,int)
+#define TUNER_SET_STANDBY            _IOW('T',4,int)
 #define TDA9887_SET_CONFIG           _IOW('t',5,int)
 
 /* tv card specific */
@@ -153,9 +154,6 @@
 
 #ifdef __KERNEL__
 
-#define I2C_ADDR_TDA8290        0x4b
-#define I2C_ADDR_TDA8275        0x61
-
 enum tuner_mode {
 	T_UNINITIALIZED = 0,
 	T_RADIO		= 1 << V4L2_TUNER_RADIO,
@@ -198,6 +196,7 @@ struct tuner {
 	void (*radio_freq)(struct i2c_client *c, unsigned int freq);
 	int  (*has_signal)(struct i2c_client *c);
 	int  (*is_stereo)(struct i2c_client *c);
+	void (*standby)(struct i2c_client *c);
 };
 
 extern unsigned int tuner_debug;
@@ -209,12 +208,16 @@ extern int tea5767_tuner_init(struct i2c_client *c);
 extern int default_tuner_init(struct i2c_client *c);
 extern int tea5767_autodetection(struct i2c_client *c);
 
-#define tuner_warn(fmt, arg...) \
-	dev_printk(KERN_WARNING , &t->i2c.dev , fmt , ## arg)
-#define tuner_info(fmt, arg...) \
-	dev_printk(KERN_INFO , &t->i2c.dev , fmt , ## arg)
-#define tuner_dbg(fmt, arg...) \
-	if (tuner_debug) dev_printk(KERN_DEBUG , &t->i2c.dev , fmt , ## arg)
+#define tuner_warn(fmt, arg...) do {\
+	printk(KERN_WARNING "%s %d-%04x: " fmt, t->i2c.driver->name, \
+                        t->i2c.adapter->nr, t->i2c.addr , ##arg); } while (0)
+#define tuner_info(fmt, arg...) do {\
+	printk(KERN_INFO "%s %d-%04x: " fmt, t->i2c.driver->name, \
+                        t->i2c.adapter->nr, t->i2c.addr , ##arg); } while (0)
+#define tuner_dbg(fmt, arg...) do {\
+	if (tuner_debug) \
+                printk(KERN_DEBUG "%s %d-%04x: " fmt, t->i2c.driver->name, \
+                        t->i2c.adapter->nr, t->i2c.addr , ##arg); } while (0)
 
 #endif /* __KERNEL__ */
 

commit fd3113e84e188781aa2935fbc4351d64ccdd171b
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Sun Jul 31 22:34:43 2005 -0700

    [PATCH] V4L: Miscellaneous fixes
    
    - Fixed some bttv card numbers.
    
    - BTTV and SAA7134 version numbers incremented to reflect changes.
    
    - pci_dma_supported() is called after pci_set_dma_mask() which
      already did check that for us. This patch removes the unneeded call to
      pci_dma_supported() at bttv-driver.c
    
    - Ensure a sufficient I2C bus idle time between 2 messages for
      saa7134-i2c.c
    
    - It is important to write at first to MO_GP3_IO for cx88-tvaudio.c
    
    - Use try_to_freeze() instead of refrigerator at msp3400.c
    
    - Recognizing the MFPE05-2 Tuner at tveeprom.c
    
    - Add new parameter to help identify radio chipsets at tuner module:
      show_i2c=1 will show 16 reading bytes from detected tuners.
    
    - BTTV does generate some Unimplemented IOCTL log at tuner module:
      0x40046d11(dir=1,tp=0x6d,nr=17,sz=4) means that it is sending
      MSP3400 calls to non-msp3400 tuners. Warning eliminated.
      VIDIOSAUDIO is also called, so debug messages updated. It is still
      requiring IOCTL implementation.
    
    - Added two more tuners.
    
    - Add support for the SVideo input on the GDI Black Gold.
    
    Signed-off-by: Peter Missel <peter.missel@onlinehome.de>
    Signed-off-by: Graham Bevan <graham.bevan@ntlworld.com>
    Signed-off-by: Torsten Seeboth <Torsten.Seeboth@t-online.de>
    Signed-off-by: Hartmut Hackmann <hartmut.hackmann@t.online.de>
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index d8c0a5563289..eeaa15ddee85 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -1,5 +1,5 @@
 
-/* $Id: tuner.h,v 1.42 2005/07/06 09:42:19 mchehab Exp $
+/* $Id: tuner.h,v 1.45 2005/07/28 18:41:21 mchehab Exp $
  *
     tuner.h - definition for different tuners
 
@@ -108,6 +108,8 @@
 
 #define TUNER_TEA5767         62	/* Only FM Radio Tuner */
 #define TUNER_PHILIPS_FMD1216ME_MK3 63
+#define TUNER_LG_TDVS_H062F   64	/* DViCO FusionHDTV 5 */
+#define TUNER_YMEC_TVF66T5_B_DFF 65	/* Acorp Y878F */
 
 #define NOTUNER 0
 #define PAL     1	/* PAL_BG */

commit f7ce3cc67052de63a29bad90110640b687d12058
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Tue Jul 12 13:58:55 2005 -0700

    [PATCH] v4l: I2C Tuner
    
    - Fixed a trouble on tuner-core that generates erros on computers with more
      than one TV card.
    - Rename tuner structures fields.
    - Tail spaces removed.
    - I2C cleanups and converged to a basic reference structure.
    - Removed unused structures.
    - Fix setting frequency on tda8290.
    - Added code for TEA5767 autodetection.
    - Standby mode support implemented. It is used to disable
      a non used tuner. Currenlty implemented on tea5767.
    - New macro: set_type disables other tuner when changing mode.
    - Some cleanups.
    - Use 50 kHz step when tunning radio for most tuners to improve precision.
    
    Signed-off-by: Fabien Perrot <perrot1983@yahoo.fr>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-By: Nickolay V. Shmyrev <nshmyrev@yandex.ru>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 4794c5632360..d8c0a5563289 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -1,5 +1,5 @@
 
-/* $Id: tuner.h,v 1.33 2005/06/21 14:58:08 mkrufky Exp $
+/* $Id: tuner.h,v 1.42 2005/07/06 09:42:19 mchehab Exp $
  *
     tuner.h - definition for different tuners
 
@@ -26,8 +26,6 @@
 
 #include <linux/videodev2.h>
 
-#include "id.h"
-
 #define ADDR_UNSET (255)
 
 #define TUNER_TEMIC_PAL     0        /* 4002 FH5 (3X 7756, 9483) */
@@ -111,8 +109,6 @@
 #define TUNER_TEA5767         62	/* Only FM Radio Tuner */
 #define TUNER_PHILIPS_FMD1216ME_MK3 63
 
-#define TEA5767_TUNER_NAME "Philips TEA5767HN FM Radio"
-
 #define NOTUNER 0
 #define PAL     1	/* PAL_BG */
 #define PAL_I   2
@@ -135,19 +131,8 @@
 #define TCL     11
 #define THOMSON 12
 
-enum v4l_radio_tuner {
-        TEA5767_LOW_LO_32768    = 0,
-        TEA5767_HIGH_LO_32768   = 1,
-        TEA5767_LOW_LO_13MHz    = 2,
-        TEA5767_HIGH_LO_13MHz   = 3,
-};
-
-
-#define TUNER_SET_TYPE               _IOW('t',1,int)    /* set tuner type */
-#define TUNER_SET_TVFREQ             _IOW('t',2,int)    /* set tv freq */
-#define TUNER_SET_TYPE_ADDR          _IOW('T',3,int)	/* set tuner type and I2C addr */
-
-#define  TDA9887_SET_CONFIG          _IOW('t',5,int)
+#define TUNER_SET_TYPE_ADDR          _IOW('T',3,int)
+#define TDA9887_SET_CONFIG           _IOW('t',5,int)
 
 /* tv card specific */
 # define TDA9887_PRESENT             (1<<0)
@@ -169,25 +154,34 @@ enum v4l_radio_tuner {
 #define I2C_ADDR_TDA8290        0x4b
 #define I2C_ADDR_TDA8275        0x61
 
-struct tuner_addr {
-	enum v4l2_tuner_type	v4l2_tuner;
-	unsigned int		type;
+enum tuner_mode {
+	T_UNINITIALIZED = 0,
+	T_RADIO		= 1 << V4L2_TUNER_RADIO,
+	T_ANALOG_TV     = 1 << V4L2_TUNER_ANALOG_TV,
+	T_DIGITAL_TV    = 1 << V4L2_TUNER_DIGITAL_TV,
+	T_STANDBY	= 1 << 31
+};
+
+struct tuner_setup {
 	unsigned short		addr;
+	unsigned int		type;
+	unsigned int		mode_mask;
 };
 
 struct tuner {
 	/* device */
 	struct i2c_client i2c;
 
-	/* state + config */
-	unsigned int initialized;
 	unsigned int type;            /* chip type */
+
+	unsigned int          mode;
+	unsigned int          mode_mask; /* Combination of allowable modes */
+
 	unsigned int freq;            /* keep track of the current settings */
+	unsigned int audmode;
 	v4l2_std_id  std;
-	int          using_v4l2;
 
-	enum v4l2_tuner_type mode;
-	unsigned int input;
+	int          using_v4l2;
 
 	/* used by MT2032 */
 	unsigned int xogc;
@@ -197,15 +191,11 @@ struct tuner {
 	unsigned char i2c_easy_mode[2];
 	unsigned char i2c_set_freq[8];
 
-	/* used to keep track of audmode */
-	unsigned int audmode;
-
 	/* function ptrs */
 	void (*tv_freq)(struct i2c_client *c, unsigned int freq);
 	void (*radio_freq)(struct i2c_client *c, unsigned int freq);
 	int  (*has_signal)(struct i2c_client *c);
 	int  (*is_stereo)(struct i2c_client *c);
-	int  (*set_tuner)(struct i2c_client *c, struct v4l2_tuner *v);
 };
 
 extern unsigned int tuner_debug;
@@ -215,6 +205,7 @@ extern int microtune_init(struct i2c_client *c);
 extern int tda8290_init(struct i2c_client *c);
 extern int tea5767_tuner_init(struct i2c_client *c);
 extern int default_tuner_init(struct i2c_client *c);
+extern int tea5767_autodetection(struct i2c_client *c);
 
 #define tuner_warn(fmt, arg...) \
 	dev_printk(KERN_WARNING , &t->i2c.dev , fmt , ## arg)

commit 586b0cab2516640fec4dffc3049c4d8bca188f89
Author: Mauro Carvalho Chehab <maurochehab@gmail.com>
Date:   Tue Jun 28 20:45:21 2005 -0700

    [PATCH] v4l: tuner improvements
    
    *tuner-core.c:
    - some tuner_info msgs will be generated only if insmod opt
            tuner_debug enabled.
    - Implemented tuner-core support for VIDIO_S_TUNER to allow
            changing mono/stereo mode
    - Remove unneeded config options.
    - I2C_CLIENT_MULTI option removed.
    - support for Philips FMD12ME hybrid tuner
    - allow to initialize with another tuner
    - Move PHILIPS_FMD initialization code to set_type function,
    
    * tda8290:
    
    - Fix dumb error in tda8290 tunning.
    - Radio tuner uses high-precision step instead of 62.5 KHz.
    
    *tea5767.c:
    - tuner_info msgs will be generated only if insmod tuner option
            tuner_debug enabled.
    - some cleanups for better reading.
    - Radio tuner uses high-precision step instead of 62.5 KHz.
    - Changing radio mode stereo/mono for tea5767 working.
    
    *tuner-simple.c:
    - TNF9533-D/IF UHF fixup.
    - Radio tuners now uses high-precision step instead of 62.5 KHz.
    
    *mt20xx.c:
            - Radio tuner uses high-precision step instead of 62.5 KHz.
    
    *tda9887.c:
            - tab and blank spaces corrections.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
    Signed-off-by: Nickolay V Shmyrev <nshmyrev@yandex.ru>
    Signed-off-by: Hartmut Hackmann <hartmut.hackmann@t-online.de>
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 2dd8310901e8..4794c5632360 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -1,5 +1,6 @@
 
-/*
+/* $Id: tuner.h,v 1.33 2005/06/21 14:58:08 mkrufky Exp $
+ *
     tuner.h - definition for different tuners
 
     Copyright (C) 1997 Markus Schroeder (schroedm@uni-duesseldorf.de)
@@ -23,6 +24,8 @@
 #ifndef _TUNER_H
 #define _TUNER_H
 
+#include <linux/videodev2.h>
+
 #include "id.h"
 
 #define ADDR_UNSET (255)
@@ -88,7 +91,7 @@
 #define TUNER_LG_NTSC_TAPE       47
 
 #define TUNER_TNF_8831BGFF       48
-#define TUNER_MICROTUNE_4042FI5  49	/* FusionHDTV 3 Gold - 4042 FI5 (3X 8147) */
+#define TUNER_MICROTUNE_4042FI5  49	/* DViCO FusionHDTV 3 Gold-Q - 4042 FI5 (3X 8147) */
 #define TUNER_TCL_2002N          50
 #define TUNER_PHILIPS_FM1256_IH3   51
 
@@ -98,18 +101,18 @@
 #define TUNER_LG_PAL_TAPE        55    /* Hauppauge PVR-150 PAL */
 
 #define TUNER_PHILIPS_FQ1216AME_MK4 56 /* Hauppauge PVR-150 PAL */
-#define TUNER_PHILIPS_FQ1236A_MK4 57   /* Hauppauge PVR-500MCE NTSC */
+#define TUNER_PHILIPS_FQ1236A_MK4   57   /* Hauppauge PVR-500MCE NTSC */
 
 #define TUNER_YMEC_TVF_8531MF 58
 #define TUNER_YMEC_TVF_5533MF 59	/* Pixelview Pro Ultra NTSC */
-#define TUNER_THOMSON_DTT7611 60
+#define TUNER_THOMSON_DTT7611 60	/* DViCO FusionHDTV 3 Gold-T */
 #define TUNER_TENA_9533_DI    61
+
 #define TUNER_TEA5767         62	/* Only FM Radio Tuner */
+#define TUNER_PHILIPS_FMD1216ME_MK3 63
 
 #define TEA5767_TUNER_NAME "Philips TEA5767HN FM Radio"
 
-#define TUNER_THOMSON_DTT7611    60
-
 #define NOTUNER 0
 #define PAL     1	/* PAL_BG */
 #define PAL_I   2
@@ -194,11 +197,15 @@ struct tuner {
 	unsigned char i2c_easy_mode[2];
 	unsigned char i2c_set_freq[8];
 
+	/* used to keep track of audmode */
+	unsigned int audmode;
+
 	/* function ptrs */
 	void (*tv_freq)(struct i2c_client *c, unsigned int freq);
 	void (*radio_freq)(struct i2c_client *c, unsigned int freq);
 	int  (*has_signal)(struct i2c_client *c);
 	int  (*is_stereo)(struct i2c_client *c);
+	int  (*set_tuner)(struct i2c_client *c, struct v4l2_tuner *v);
 };
 
 extern unsigned int tuner_debug;
@@ -206,6 +213,7 @@ extern unsigned const int tuner_count;
 
 extern int microtune_init(struct i2c_client *c);
 extern int tda8290_init(struct i2c_client *c);
+extern int tea5767_tuner_init(struct i2c_client *c);
 extern int default_tuner_init(struct i2c_client *c);
 
 #define tuner_warn(fmt, arg...) \

commit 56fc08ca375491b965cb76fad65bfb98973e80d8
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Thu Jun 23 22:05:07 2005 -0700

    [PATCH] v4l: update for tuner cards and some V4L chips
    
    Tuner improvements and additions.  TEA5767 FM tuner added.  Several small
    fixes.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Nickolay V Shmyrev <nshmyrev@yandex.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index cb75f4809c4d..2dd8310901e8 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -25,6 +25,8 @@
 
 #include "id.h"
 
+#define ADDR_UNSET (255)
+
 #define TUNER_TEMIC_PAL     0        /* 4002 FH5 (3X 7756, 9483) */
 #define TUNER_PHILIPS_PAL_I 1
 #define TUNER_PHILIPS_NTSC  2
@@ -100,6 +102,11 @@
 
 #define TUNER_YMEC_TVF_8531MF 58
 #define TUNER_YMEC_TVF_5533MF 59	/* Pixelview Pro Ultra NTSC */
+#define TUNER_THOMSON_DTT7611 60
+#define TUNER_TENA_9533_DI    61
+#define TUNER_TEA5767         62	/* Only FM Radio Tuner */
+
+#define TEA5767_TUNER_NAME "Philips TEA5767HN FM Radio"
 
 #define TUNER_THOMSON_DTT7611    60
 
@@ -109,6 +116,7 @@
 #define NTSC    3
 #define SECAM   4
 #define ATSC    5
+#define RADIO	6
 
 #define NoTuner 0
 #define Philips 1
@@ -124,9 +132,17 @@
 #define TCL     11
 #define THOMSON 12
 
+enum v4l_radio_tuner {
+        TEA5767_LOW_LO_32768    = 0,
+        TEA5767_HIGH_LO_32768   = 1,
+        TEA5767_LOW_LO_13MHz    = 2,
+        TEA5767_HIGH_LO_13MHz   = 3,
+};
+
+
 #define TUNER_SET_TYPE               _IOW('t',1,int)    /* set tuner type */
 #define TUNER_SET_TVFREQ             _IOW('t',2,int)    /* set tv freq */
-#define TUNER_SET_ADDR               _IOW('T',3,int)	/* Chooses tuner I2C address */
+#define TUNER_SET_TYPE_ADDR          _IOW('T',3,int)	/* set tuner type and I2C addr */
 
 #define  TDA9887_SET_CONFIG          _IOW('t',5,int)
 
@@ -151,8 +167,9 @@
 #define I2C_ADDR_TDA8275        0x61
 
 struct tuner_addr {
-	enum v4l2_tuner_type type;
-	unsigned short addr;
+	enum v4l2_tuner_type	v4l2_tuner;
+	unsigned int		type;
+	unsigned short		addr;
 };
 
 struct tuner {

commit 3c1d0185db6a44b6304c404f4da1a1a98746ca46
Author: Michael Krufky <mkrufky@m1k.net>
Date:   Thu Jun 23 22:04:56 2005 -0700

    [PATCH] v4l: support tuner for Thomson DDT 7611 (ATSC/NTSC)
    
    Add support for tuner#60: Thomson DDT 7611 (ATSC/NTSC) Change tuner in
    card#28 (DViCO FusionHDTV3 Gold-T) from tuner=52 (Tuner Thomson DDT 7610)
    to tuner=60 (Tuner Thomson DDT 7611)
    
    Signed-off-by: Michael Krufky <mkrufky@m1k.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 6d29d8db0c83..cb75f4809c4d 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -101,6 +101,8 @@
 #define TUNER_YMEC_TVF_8531MF 58
 #define TUNER_YMEC_TVF_5533MF 59	/* Pixelview Pro Ultra NTSC */
 
+#define TUNER_THOMSON_DTT7611    60
+
 #define NOTUNER 0
 #define PAL     1	/* PAL_BG */
 #define PAL_I   2

commit 391cd727eac2e10be7685efd739a3ea9de87393c
Author: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
Date:   Thu Jun 23 22:02:43 2005 -0700

    [PATCH] tuner-core.c improvments and Ymec Tvision TVF8533MF support
    
    tuner-core.c, tuner.h:
    
    - tuner-core changed to support multiple I2C devices used on some
      adapters;
    
    - Kconfig now has an option (CONFIG_TUNER_MULTI_I2C) to enable this new
      behavor;
    
    - By default, even enabling CONFIG_TUNER_MULTI_I2C, tuner-core emulates
      the old behavor, using first I2C device for both FM and TV;
    
    - There is a new i2c command (TUNER_SET_ADDR) to allow tuner clients to
      select I2C address for FM or TV tuner;
    
    - Tuner I2C dettach now generates a warning on syslog if failed.
    
    tuner-simple.c:
    
    - TVision TVF-8531MF and TVF-5533 MF tuner included.  It uses, by
      default, I2C on 0xC2 address for TV and on 0xC0 for Radio.  Both TV and
      FM Radio mode are working.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@brturbo.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

diff --git a/include/media/tuner.h b/include/media/tuner.h
index 156a9c51ffec..6d29d8db0c83 100644
--- a/include/media/tuner.h
+++ b/include/media/tuner.h
@@ -98,6 +98,9 @@
 #define TUNER_PHILIPS_FQ1216AME_MK4 56 /* Hauppauge PVR-150 PAL */
 #define TUNER_PHILIPS_FQ1236A_MK4 57   /* Hauppauge PVR-500MCE NTSC */
 
+#define TUNER_YMEC_TVF_8531MF 58
+#define TUNER_YMEC_TVF_5533MF 59	/* Pixelview Pro Ultra NTSC */
+
 #define NOTUNER 0
 #define PAL     1	/* PAL_BG */
 #define PAL_I   2
@@ -121,8 +124,10 @@
 
 #define TUNER_SET_TYPE               _IOW('t',1,int)    /* set tuner type */
 #define TUNER_SET_TVFREQ             _IOW('t',2,int)    /* set tv freq */
+#define TUNER_SET_ADDR               _IOW('T',3,int)	/* Chooses tuner I2C address */
 
 #define  TDA9887_SET_CONFIG          _IOW('t',5,int)
+
 /* tv card specific */
 # define TDA9887_PRESENT             (1<<0)
 # define TDA9887_PORT1_INACTIVE      (1<<1)
@@ -143,6 +148,11 @@
 #define I2C_ADDR_TDA8290        0x4b
 #define I2C_ADDR_TDA8275        0x61
 
+struct tuner_addr {
+	enum v4l2_tuner_type type;
+	unsigned short addr;
+};
+
 struct tuner {
 	/* device */
 	struct i2c_client i2c;

commit 1da177e4c3f41524e886b7f1b8a0c1fc7321cac2
Author: Linus Torvalds <torvalds@ppc970.osdl.org>
Date:   Sat Apr 16 15:20:36 2005 -0700

    Linux-2.6.12-rc2
    
    Initial git repository build. I'm not bothering with the full history,
    even though we have it. We can create a separate "historical" git
    archive of that later if we want to, and in the meantime it's about
    3.2GB when imported into git - space that would just make the early
    git days unnecessarily complicated, when we don't have a lot of good
    infrastructure for it.
    
    Let it rip!

diff --git a/include/media/tuner.h b/include/media/tuner.h
new file mode 100644
index 000000000000..156a9c51ffec
--- /dev/null
+++ b/include/media/tuner.h
@@ -0,0 +1,199 @@
+
+/*
+    tuner.h - definition for different tuners
+
+    Copyright (C) 1997 Markus Schroeder (schroedm@uni-duesseldorf.de)
+    minor modifications by Ralph Metzler (rjkm@thp.uni-koeln.de)
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
+*/
+
+#ifndef _TUNER_H
+#define _TUNER_H
+
+#include "id.h"
+
+#define TUNER_TEMIC_PAL     0        /* 4002 FH5 (3X 7756, 9483) */
+#define TUNER_PHILIPS_PAL_I 1
+#define TUNER_PHILIPS_NTSC  2
+#define TUNER_PHILIPS_SECAM 3		/* you must actively select B/G, L, L` */
+
+#define TUNER_ABSENT        4
+#define TUNER_PHILIPS_PAL   5
+#define TUNER_TEMIC_NTSC    6        /* 4032 FY5 (3X 7004, 9498, 9789)  */
+#define TUNER_TEMIC_PAL_I   7        /* 4062 FY5 (3X 8501, 9957)        */
+
+#define TUNER_TEMIC_4036FY5_NTSC 8   /* 4036 FY5 (3X 1223, 1981, 7686)  */
+#define TUNER_ALPS_TSBH1_NTSC 	 9
+#define TUNER_ALPS_TSBE1_PAL 	10
+#define TUNER_ALPS_TSBB5_PAL_I 	11
+
+#define TUNER_ALPS_TSBE5_PAL 	12
+#define TUNER_ALPS_TSBC5_PAL 	13
+#define TUNER_TEMIC_4006FH5_PAL	14   /* 4006 FH5 (3X 9500, 9501, 7291)     */
+#define TUNER_ALPS_TSHC6_NTSC 	15
+
+#define TUNER_TEMIC_PAL_DK	16   /* 4016 FY5 (3X 1392, 1393)     */
+#define TUNER_PHILIPS_NTSC_M	17
+#define TUNER_TEMIC_4066FY5_PAL_I       18  /* 4066 FY5 (3X 7032, 7035) */
+#define TUNER_TEMIC_4006FN5_MULTI_PAL   19  /* B/G, I and D/K autodetected (3X 7595, 7606, 7657)*/
+
+#define TUNER_TEMIC_4009FR5_PAL         20  /* incl. FM radio (3X 7607, 7488, 7711)*/
+#define TUNER_TEMIC_4039FR5_NTSC        21  /* incl. FM radio (3X 7246, 7578, 7732)*/
+#define TUNER_TEMIC_4046FM5             22  /* you must actively select B/G, D/K, I, L, L` !  (3X 7804, 7806, 8103, 8104)*/
+#define TUNER_PHILIPS_PAL_DK		23
+
+#define TUNER_PHILIPS_FQ1216ME		24  /* you must actively select B/G/D/K, I, L, L` */
+#define TUNER_LG_PAL_I_FM	25
+#define TUNER_LG_PAL_I		26
+#define TUNER_LG_NTSC_FM	27
+
+#define TUNER_LG_PAL_FM		28
+#define TUNER_LG_PAL		29
+#define TUNER_TEMIC_4009FN5_MULTI_PAL_FM	30  /* B/G, I and D/K autodetected (3X 8155, 8160, 8163)*/
+#define TUNER_SHARP_2U5JF5540_NTSC  31
+
+#define TUNER_Samsung_PAL_TCPM9091PD27 32
+#define TUNER_MT2032 33
+#define TUNER_TEMIC_4106FH5 	34	/* 4106 FH5 (3X 7808, 7865)*/
+#define TUNER_TEMIC_4012FY5	35	/* 4012 FY5 (3X 0971, 1099)*/
+
+#define TUNER_TEMIC_4136FY5	36	/* 4136 FY5 (3X 7708, 7746)*/
+#define TUNER_LG_PAL_NEW_TAPC   37
+#define TUNER_PHILIPS_FM1216ME_MK3  38
+#define TUNER_LG_NTSC_NEW_TAPC   39
+
+#define TUNER_HITACHI_NTSC       40
+#define TUNER_PHILIPS_PAL_MK     41
+#define TUNER_PHILIPS_ATSC       42
+#define TUNER_PHILIPS_FM1236_MK3 43
+
+#define TUNER_PHILIPS_4IN1       44	/* ATI TV Wonder Pro - Conexant */
+/* Microtune mergeged with Temic 12/31/1999 partially financed by Alps - these may be similar to Temic */
+#define TUNER_MICROTUNE_4049FM5  45
+#define TUNER_LG_NTSC_TAPE       47
+
+#define TUNER_TNF_8831BGFF       48
+#define TUNER_MICROTUNE_4042FI5  49	/* FusionHDTV 3 Gold - 4042 FI5 (3X 8147) */
+#define TUNER_TCL_2002N          50
+#define TUNER_PHILIPS_FM1256_IH3   51
+
+#define TUNER_THOMSON_DTT7610    52
+#define TUNER_PHILIPS_FQ1286     53
+#define TUNER_PHILIPS_TDA8290    54
+#define TUNER_LG_PAL_TAPE        55    /* Hauppauge PVR-150 PAL */
+
+#define TUNER_PHILIPS_FQ1216AME_MK4 56 /* Hauppauge PVR-150 PAL */
+#define TUNER_PHILIPS_FQ1236A_MK4 57   /* Hauppauge PVR-500MCE NTSC */
+
+#define NOTUNER 0
+#define PAL     1	/* PAL_BG */
+#define PAL_I   2
+#define NTSC    3
+#define SECAM   4
+#define ATSC    5
+
+#define NoTuner 0
+#define Philips 1
+#define TEMIC   2
+#define Sony    3
+#define Alps    4
+#define LGINNOTEK 5
+#define SHARP   6
+#define Samsung 7
+#define Microtune 8
+#define HITACHI 9
+#define Panasonic 10
+#define TCL     11
+#define THOMSON 12
+
+#define TUNER_SET_TYPE               _IOW('t',1,int)    /* set tuner type */
+#define TUNER_SET_TVFREQ             _IOW('t',2,int)    /* set tv freq */
+
+#define  TDA9887_SET_CONFIG          _IOW('t',5,int)
+/* tv card specific */
+# define TDA9887_PRESENT             (1<<0)
+# define TDA9887_PORT1_INACTIVE      (1<<1)
+# define TDA9887_PORT2_INACTIVE      (1<<2)
+# define TDA9887_QSS                 (1<<3)
+# define TDA9887_INTERCARRIER        (1<<4)
+# define TDA9887_PORT1_ACTIVE        (1<<5)
+# define TDA9887_PORT2_ACTIVE        (1<<6)
+/* config options */
+# define TDA9887_DEEMPHASIS_MASK     (3<<16)
+# define TDA9887_DEEMPHASIS_NONE     (1<<16)
+# define TDA9887_DEEMPHASIS_50       (2<<16)
+# define TDA9887_DEEMPHASIS_75       (3<<16)
+# define TDA9887_AUTOMUTE            (1<<18)
+
+#ifdef __KERNEL__
+
+#define I2C_ADDR_TDA8290        0x4b
+#define I2C_ADDR_TDA8275        0x61
+
+struct tuner {
+	/* device */
+	struct i2c_client i2c;
+
+	/* state + config */
+	unsigned int initialized;
+	unsigned int type;            /* chip type */
+	unsigned int freq;            /* keep track of the current settings */
+	v4l2_std_id  std;
+	int          using_v4l2;
+
+	enum v4l2_tuner_type mode;
+	unsigned int input;
+
+	/* used by MT2032 */
+	unsigned int xogc;
+	unsigned int radio_if2;
+
+	/* used by tda8290 */
+	unsigned char i2c_easy_mode[2];
+	unsigned char i2c_set_freq[8];
+
+	/* function ptrs */
+	void (*tv_freq)(struct i2c_client *c, unsigned int freq);
+	void (*radio_freq)(struct i2c_client *c, unsigned int freq);
+	int  (*has_signal)(struct i2c_client *c);
+	int  (*is_stereo)(struct i2c_client *c);
+};
+
+extern unsigned int tuner_debug;
+extern unsigned const int tuner_count;
+
+extern int microtune_init(struct i2c_client *c);
+extern int tda8290_init(struct i2c_client *c);
+extern int default_tuner_init(struct i2c_client *c);
+
+#define tuner_warn(fmt, arg...) \
+	dev_printk(KERN_WARNING , &t->i2c.dev , fmt , ## arg)
+#define tuner_info(fmt, arg...) \
+	dev_printk(KERN_INFO , &t->i2c.dev , fmt , ## arg)
+#define tuner_dbg(fmt, arg...) \
+	if (tuner_debug) dev_printk(KERN_DEBUG , &t->i2c.dev , fmt , ## arg)
+
+#endif /* __KERNEL__ */
+
+#endif
+
+/*
+ * Overrides for Emacs so that we follow Linus's tabbing style.
+ * ---------------------------------------------------------------------------
+ * Local variables:
+ * c-basic-offset: 8
+ * End:
+ */
