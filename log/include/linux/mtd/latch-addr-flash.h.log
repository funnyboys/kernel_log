commit dcfb81d61da1367e52f7f7e3ceff0d0044c3c7ee
Author: David Griego <dgriego@mvista.com>
Date:   Tue Nov 30 15:32:05 2010 +0530

    mtd: NOR flash driver for OMAP-L137/AM17x
    
    OMAP-L137/AM17x has limited number of dedicated EMIFA
    address pins, enough to interface directly to an SDRAM.
    If a device such as an asynchronous flash needs to be
    attached to the EMIFA, then either GPIO pins or a chip
    select may be used to control the flash device's upper
    address lines.
    
    This patch adds support for the NOR flash on the OMAP-L137/
    AM17x user interface daughter board using the latch-addr-flash
    MTD mapping driver which allows flashes to be partially
    physically addressed. The upper address lines are set by
    a board specific code which is a separate patch.
    
    Signed-off-by: David Griego <dgriego@mvista.com>
    Signed-off-by: Aleksey Makarov <amakarov@ru.mvista.com>
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: Savinay Dharmappa <savinay.dharmappa@ti.com>
    Signed-off-by: Artem Bityutskiy <Artem.Bityutskiy@nokia.com>
    Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>

diff --git a/include/linux/mtd/latch-addr-flash.h b/include/linux/mtd/latch-addr-flash.h
new file mode 100644
index 000000000000..e94b8e128074
--- /dev/null
+++ b/include/linux/mtd/latch-addr-flash.h
@@ -0,0 +1,29 @@
+/*
+ * Interface for NOR flash driver whose high address lines are latched
+ *
+ * Copyright Â© 2008 MontaVista Software, Inc. <source@mvista.com>
+ *
+ * This file is licensed under the terms of the GNU General Public License
+ * version 2. This program is licensed "as is" without any warranty of any
+ * kind, whether express or implied.
+ */
+#ifndef __LATCH_ADDR_FLASH__
+#define __LATCH_ADDR_FLASH__
+
+struct map_info;
+struct mtd_partition;
+
+struct latch_addr_flash_data {
+	unsigned int		width;
+	unsigned int		size;
+
+	int			(*init)(void *data, int cs);
+	void			(*done)(void *data);
+	void			(*set_window)(unsigned long offset, void *data);
+	void			*data;
+
+	unsigned int		nr_parts;
+	struct mtd_partition	*parts;
+};
+
+#endif
