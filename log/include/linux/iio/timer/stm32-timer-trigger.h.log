commit af873fcecef567abf8a3468b06dd4e4aab46da6d
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Tue May 28 09:57:21 2019 -0700

    treewide: Replace GPLv2 boilerplate/reference with SPDX - rule 194
    
    Based on 1 normalized pattern(s):
    
      license terms gnu general public license gpl version 2
    
    extracted by the scancode license scanner the SPDX license identifier
    
      GPL-2.0-only
    
    has been chosen to replace the boilerplate/reference in 161 file(s).
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Reviewed-by: Allison Randal <allison@lohutok.net>
    Reviewed-by: Alexios Zavras <alexios.zavras@intel.com>
    Reviewed-by: Steve Winslow <swinslow@gmail.com>
    Reviewed-by: Richard Fontana <rfontana@redhat.com>
    Cc: linux-spdx@vger.kernel.org
    Link: https://lkml.kernel.org/r/20190528170027.447718015@linutronix.de
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/include/linux/iio/timer/stm32-timer-trigger.h b/include/linux/iio/timer/stm32-timer-trigger.h
index cbb7c7ae6c0c..37572e4dc73a 100644
--- a/include/linux/iio/timer/stm32-timer-trigger.h
+++ b/include/linux/iio/timer/stm32-timer-trigger.h
@@ -1,9 +1,8 @@
+/* SPDX-License-Identifier: GPL-2.0-only */
 /*
  * Copyright (C) STMicroelectronics 2016
  *
  * Author: Benjamin Gaignard <benjamin.gaignard@st.com>
- *
- * License terms:  GNU General Public License (GPL), version 2
  */
 
 #ifndef _STM32_TIMER_TRIGGER_H_

commit 20c89b4d1dc4e7cc329d00edcaf7a7aa14278557
Author: Fabrice Gasnier <fabrice.gasnier@st.com>
Date:   Mon Apr 15 11:47:22 2019 +0200

    iio: trigger: stm32-timer: fix build issue when disabled
    
    This fixes a build issue when CONFIG_IIO_STM32_TIMER_TRIGGER isn't set but
    used in stm32-dfsdm-adc driver (e.g. CONFIG_STM32_DFSDM_ADC is set):
    ERROR: "is_stm32_timer_trigger" [drivers/iio/adc/stm32-dfsdm-adc.ko]
    undefined!
    
    There are two possible options to fix this issue:
    - select IIO_STM32_TIMER_TRIGGER along with CONFIG_STM32_DFSDM_ADC.
      This is what's being done currently for CONFIG_STM32_ADC.
    - stub "is_stm32_timer_trigger" function
    
    Choice is made to stub this function as suggested in [1]. This is also
    inspired by similar "is_stm32_lptim_trigger" function (see [2]) in
    include/linux/iio/timer/stm32-lptim-trigger.h
    
    [1]
    https://www.mail-archive.com/linux-kernel@vger.kernel.org/msg1977377.html
    [2] https://lkml.org/lkml/2017/9/10/124
    
    Fixes: 11646e81d775 ("iio: adc: stm32-dfsdm: add support for buffer modes")
    
    Reported-by: Randy Dunlap <rdunlap@infradead.org>
    Fix-suggested-by: Jonathan Cameron <jic23@kernel.org>
    Signed-off-by: Fabrice Gasnier <fabrice.gasnier@st.com>
    Signed-off-by: Jonathan Cameron <Jonathan.Cameron@huawei.com>

diff --git a/include/linux/iio/timer/stm32-timer-trigger.h b/include/linux/iio/timer/stm32-timer-trigger.h
index d68add80ab86..cbb7c7ae6c0c 100644
--- a/include/linux/iio/timer/stm32-timer-trigger.h
+++ b/include/linux/iio/timer/stm32-timer-trigger.h
@@ -73,6 +73,15 @@
 
 #define TIM17_OC1	"tim17_oc1"
 
+#if IS_REACHABLE(CONFIG_IIO_STM32_TIMER_TRIGGER)
 bool is_stm32_timer_trigger(struct iio_trigger *trig);
-
+#else
+static inline bool is_stm32_timer_trigger(struct iio_trigger *trig)
+{
+#if IS_ENABLED(CONFIG_IIO_STM32_TIMER_TRIGGER)
+	pr_warn_once("stm32-timer-trigger not linked in\n");
+#endif
+	return false;
+}
+#endif
 #endif

commit 25892d6eac9cb752af95bcd539ed5e1158eba760
Author: Fabrice Gasnier <fabrice.gasnier@st.com>
Date:   Thu Aug 3 11:14:14 2017 +0200

    iio: trigger: stm32-timer: add output compare triggers
    
    Add output compare trigger sources available on some instances.
    
    Signed-off-by: Fabrice Gasnier <fabrice.gasnier@st.com>
    Signed-off-by: Jonathan Cameron <Jonathan.Cameron@huawei.com>

diff --git a/include/linux/iio/timer/stm32-timer-trigger.h b/include/linux/iio/timer/stm32-timer-trigger.h
index 20f465353a7c..d68add80ab86 100644
--- a/include/linux/iio/timer/stm32-timer-trigger.h
+++ b/include/linux/iio/timer/stm32-timer-trigger.h
@@ -55,12 +55,24 @@
 #define TIM9_CH1	"tim9_ch1"
 #define TIM9_CH2	"tim9_ch2"
 
+#define TIM10_OC1	"tim10_oc1"
+
+#define TIM11_OC1	"tim11_oc1"
+
 #define TIM12_TRGO	"tim12_trgo"
 #define TIM12_CH1	"tim12_ch1"
 #define TIM12_CH2	"tim12_ch2"
 
+#define TIM13_OC1	"tim13_oc1"
+
+#define TIM14_OC1	"tim14_oc1"
+
 #define TIM15_TRGO	"tim15_trgo"
 
+#define TIM16_OC1	"tim16_oc1"
+
+#define TIM17_OC1	"tim17_oc1"
+
 bool is_stm32_timer_trigger(struct iio_trigger *trig);
 
 #endif

commit 45fff14bab00eea97e0f60a2a5ba3eca97bd476a
Author: Fabrice Gasnier <fabrice.gasnier@st.com>
Date:   Thu Aug 3 11:14:13 2017 +0200

    iio: trigger: stm32-timer: add support for STM32H7
    
    Add support for STM32H7 timer triggers:
    - Add new valids_table
    - Introduce compatible, with configuration data
    - Extend up to 15 timers, available on STM32H7
    
    Signed-off-by: Fabrice Gasnier <fabrice.gasnier@st.com>
    Signed-off-by: Jonathan Cameron <Jonathan.Cameron@huawei.com>

diff --git a/include/linux/iio/timer/stm32-timer-trigger.h b/include/linux/iio/timer/stm32-timer-trigger.h
index fa7d786ed99e..20f465353a7c 100644
--- a/include/linux/iio/timer/stm32-timer-trigger.h
+++ b/include/linux/iio/timer/stm32-timer-trigger.h
@@ -59,6 +59,8 @@
 #define TIM12_CH1	"tim12_ch1"
 #define TIM12_CH2	"tim12_ch2"
 
+#define TIM15_TRGO	"tim15_trgo"
+
 bool is_stm32_timer_trigger(struct iio_trigger *trig);
 
 #endif

commit 6fb34812c2a2a4cdcdad4452b9634892812fa97b
Author: Fabrice Gasnier <fabrice.gasnier@st.com>
Date:   Tue May 2 14:33:45 2017 +0200

    iio: stm32 trigger: Add support for TRGO2 triggers
    
    Add support for TRGO2 trigger that can be found on STM32F7.
    Add additional master modes supported by TRGO2.
    Register additional "tim[1/8]_trgo2" triggers for timer1 & timer8.
    Detect TRGO2 timer capability (master mode selection 2).
    
    Signed-off-by: Fabrice Gasnier <fabrice.gasnier@st.com>
    Acked-by: Benjamin Gaignard <benjamin.gaignard@linaro.org>
    Signed-off-by: Jonathan Cameron <jic23@kernel.org>

diff --git a/include/linux/iio/timer/stm32-timer-trigger.h b/include/linux/iio/timer/stm32-timer-trigger.h
index 55535aef2e6c..fa7d786ed99e 100644
--- a/include/linux/iio/timer/stm32-timer-trigger.h
+++ b/include/linux/iio/timer/stm32-timer-trigger.h
@@ -10,6 +10,7 @@
 #define _STM32_TIMER_TRIGGER_H_
 
 #define TIM1_TRGO	"tim1_trgo"
+#define TIM1_TRGO2	"tim1_trgo2"
 #define TIM1_CH1	"tim1_ch1"
 #define TIM1_CH2	"tim1_ch2"
 #define TIM1_CH3	"tim1_ch3"
@@ -44,6 +45,7 @@
 #define TIM7_TRGO	"tim7_trgo"
 
 #define TIM8_TRGO	"tim8_trgo"
+#define TIM8_TRGO2	"tim8_trgo2"
 #define TIM8_CH1	"tim8_ch1"
 #define TIM8_CH2	"tim8_ch2"
 #define TIM8_CH3	"tim8_ch3"

commit 93fbe91b552194af970256ce72934745d01df435
Author: Benjamin Gaignard <benjamin.gaignard@linaro.org>
Date:   Fri Jan 20 10:15:07 2017 +0100

    iio: Add STM32 timer trigger driver
    
    Timers IPs can be used to generate triggers for other IPs like
    DAC or ADC.
    Each trigger may result of timer internals signals like counter enable,
    reset or edge, this configuration could be done through "master_mode"
    device attribute.
    
    Since triggers could be used by DAC or ADC their names are defined
    in include/ nux/iio/timer/stm32-timer-trigger.h and is_stm32_iio_timer_trigger
    function could be used to check if the trigger is valid or not.
    
    "trgo" trigger have a "sampling_frequency" attribute which allow to configure
    timer sampling frequency.
    
    version 8:
    - change kernel version from 4.10 to 4.11 in ABI documentation
    
    version 7:
    - remove all iio_device related code
    - move driver into trigger directory
    
    version 5:
    - simplify tables of triggers
    - only create an IIO device when needed
    
    version 4:
    - get triggers configuration from "reg" in DT
    - add tables of triggers
    - sampling frequency is enable/disable when writing in trigger
      sampling_frequency attribute
    - no more use of interruptions
    
    version 3:
    - change compatible to "st,stm32-timer-trigger"
    - fix attributes access right
    - use string instead of int for master_mode and slave_mode
    - document device attributes in sysfs-bus-iio-timer-stm32
    
    version 2:
    - keep only one compatible
    - use st,input-triggers-names and st,output-triggers-names
      to know which triggers are accepted and/or create by the device
    
    Signed-off-by: Benjamin Gaignard <benjamin.gaignard@st.com>
    Acked-by: Jonathan Cameron <jic23@kernel.org>
    Signed-off-by: Lee Jones <lee.jones@linaro.org>

diff --git a/include/linux/iio/timer/stm32-timer-trigger.h b/include/linux/iio/timer/stm32-timer-trigger.h
new file mode 100644
index 000000000000..55535aef2e6c
--- /dev/null
+++ b/include/linux/iio/timer/stm32-timer-trigger.h
@@ -0,0 +1,62 @@
+/*
+ * Copyright (C) STMicroelectronics 2016
+ *
+ * Author: Benjamin Gaignard <benjamin.gaignard@st.com>
+ *
+ * License terms:  GNU General Public License (GPL), version 2
+ */
+
+#ifndef _STM32_TIMER_TRIGGER_H_
+#define _STM32_TIMER_TRIGGER_H_
+
+#define TIM1_TRGO	"tim1_trgo"
+#define TIM1_CH1	"tim1_ch1"
+#define TIM1_CH2	"tim1_ch2"
+#define TIM1_CH3	"tim1_ch3"
+#define TIM1_CH4	"tim1_ch4"
+
+#define TIM2_TRGO	"tim2_trgo"
+#define TIM2_CH1	"tim2_ch1"
+#define TIM2_CH2	"tim2_ch2"
+#define TIM2_CH3	"tim2_ch3"
+#define TIM2_CH4	"tim2_ch4"
+
+#define TIM3_TRGO	"tim3_trgo"
+#define TIM3_CH1	"tim3_ch1"
+#define TIM3_CH2	"tim3_ch2"
+#define TIM3_CH3	"tim3_ch3"
+#define TIM3_CH4	"tim3_ch4"
+
+#define TIM4_TRGO	"tim4_trgo"
+#define TIM4_CH1	"tim4_ch1"
+#define TIM4_CH2	"tim4_ch2"
+#define TIM4_CH3	"tim4_ch3"
+#define TIM4_CH4	"tim4_ch4"
+
+#define TIM5_TRGO	"tim5_trgo"
+#define TIM5_CH1	"tim5_ch1"
+#define TIM5_CH2	"tim5_ch2"
+#define TIM5_CH3	"tim5_ch3"
+#define TIM5_CH4	"tim5_ch4"
+
+#define TIM6_TRGO	"tim6_trgo"
+
+#define TIM7_TRGO	"tim7_trgo"
+
+#define TIM8_TRGO	"tim8_trgo"
+#define TIM8_CH1	"tim8_ch1"
+#define TIM8_CH2	"tim8_ch2"
+#define TIM8_CH3	"tim8_ch3"
+#define TIM8_CH4	"tim8_ch4"
+
+#define TIM9_TRGO	"tim9_trgo"
+#define TIM9_CH1	"tim9_ch1"
+#define TIM9_CH2	"tim9_ch2"
+
+#define TIM12_TRGO	"tim12_trgo"
+#define TIM12_CH1	"tim12_ch1"
+#define TIM12_CH2	"tim12_ch2"
+
+bool is_stm32_timer_trigger(struct iio_trigger *trig);
+
+#endif
