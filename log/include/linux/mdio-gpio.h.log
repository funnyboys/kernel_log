commit fb78a95e22123da57cb79b98bdc62eb33965ca8a
Author: Andrew Lunn <andrew@lunn.ch>
Date:   Thu Apr 19 01:02:58 2018 +0200

    net: phy: mdio-gpio: Add #defines for the GPIO index's
    
    The GPIOs are described in device tree using a list, without names.
    Add defines to indicate what each index in the list means. These
    defines should also be used by platform devices passing GPIOs via a
    GPIO lookup table.
    
    Signed-off-by: Andrew Lunn <andrew@lunn.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/include/linux/mdio-gpio.h b/include/linux/mdio-gpio.h
new file mode 100644
index 000000000000..cea443a672cb
--- /dev/null
+++ b/include/linux/mdio-gpio.h
@@ -0,0 +1,9 @@
+/* SPDX-License-Identifier: GPL-2.0 */
+#ifndef __LINUX_MDIO_GPIO_H
+#define __LINUX_MDIO_GPIO_H
+
+#define MDIO_GPIO_MDC	0
+#define MDIO_GPIO_MDIO	1
+#define MDIO_GPIO_MDO	2
+
+#endif

commit e2aacd963a06fc558a809ecb62f5833e6c340b28
Author: Vivien Didelot <vivien.didelot@savoirfairelinux.com>
Date:   Tue Oct 20 10:08:59 2015 -0400

    net: mdio-gpio: move platform data header
    
    This header file only contains the platform data structure definition,
    so move it to the include/linux/platform_data/ directory.
    
    Signed-off-by: Vivien Didelot <vivien.didelot@savoirfairelinux.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/include/linux/mdio-gpio.h b/include/linux/mdio-gpio.h
deleted file mode 100644
index 11f00cdabe3d..000000000000
--- a/include/linux/mdio-gpio.h
+++ /dev/null
@@ -1,33 +0,0 @@
-/*
- * MDIO-GPIO bus platform data structures
- *
- * Copyright (C) 2008, Paulius Zaleckas <paulius.zaleckas@teltonika.lt>
- *
- * This file is licensed under the terms of the GNU General Public License
- * version 2. This program is licensed "as is" without any warranty of any
- * kind, whether express or implied.
- */
-
-#ifndef __LINUX_MDIO_GPIO_H
-#define __LINUX_MDIO_GPIO_H
-
-#include <linux/mdio-bitbang.h>
-
-struct mdio_gpio_platform_data {
-	/* GPIO numbers for bus pins */
-	unsigned int mdc;
-	unsigned int mdio;
-	unsigned int mdo;
-
-	bool mdc_active_low;
-	bool mdio_active_low;
-	bool mdo_active_low;
-
-	u32 phy_mask;
-	u32 phy_ignore_ta_mask;
-	int irqs[PHY_MAX_ADDR];
-	/* reset callback */
-	int (*reset)(struct mii_bus *bus);
-};
-
-#endif /* __LINUX_MDIO_GPIO_H */

commit ef7f3a5c7149ad2dbd1d8a71d0aa88a02d1dbcb8
Author: Bert Vermeulen <bert@biot.com>
Date:   Wed May 13 13:35:39 2015 +0200

    mdio-gpio: Propagate mii_bus.phy_ignore_ta_mask
    
    This also changes mii_bus.phy_mask to u32 for consistency.
    
    Signed-off-by: Bert Vermeulen <bert@biot.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/include/linux/mdio-gpio.h b/include/linux/mdio-gpio.h
index 66c30a763b10..11f00cdabe3d 100644
--- a/include/linux/mdio-gpio.h
+++ b/include/linux/mdio-gpio.h
@@ -23,7 +23,8 @@ struct mdio_gpio_platform_data {
 	bool mdio_active_low;
 	bool mdo_active_low;
 
-	unsigned int phy_mask;
+	u32 phy_mask;
+	u32 phy_ignore_ta_mask;
 	int irqs[PHY_MAX_ADDR];
 	/* reset callback */
 	int (*reset)(struct mii_bus *bus);

commit f1d54c47502f42f5c4b89dacbe845ecd87ca002e
Author: Guenter Roeck <linux@roeck-us.net>
Date:   Tue Apr 15 19:16:42 2014 -0700

    net: mdio-gpio: Add support for separate MDI and MDO gpio pins
    
    This is for a system with fixed assignments of input and output pins
    (various variants of Kontron COMe).
    
    Signed-off-by: Guenter Roeck <linux@roeck-us.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/include/linux/mdio-gpio.h b/include/linux/mdio-gpio.h
index 57e57fe6055c..66c30a763b10 100644
--- a/include/linux/mdio-gpio.h
+++ b/include/linux/mdio-gpio.h
@@ -17,9 +17,11 @@ struct mdio_gpio_platform_data {
 	/* GPIO numbers for bus pins */
 	unsigned int mdc;
 	unsigned int mdio;
+	unsigned int mdo;
 
 	bool mdc_active_low;
 	bool mdio_active_low;
+	bool mdo_active_low;
 
 	unsigned int phy_mask;
 	int irqs[PHY_MAX_ADDR];

commit 1d2514818a2c3d94dd250e6027cb928a4e192548
Author: Guenter Roeck <linux@roeck-us.net>
Date:   Tue Apr 15 19:16:41 2014 -0700

    net: mdio-gpio: Add support for active low gpio pins
    
    Some systems using mdio-gpio may use active-low gpio pins
    (eg with inverters or FETs connected to all or some of the
    gpio pins).
    
    Signed-off-by: Guenter Roeck <linux@roeck-us.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/include/linux/mdio-gpio.h b/include/linux/mdio-gpio.h
index 7c9fe3c2be73..57e57fe6055c 100644
--- a/include/linux/mdio-gpio.h
+++ b/include/linux/mdio-gpio.h
@@ -18,6 +18,9 @@ struct mdio_gpio_platform_data {
 	unsigned int mdc;
 	unsigned int mdio;
 
+	bool mdc_active_low;
+	bool mdio_active_low;
+
 	unsigned int phy_mask;
 	int irqs[PHY_MAX_ADDR];
 	/* reset callback */

commit 64882709ef07f3eae29c7afc5aa8b84d12733a72
Author: Srinivas Kandagatla <srinivas.kandagatla@st.com>
Date:   Tue Nov 15 11:54:15 2011 +0000

    mdio-gpio: Add reset functionality to mdio-gpio driver(v2).
    
    This patch adds phy reset functionality to mdio-gpio driver. Now
    mdio_gpio_platform_data has new member as function pointer which can be
    filled at the bsp level for a callback from phy infrastructure. Also the
    mdio-bitbang driver fills-in the reset function of mii_bus structure.
    
    Without this patch the bsp level code has to takecare of the reseting
    PHY's on the bus, which become bit hacky for every bsp and
    phy-infrastructure is ignored aswell.
    
    Signed-off-by: Srinivas Kandagatla <srinivas.kandagatla@st.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/include/linux/mdio-gpio.h b/include/linux/mdio-gpio.h
index e9d3fdfe41d7..7c9fe3c2be73 100644
--- a/include/linux/mdio-gpio.h
+++ b/include/linux/mdio-gpio.h
@@ -20,6 +20,8 @@ struct mdio_gpio_platform_data {
 
 	unsigned int phy_mask;
 	int irqs[PHY_MAX_ADDR];
+	/* reset callback */
+	int (*reset)(struct mii_bus *bus);
 };
 
 #endif /* __LINUX_MDIO_GPIO_H */

commit f004f3ea34209d8b836426b26ade3dc502631b18
Author: Paulius Zaleckas <paulius.zaleckas@teltonika.lt>
Date:   Fri Nov 14 00:24:34 2008 +0000

    phylib: make mdio-gpio work without OF (v4)
    
    make mdio-gpio work with non OpenFirmware gpio implementation.
    
    Aditional changes to mdio-gpio:
    - use gpio_request() and gpio_free()
    - place irq[] array in struct mdio_gpio_info
    - add module description, author and license
    - add note about compiling this driver as module
    - rename mdc and mdio function (were ugly names)
    - change MII to MDIO in bus name
    - add __init __exit to module (un)loading functions
    - probe fails if no phys added to the bus
    - kzalloc bitbang with sizeof(*bitbang)
    
    Changes since v3:
    - keep bus naming "%x" to be compatible with existing drivers.
    
    Changes since v2:
    - more #ifdefs reduction
    - platform driver will be registered on OF platforms also
    - unified platform and OF bus_id to phy%i
    
    Changes since v1:
    - removed NO_IRQ
    - reduced #idefs
    
    Laurent, please test this driver under OF.
    
    Signed-off-by: Paulius Zaleckas <paulius.zaleckas@teltonika.lt>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/include/linux/mdio-gpio.h b/include/linux/mdio-gpio.h
new file mode 100644
index 000000000000..e9d3fdfe41d7
--- /dev/null
+++ b/include/linux/mdio-gpio.h
@@ -0,0 +1,25 @@
+/*
+ * MDIO-GPIO bus platform data structures
+ *
+ * Copyright (C) 2008, Paulius Zaleckas <paulius.zaleckas@teltonika.lt>
+ *
+ * This file is licensed under the terms of the GNU General Public License
+ * version 2. This program is licensed "as is" without any warranty of any
+ * kind, whether express or implied.
+ */
+
+#ifndef __LINUX_MDIO_GPIO_H
+#define __LINUX_MDIO_GPIO_H
+
+#include <linux/mdio-bitbang.h>
+
+struct mdio_gpio_platform_data {
+	/* GPIO numbers for bus pins */
+	unsigned int mdc;
+	unsigned int mdio;
+
+	unsigned int phy_mask;
+	int irqs[PHY_MAX_ADDR];
+};
+
+#endif /* __LINUX_MDIO_GPIO_H */
