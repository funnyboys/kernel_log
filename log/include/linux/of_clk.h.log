commit 4a4472fdc098fb78f52a0848788faf46674a8423
Author: Geert Uytterhoeven <geert+renesas@glider.be>
Date:   Wed Feb 12 10:43:17 2020 +0100

    of: clk: Make of_clk_get_parent_{count,name}() parameter const
    
    of_clk_get_parent_count() and of_clk_get_parent_name() never modify the
    device nodes passed, so they can be const.
    
    Signed-off-by: Geert Uytterhoeven <geert+renesas@glider.be>
    Link: https://lkml.kernel.org/r/20200212094317.1150-1-geert+renesas@glider.be
    Signed-off-by: Stephen Boyd <sboyd@kernel.org>

diff --git a/include/linux/of_clk.h b/include/linux/of_clk.h
index c86fcad23fc2..31b73a0da9db 100644
--- a/include/linux/of_clk.h
+++ b/include/linux/of_clk.h
@@ -11,17 +11,17 @@ struct of_device_id;
 
 #if defined(CONFIG_COMMON_CLK) && defined(CONFIG_OF)
 
-unsigned int of_clk_get_parent_count(struct device_node *np);
-const char *of_clk_get_parent_name(struct device_node *np, int index);
+unsigned int of_clk_get_parent_count(const struct device_node *np);
+const char *of_clk_get_parent_name(const struct device_node *np, int index);
 void of_clk_init(const struct of_device_id *matches);
 
 #else /* !CONFIG_COMMON_CLK || !CONFIG_OF */
 
-static inline unsigned int of_clk_get_parent_count(struct device_node *np)
+static inline unsigned int of_clk_get_parent_count(const struct device_node *np)
 {
 	return 0;
 }
-static inline const char *of_clk_get_parent_name(struct device_node *np,
+static inline const char *of_clk_get_parent_name(const struct device_node *np,
 						 int index)
 {
 	return NULL;

commit 5df867145f8adad9e5cdf9d67db1fbc0f71351e9
Author: Geert Uytterhoeven <geert+renesas@glider.be>
Date:   Wed Feb 5 20:46:49 2020 +0100

    of: clk: Make <linux/of_clk.h> self-contained
    
    Depending on include order:
    
        include/linux/of_clk.h:11:45: warning: ‘struct device_node’ declared inside parameter list will not be visible outside of this definition or declaration
         unsigned int of_clk_get_parent_count(struct device_node *np);
                                                     ^~~~~~~~~~~
        include/linux/of_clk.h:12:43: warning: ‘struct device_node’ declared inside parameter list will not be visible outside of this definition or declaration
         const char *of_clk_get_parent_name(struct device_node *np, int index);
                                                   ^~~~~~~~~~~
        include/linux/of_clk.h:13:31: warning: ‘struct of_device_id’ declared inside parameter list will not be visible outside of this definition or declaration
         void of_clk_init(const struct of_device_id *matches);
                                       ^~~~~~~~~~~~
    
    Fix this by adding forward declarations for struct device_node and
    struct of_device_id.
    
    Signed-off-by: Geert Uytterhoeven <geert+renesas@glider.be>
    Link: https://lkml.kernel.org/r/20200205194649.31309-1-geert+renesas@glider.be
    Signed-off-by: Stephen Boyd <sboyd@kernel.org>

diff --git a/include/linux/of_clk.h b/include/linux/of_clk.h
index b27da9f164cb..c86fcad23fc2 100644
--- a/include/linux/of_clk.h
+++ b/include/linux/of_clk.h
@@ -6,6 +6,9 @@
 #ifndef __LINUX_OF_CLK_H
 #define __LINUX_OF_CLK_H
 
+struct device_node;
+struct of_device_id;
+
 #if defined(CONFIG_COMMON_CLK) && defined(CONFIG_OF)
 
 unsigned int of_clk_get_parent_count(struct device_node *np);

commit eb06d6bbc45a7561de78a00fb17bfbb75893ee26
Author: Geert Uytterhoeven <geert+renesas@glider.be>
Date:   Wed Apr 18 16:50:01 2018 +0200

    clk: Extract OF clock helpers in <linux/of_clk.h>
    
    The use of of_clk_get_parent_{count,name}() and of_clk_init() is not
    limited to clock providers.
    
    Hence move these helpers into their own header file, so callers that are
    not clock providers no longer have to include <linux/clk-provider.h>.
    
    Suggested-by: Stephen Boyd <sboyd@kernel.org>
    Signed-off-by: Geert Uytterhoeven <geert+renesas@glider.be>
    Reviewed-by: Heiko Stuebner <heiko@sntech.de>
    Signed-off-by: Stephen Boyd <sboyd@kernel.org>

diff --git a/include/linux/of_clk.h b/include/linux/of_clk.h
new file mode 100644
index 000000000000..b27da9f164cb
--- /dev/null
+++ b/include/linux/of_clk.h
@@ -0,0 +1,30 @@
+/* SPDX-License-Identifier: GPL-2.0 */
+/*
+ * OF clock helpers
+ */
+
+#ifndef __LINUX_OF_CLK_H
+#define __LINUX_OF_CLK_H
+
+#if defined(CONFIG_COMMON_CLK) && defined(CONFIG_OF)
+
+unsigned int of_clk_get_parent_count(struct device_node *np);
+const char *of_clk_get_parent_name(struct device_node *np, int index);
+void of_clk_init(const struct of_device_id *matches);
+
+#else /* !CONFIG_COMMON_CLK || !CONFIG_OF */
+
+static inline unsigned int of_clk_get_parent_count(struct device_node *np)
+{
+	return 0;
+}
+static inline const char *of_clk_get_parent_name(struct device_node *np,
+						 int index)
+{
+	return NULL;
+}
+static inline void of_clk_init(const struct of_device_id *matches) {}
+
+#endif /* !CONFIG_COMMON_CLK || !CONFIG_OF */
+
+#endif /* __LINUX_OF_CLK_H */
