commit d573454d9b4f00061da314460908e19476d2ff6d
Author: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
Date:   Mon Jul 2 06:30:28 2018 +0000

    ASoC: simple-card: convert to SPDX identifiers
    
    Signed-off-by: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
    Signed-off-by: Mark Brown <broonie@kernel.org>

diff --git a/include/sound/simple_card.h b/include/sound/simple_card.h
index a6a2e1547092..d264e5463f22 100644
--- a/include/sound/simple_card.h
+++ b/include/sound/simple_card.h
@@ -1,12 +1,9 @@
-/*
+/* SPDX-License-Identifier: GPL-2.0
+ *
  * ASoC simple sound card support
  *
  * Copyright (C) 2012 Renesas Solutions Corp.
  * Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
- *
- * This program is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License version 2 as
- * published by the Free Software Foundation.
  */
 
 #ifndef __SIMPLE_CARD_H

commit cecdef3656956b0978bf86ecd1ce0542d2c61e97
Author: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
Date:   Thu Jun 30 06:02:46 2016 +0000

    ASoC: simple-card: use asoc_simple_card_parse_daifmt()
    
    We can use simpel utils asoc_simple_card_parse_daifmt().
    Let's use it
    
    Signed-off-by: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
    Signed-off-by: Mark Brown <broonie@kernel.org>

diff --git a/include/sound/simple_card.h b/include/sound/simple_card.h
index 0399352f3a62..a6a2e1547092 100644
--- a/include/sound/simple_card.h
+++ b/include/sound/simple_card.h
@@ -13,16 +13,7 @@
 #define __SIMPLE_CARD_H
 
 #include <sound/soc.h>
-
-struct asoc_simple_dai {
-	const char *name;
-	unsigned int sysclk;
-	int slots;
-	int slot_width;
-	unsigned int tx_slot_mask;
-	unsigned int rx_slot_mask;
-	struct clk *clk;
-};
+#include <sound/simple_card_utils.h>
 
 struct asoc_simple_card_info {
 	const char *name;

commit 6131084a0bc966107021d8c89489f9cd1663b902
Author: Jyri Sarha <jsarha@ti.com>
Date:   Wed Sep 9 21:27:43 2015 +0300

    ASoC: simple-card: Add tdm slot mask support to simple-card
    
    Adds DT binding for explicitly choosing a tdm mask for DAI and uses it
    in simple-card. The API for snd_soc_of_parse_tdm_slot() has also been
    changed.
    
    Signed-off-by: Jyri Sarha <jsarha@ti.com>
    Signed-off-by: Mark Brown <broonie@kernel.org>

diff --git a/include/sound/simple_card.h b/include/sound/simple_card.h
index b9b4f289fe6b..0399352f3a62 100644
--- a/include/sound/simple_card.h
+++ b/include/sound/simple_card.h
@@ -19,6 +19,8 @@ struct asoc_simple_dai {
 	unsigned int sysclk;
 	int slots;
 	int slot_width;
+	unsigned int tx_slot_mask;
+	unsigned int rx_slot_mask;
 	struct clk *clk;
 };
 

commit 1efb53a220b78fdfdbb97b726a2156713e75bdab
Author: Lars-Peter Clausen <lars@metafoo.de>
Date:   Tue Mar 24 01:07:08 2015 +0000

    ASoC: simple-card: Remove support for setting differing DAI formats
    
    Having to set different formats on the CPU side and the CODEC side of a DAI
    link is usually indication that something is terribly wrong and in most
    cases is a result of a broken driver that implements a set_fmt() callback
    which does not follow the specification. In the past this feature has been
    used to work around broken drivers, rather than fixing them. We don't really
    want to encourage this, so remove support for setting different formats on
    both ends of the link.
    
    Along the way switch to static DAI format setup by setting the the dai_fmt
    field of the snd_soc_dai_link rather than calling snd_soc_dai_fmt().
    
    Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>
    Signed-off-by: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
    Signed-off-by: Mark Brown <broonie@kernel.org>

diff --git a/include/sound/simple_card.h b/include/sound/simple_card.h
index 1255ddb1d3e2..b9b4f289fe6b 100644
--- a/include/sound/simple_card.h
+++ b/include/sound/simple_card.h
@@ -16,7 +16,6 @@
 
 struct asoc_simple_dai {
 	const char *name;
-	unsigned int fmt;
 	unsigned int sysclk;
 	int slots;
 	int slot_width;

commit f9911803e82a32c126c40dd6246ade2faf472cbc
Author: Jyri Sarha <jsarha@ti.com>
Date:   Tue Jan 13 21:16:34 2015 +0200

    ASoC: simple-card: Enable and disable DAI clocks as needed
    
    Call clk_prepare_enable() and clk_disable_unprepare() for cpu dai
    clock and codec dai clock in dai statup and shutdown callbacks. This
    to make sure the related clock are enabled when the audio device is
    used.
    
    Signed-off-by: Jyri Sarha <jsarha@ti.com>
    Signed-off-by: Mark Brown <broonie@kernel.org>

diff --git a/include/sound/simple_card.h b/include/sound/simple_card.h
index 9b0ac77177b6..1255ddb1d3e2 100644
--- a/include/sound/simple_card.h
+++ b/include/sound/simple_card.h
@@ -20,6 +20,7 @@ struct asoc_simple_dai {
 	unsigned int sysclk;
 	int slots;
 	int slot_width;
+	struct clk *clk;
 };
 
 struct asoc_simple_card_info {

commit 6ff62eedce4f7756b092d276165d8e11edab9f28
Author: Xiubo Li <Li.Xiubo@freescale.com>
Date:   Fri Feb 14 09:34:36 2014 +0800

    ASoC: simple-card: add slot information parsing supports
    
    For some CPU/CODEC DAI devices the slot information maybe needed. This
    patch adds the slot information parsing for simple-card driver.
    
    Signed-off-by: Xiubo Li <Li.Xiubo@freescale.com>
    Signed-off-by: Mark Brown <broonie@linaro.org>

diff --git a/include/sound/simple_card.h b/include/sound/simple_card.h
index e1ac996c8feb..9b0ac77177b6 100644
--- a/include/sound/simple_card.h
+++ b/include/sound/simple_card.h
@@ -18,6 +18,8 @@ struct asoc_simple_dai {
 	const char *name;
 	unsigned int fmt;
 	unsigned int sysclk;
+	int slots;
+	int slot_width;
 };
 
 struct asoc_simple_card_info {

commit 45fce59496cbabd46761e6980c05c82d94d08eaa
Author: Jean-Francois Moine <moinejf@free.fr>
Date:   Wed Jan 15 16:51:56 2014 +0100

    ASoC: simple-card: simplify code
    
    The platform data structure contains information which is used only by
    the driver, and the driver allocates platform information fields which
    are of no use.
    Move the driver specific data to a new private structure and cleanup
    the platform data structure.
    
    Signed-off-by: Jean-Francois Moine <moinejf@free.fr>
    Signed-off-by: Mark Brown <broonie@linaro.org>

diff --git a/include/sound/simple_card.h b/include/sound/simple_card.h
index 6c74527d4926..e1ac996c8feb 100644
--- a/include/sound/simple_card.h
+++ b/include/sound/simple_card.h
@@ -29,10 +29,6 @@ struct asoc_simple_card_info {
 	unsigned int daifmt;
 	struct asoc_simple_dai cpu_dai;
 	struct asoc_simple_dai codec_dai;
-
-	/* used in simple-card.c */
-	struct snd_soc_dai_link snd_link;
-	struct snd_soc_card snd_card;
 };
 
 #endif /* __SIMPLE_CARD_H */

commit a4a2992c531f6ca0aa00ce0deb31e51c1b7ae69b
Author: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
Date:   Thu Jan 10 16:49:11 2013 -0800

    ASoC: simple-card: add asoc_simple_dai for initializing
    
    Current simple-card driver calls asoc_simple_card_dai_init()
    if platform had a asoc_simple_card_dai_init pointer.
    And, this initialization function works only
    when platform has an applicable initial value for each dai settings.
    And basically, almost all sound card requires certain initialization.
    This means that almost all platform has initialization settings,
    and driver do nothing if it doesn't have settings.
    
    And additionally, current simple-card supports sysclk settings but it was
    only for codec.  In order to abolish deviation between cpu and codec,
    and in order to simplify processing,
    this patch adds asoc_simple_dai, and removed pointless
    struct asoc_simple_dai_init_info which was trigger of
    calling asoc_simple_card_dai_init().
    
    Signed-off-by: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
    Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>

diff --git a/include/sound/simple_card.h b/include/sound/simple_card.h
index 4b62b8dc6a4f..6c74527d4926 100644
--- a/include/sound/simple_card.h
+++ b/include/sound/simple_card.h
@@ -14,21 +14,21 @@
 
 #include <sound/soc.h>
 
-struct asoc_simple_dai_init_info {
+struct asoc_simple_dai {
+	const char *name;
 	unsigned int fmt;
-	unsigned int cpu_daifmt;
-	unsigned int codec_daifmt;
 	unsigned int sysclk;
 };
 
 struct asoc_simple_card_info {
 	const char *name;
 	const char *card;
-	const char *cpu_dai;
 	const char *codec;
 	const char *platform;
-	const char *codec_dai;
-	struct asoc_simple_dai_init_info *init; /* for snd_link.init */
+
+	unsigned int daifmt;
+	struct asoc_simple_dai cpu_dai;
+	struct asoc_simple_dai codec_dai;
 
 	/* used in simple-card.c */
 	struct snd_soc_dai_link snd_link;

commit f2390880ec0264a0ed26b32c23bc23435b4297da
Author: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
Date:   Sun Apr 8 21:17:50 2012 -0700

    ASoC: add generic simple-card support
    
    Current ASoC requires card.c file to each platforms in order to
    specifies its CPU and Codecs pair.
    But the differences between these were only value/strings of setting.
    In order to reduce duplicate driver, this patch adds generic/simple-card.
    
    Signed-off-by: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
    Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>

diff --git a/include/sound/simple_card.h b/include/sound/simple_card.h
new file mode 100644
index 000000000000..4b62b8dc6a4f
--- /dev/null
+++ b/include/sound/simple_card.h
@@ -0,0 +1,38 @@
+/*
+ * ASoC simple sound card support
+ *
+ * Copyright (C) 2012 Renesas Solutions Corp.
+ * Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+#ifndef __SIMPLE_CARD_H
+#define __SIMPLE_CARD_H
+
+#include <sound/soc.h>
+
+struct asoc_simple_dai_init_info {
+	unsigned int fmt;
+	unsigned int cpu_daifmt;
+	unsigned int codec_daifmt;
+	unsigned int sysclk;
+};
+
+struct asoc_simple_card_info {
+	const char *name;
+	const char *card;
+	const char *cpu_dai;
+	const char *codec;
+	const char *platform;
+	const char *codec_dai;
+	struct asoc_simple_dai_init_info *init; /* for snd_link.init */
+
+	/* used in simple-card.c */
+	struct snd_soc_dai_link snd_link;
+	struct snd_soc_card snd_card;
+};
+
+#endif /* __SIMPLE_CARD_H */
