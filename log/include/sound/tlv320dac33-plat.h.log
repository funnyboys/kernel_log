commit d2912cb15bdda8ba4a5dd73396ad62641af2f520
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Tue Jun 4 10:11:33 2019 +0200

    treewide: Replace GPLv2 boilerplate/reference with SPDX - rule 500
    
    Based on 2 normalized pattern(s):
    
      this program is free software you can redistribute it and or modify
      it under the terms of the gnu general public license version 2 as
      published by the free software foundation
    
      this program is free software you can redistribute it and or modify
      it under the terms of the gnu general public license version 2 as
      published by the free software foundation #
    
    extracted by the scancode license scanner the SPDX license identifier
    
      GPL-2.0-only
    
    has been chosen to replace the boilerplate/reference in 4122 file(s).
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Reviewed-by: Enrico Weigelt <info@metux.net>
    Reviewed-by: Kate Stewart <kstewart@linuxfoundation.org>
    Reviewed-by: Allison Randal <allison@lohutok.net>
    Cc: linux-spdx@vger.kernel.org
    Link: https://lkml.kernel.org/r/20190604081206.933168790@linutronix.de
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/include/sound/tlv320dac33-plat.h b/include/sound/tlv320dac33-plat.h
index 0b94192a8cdf..7a7249a896e3 100644
--- a/include/sound/tlv320dac33-plat.h
+++ b/include/sound/tlv320dac33-plat.h
@@ -1,13 +1,10 @@
+/* SPDX-License-Identifier: GPL-2.0-only */
 /*
  * Platform header for Texas Instruments TLV320DAC33 codec driver
  *
  * Author: Peter Ujfalusi <peter.ujfalusi@ti.com>
  *
  * Copyright:   (C) 2009 Nokia Corporation
- *
- * This program is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License version 2 as
- * published by the Free Software Foundation.
  */
 
 #ifndef __TLV320DAC33_PLAT_H

commit 93864cf04283eb2899ef13ded472a9f24538303f
Author: Peter Ujfalusi <peter.ujfalusi@ti.com>
Date:   Tue May 3 18:11:36 2011 +0300

    ASoC: tlv320dac33: Update e-mail address
    
    Signed-off-by: Peter Ujfalusi <peter.ujfalusi@ti.com>
    Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
    Signed-off-by: Liam Girdwood <lrg@ti.com>

diff --git a/include/sound/tlv320dac33-plat.h b/include/sound/tlv320dac33-plat.h
index 6c6649656798..0b94192a8cdf 100644
--- a/include/sound/tlv320dac33-plat.h
+++ b/include/sound/tlv320dac33-plat.h
@@ -1,7 +1,7 @@
 /*
  * Platform header for Texas Instruments TLV320DAC33 codec driver
  *
- * Author:	Peter Ujfalusi <peter.ujfalusi@nokia.com>
+ * Author: Peter Ujfalusi <peter.ujfalusi@ti.com>
  *
  * Copyright:   (C) 2009 Nokia Corporation
  *

commit a577b318fc7cb0c46f9f0cdefb5b267490ff8ce5
Author: Peter Ujfalusi <peter.ujfalusi@nokia.com>
Date:   Wed Jul 28 15:26:55 2010 +0300

    ASoC: tlv320dac33: Add support for automatic FIFO configuration
    
    Platform parameter to enable automatic FIFO configuration when
    the codec is in Mode1 or Mode7 FIFO mode.
    When this mode is selected, the controls for changing
    nSample (in Mode1), and UTHR (in Mode7) are not added.
    The driver configures the FIFO configuration based on
    the stream's period size in a way, that every burst will
    read period size of data from the host.
    In Mode7 we need to use a formula, which gives close enough
    aproximation for the burst length from the host point
    of view.
    
    Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com>
    Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
    Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>

diff --git a/include/sound/tlv320dac33-plat.h b/include/sound/tlv320dac33-plat.h
index 1aa7bdbc208c..6c6649656798 100644
--- a/include/sound/tlv320dac33-plat.h
+++ b/include/sound/tlv320dac33-plat.h
@@ -16,6 +16,7 @@
 struct tlv320dac33_platform_data {
 	int power_gpio;
 	int mode1_latency; /* latency caused by the i2c writes in us */
+	int auto_fifo_config; /* FIFO config based on the period size */
 	int keep_bclk;	/* Keep the BCLK running in FIFO modes */
 	u8 burst_bclkdiv;
 };

commit f430a27f05d42d26d3e438aa262a92565170573f
Author: Peter Ujfalusi <peter.ujfalusi@nokia.com>
Date:   Wed Jul 28 15:26:54 2010 +0300

    ASoC: tlv320dac33: Revisit the FIFO Mode1 handling
    
    Replace the hardwired latency definition with platform data
    parameter, and simplify the nSample parameter calculation.
    
    Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com>
    Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
    Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>

diff --git a/include/sound/tlv320dac33-plat.h b/include/sound/tlv320dac33-plat.h
index 3f428d53195b..1aa7bdbc208c 100644
--- a/include/sound/tlv320dac33-plat.h
+++ b/include/sound/tlv320dac33-plat.h
@@ -15,6 +15,7 @@
 
 struct tlv320dac33_platform_data {
 	int power_gpio;
+	int mode1_latency; /* latency caused by the i2c writes in us */
 	int keep_bclk;	/* Keep the BCLK running in FIFO modes */
 	u8 burst_bclkdiv;
 };

commit eeb309a8a6ff86ce462e072bc95ecbe85618505e
Author: Peter Ujfalusi <peter.ujfalusi@nokia.com>
Date:   Thu Mar 11 16:26:22 2010 +0200

    ASoC: tlv320dac33: Add option for keeping the BCLK running
    
    Platform data option for the codec to keep the BCLK clock
    continuously running in FIFO modes (codec master).
    
    OMAP3 McBSP when in slave mode needs continuous BCLK running
    on the serial bus in order to operate correctly.
    
    Since in FIFO mode the DAC33 can also shut down the BCLK clock
    and enable it only when it is needed, let the platforms decide
    if the CPU side needs the BCLK running or not.
    
    Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com>
    Acked-by: Liam Girdwood <lrg@slimlogic.co.uk>
    Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>

diff --git a/include/sound/tlv320dac33-plat.h b/include/sound/tlv320dac33-plat.h
index ac0665264bdf..3f428d53195b 100644
--- a/include/sound/tlv320dac33-plat.h
+++ b/include/sound/tlv320dac33-plat.h
@@ -15,6 +15,7 @@
 
 struct tlv320dac33_platform_data {
 	int power_gpio;
+	int keep_bclk;	/* Keep the BCLK running in FIFO modes */
 	u8 burst_bclkdiv;
 };
 

commit 6aceabb459c07a3fb4873c8306de8143c56241b2
Author: Peter Ujfalusi <peter.ujfalusi@nokia.com>
Date:   Wed Jan 20 09:39:36 2010 +0200

    ASoC: tlv320dac33: Burst mode BCLK divider configuration
    
    Add possibility to configure the burst mode BCLK divider through platform
    data structure.
    The BCLK divider changes the actual speed of the serial bus in burst mode,
    which is faster than the sampling frequency of the running stream.
    In this way platforms can experiment with the optimal burst speed without
    the need to modify the codec driver itself.
    
    Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com>
    Acked-by: Liam Girdwood <lrg@slimlogic.co.uk>
    Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>

diff --git a/include/sound/tlv320dac33-plat.h b/include/sound/tlv320dac33-plat.h
index 5858d06a7ffa..ac0665264bdf 100644
--- a/include/sound/tlv320dac33-plat.h
+++ b/include/sound/tlv320dac33-plat.h
@@ -15,6 +15,7 @@
 
 struct tlv320dac33_platform_data {
 	int power_gpio;
+	u8 burst_bclkdiv;
 };
 
 #endif /* __TLV320DAC33_PLAT_H */

commit c8bf93f0fe8c5a509a29e30f3bac823fa0f6d96e
Author: Peter Ujfalusi <peter.ujfalusi@nokia.com>
Date:   Thu Oct 15 09:03:56 2009 +0300

    ASoC: Codec driver for Texas Instruments tlv320dac33 codec
    
    Driver for Texas Instruments TLV320DAC33 (SLAS546) low power stereo
    audio DAC.
    
    TLV320DAC33 is a stereo audio codec with integrated 24KB FIFO for low
    power audio playback.
    
    The digital interface can use I2S, DSP (A or B), Right and Left
    justified formats.
    DAC33 has stereo analog input, which can be bypassed to the analog
    outputs.
    
    Regarding to the internal 24KB FIFO the driver implements 'FIFO bypass'
    mode (default) and nSample mode (FIFO is in use).
    a) In 'FIFO bypass' mode the internal FIFO is not in use, the codec is
    working synchronously as a normal codec (it needs constant stream of
    data on the digital interface).
    
    b) The nSample mode implementation uses one interrupt line from DAC33 to
    the host:
    Alarm threshold is set to 10ms of audio data (limit by the driver
    implementation).
    DAC33 will signal an interrupt, when the FIFO level goes under the
    Alarm threshold.
    The host will write to nSample register a value (number of stereo
    samples), to tell DAC33 how many samples it should read in a burst from
    the host. When the DAC33 received the number of samples, it disables the
    clocks on the I2S bus. When the FIFO use again goes under the Alarm
    threshold, DAC33 signals the host with an interrupt, and the process is
    repeated.
    
    Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com>
    Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>

diff --git a/include/sound/tlv320dac33-plat.h b/include/sound/tlv320dac33-plat.h
new file mode 100644
index 000000000000..5858d06a7ffa
--- /dev/null
+++ b/include/sound/tlv320dac33-plat.h
@@ -0,0 +1,20 @@
+/*
+ * Platform header for Texas Instruments TLV320DAC33 codec driver
+ *
+ * Author:	Peter Ujfalusi <peter.ujfalusi@nokia.com>
+ *
+ * Copyright:   (C) 2009 Nokia Corporation
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+#ifndef __TLV320DAC33_PLAT_H
+#define __TLV320DAC33_PLAT_H
+
+struct tlv320dac33_platform_data {
+	int power_gpio;
+};
+
+#endif /* __TLV320DAC33_PLAT_H */
