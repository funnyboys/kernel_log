commit d1be6a28b13ce6d1bc42bf9b6a9454c65839225b
Author: Will Deacon <will.deacon@arm.com>
Date:   Fri Feb 22 12:48:44 2019 +0000

    asm-generic/mmiowb: Add generic implementation of mmiowb() tracking
    
    In preparation for removing all explicit mmiowb() calls from driver
    code, implement a tracking system in asm-generic based loosely on the
    PowerPC implementation. This allows architectures with a non-empty
    mmiowb() definition to have the barrier automatically inserted in
    spin_unlock() following a critical section containing an I/O write.
    
    Acked-by: Linus Torvalds <torvalds@linux-foundation.org>
    Signed-off-by: Will Deacon <will.deacon@arm.com>

diff --git a/include/asm-generic/mmiowb_types.h b/include/asm-generic/mmiowb_types.h
new file mode 100644
index 000000000000..8eb0095655e7
--- /dev/null
+++ b/include/asm-generic/mmiowb_types.h
@@ -0,0 +1,12 @@
+/* SPDX-License-Identifier: GPL-2.0 */
+#ifndef __ASM_GENERIC_MMIOWB_TYPES_H
+#define __ASM_GENERIC_MMIOWB_TYPES_H
+
+#include <linux/types.h>
+
+struct mmiowb_state {
+	u16	nesting_count;
+	u16	mmiowb_pending;
+};
+
+#endif	/* __ASM_GENERIC_MMIOWB_TYPES_H */
