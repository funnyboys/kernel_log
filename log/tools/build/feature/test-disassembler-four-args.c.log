commit fb982666e380c1632a74495b68b3c33a66e76430
Author: Roman Gushchin <guro@fb.com>
Date:   Wed Dec 27 19:16:29 2017 +0000

    tools/bpftool: fix bpftool build with bintutils >= 2.9
    
    Bpftool build is broken with binutils version 2.29 and later.
    The cause is commit 003ca0fd2286 ("Refactor disassembler selection")
    in the binutils repo, which changed the disassembler() function
    signature.
    
    Fix this by adding a new "feature" to the tools/build/features
    infrastructure and make it responsible for decision which
    disassembler() function signature to use.
    
    Signed-off-by: Roman Gushchin <guro@fb.com>
    Cc: Jakub Kicinski <jakub.kicinski@netronome.com>
    Cc: Alexei Starovoitov <ast@kernel.org>
    Cc: Daniel Borkmann <daniel@iogearbox.net>
    Acked-by: Jakub Kicinski <jakub.kicinski@netronome.com>
    Signed-off-by: Daniel Borkmann <daniel@iogearbox.net>

diff --git a/tools/build/feature/test-disassembler-four-args.c b/tools/build/feature/test-disassembler-four-args.c
new file mode 100644
index 000000000000..45ce65cfddf0
--- /dev/null
+++ b/tools/build/feature/test-disassembler-four-args.c
@@ -0,0 +1,15 @@
+// SPDX-License-Identifier: GPL-2.0
+#include <bfd.h>
+#include <dis-asm.h>
+
+int main(void)
+{
+	bfd *abfd = bfd_openr(NULL, NULL);
+
+	disassembler(bfd_get_arch(abfd),
+		     bfd_big_endian(abfd),
+		     bfd_get_mach(abfd),
+		     abfd);
+
+	return 0;
+}
