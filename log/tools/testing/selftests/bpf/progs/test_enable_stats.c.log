commit 31a9f7fe93378ab587d758d5b2e96a237caa7b8c
Author: Song Liu <songliubraving@fb.com>
Date:   Thu Apr 30 00:15:06 2020 -0700

    bpf: Add selftest for BPF_ENABLE_STATS
    
    Add test for BPF_ENABLE_STATS, which should enable run_time_ns stats.
    
    ~/selftests/bpf# ./test_progs -t enable_stats  -v
    test_enable_stats:PASS:skel_open_and_load 0 nsec
    test_enable_stats:PASS:get_stats_fd 0 nsec
    test_enable_stats:PASS:attach_raw_tp 0 nsec
    test_enable_stats:PASS:get_prog_info 0 nsec
    test_enable_stats:PASS:check_stats_enabled 0 nsec
    test_enable_stats:PASS:check_run_cnt_valid 0 nsec
    Summary: 1/0 PASSED, 0 SKIPPED, 0 FAILED
    
    Signed-off-by: Song Liu <songliubraving@fb.com>
    Signed-off-by: Alexei Starovoitov <ast@kernel.org>
    Acked-by: Andrii Nakryiko <andriin@fb.com>
    Link: https://lore.kernel.org/bpf/20200430071506.1408910-4-songliubraving@fb.com

diff --git a/tools/testing/selftests/bpf/progs/test_enable_stats.c b/tools/testing/selftests/bpf/progs/test_enable_stats.c
new file mode 100644
index 000000000000..01a002ade529
--- /dev/null
+++ b/tools/testing/selftests/bpf/progs/test_enable_stats.c
@@ -0,0 +1,18 @@
+// SPDX-License-Identifier: GPL-2.0
+// Copyright (c) 2020 Facebook
+
+#include <linux/bpf.h>
+#include <stdint.h>
+#include <linux/types.h>
+#include <bpf/bpf_helpers.h>
+
+char _license[] SEC("license") = "GPL";
+
+__u64 count = 0;
+
+SEC("raw_tracepoint/sys_enter")
+int test_enable_stats(void *ctx)
+{
+	count += 1;
+	return 0;
+}
