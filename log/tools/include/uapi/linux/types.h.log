commit bcd66b10b5e956b3e81f76a61abfed2501ff4038
Author: Tobias Klauser <tklauser@distanz.ch>
Date:   Fri Mar 13 12:31:05 2020 +0100

    tools/bpf: Move linux/types.h for selftests and bpftool
    
    Commit fe4eb069edb7 ("bpftool: Use linux/types.h from source tree for
    profiler build") added a build dependency on tools/testing/selftests/bpf
    to tools/bpf/bpftool. This is suboptimal with respect to a possible
    stand-alone build of bpftool.
    
    Fix this by moving tools/testing/selftests/bpf/include/uapi/linux/types.h
    to tools/include/uapi/linux/types.h.
    
    This requires an adjustment in the include search path order for the
    tests in tools/testing/selftests/bpf so that tools/include/linux/types.h
    is selected when building host binaries and
    tools/include/uapi/linux/types.h is selected when building bpf binaries.
    
    Verified by compiling bpftool and the bpf selftests on x86_64 with this
    change.
    
    Fixes: fe4eb069edb7 ("bpftool: Use linux/types.h from source tree for profiler build")
    Suggested-by: Andrii Nakryiko <andrii.nakryiko@gmail.com>
    Signed-off-by: Tobias Klauser <tklauser@distanz.ch>
    Signed-off-by: Daniel Borkmann <daniel@iogearbox.net>
    Reviewed-by: Quentin Monnet <quentin@isovalent.com>
    Link: https://lore.kernel.org/bpf/20200313113105.6918-1-tklauser@distanz.ch

diff --git a/tools/include/uapi/linux/types.h b/tools/include/uapi/linux/types.h
new file mode 100644
index 000000000000..91fa51a9c31d
--- /dev/null
+++ b/tools/include/uapi/linux/types.h
@@ -0,0 +1,23 @@
+/* SPDX-License-Identifier: GPL-2.0 */
+#ifndef _UAPI_LINUX_TYPES_H
+#define _UAPI_LINUX_TYPES_H
+
+#include <asm-generic/int-ll64.h>
+
+/* copied from linux:include/uapi/linux/types.h */
+#define __bitwise
+typedef __u16 __bitwise __le16;
+typedef __u16 __bitwise __be16;
+typedef __u32 __bitwise __le32;
+typedef __u32 __bitwise __be32;
+typedef __u64 __bitwise __le64;
+typedef __u64 __bitwise __be64;
+
+typedef __u16 __bitwise __sum16;
+typedef __u32 __bitwise __wsum;
+
+#define __aligned_u64 __u64 __attribute__((aligned(8)))
+#define __aligned_be64 __be64 __attribute__((aligned(8)))
+#define __aligned_le64 __le64 __attribute__((aligned(8)))
+
+#endif /* _UAPI_LINUX_TYPES_H */
