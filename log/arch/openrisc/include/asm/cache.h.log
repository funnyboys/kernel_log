commit 2874c5fd284268364ece81a7bd936f3c8168e567
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Mon May 27 08:55:01 2019 +0200

    treewide: Replace GPLv2 boilerplate/reference with SPDX - rule 152
    
    Based on 1 normalized pattern(s):
    
      this program is free software you can redistribute it and or modify
      it under the terms of the gnu general public license as published by
      the free software foundation either version 2 of the license or at
      your option any later version
    
    extracted by the scancode license scanner the SPDX license identifier
    
      GPL-2.0-or-later
    
    has been chosen to replace the boilerplate/reference in 3029 file(s).
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Reviewed-by: Allison Randal <allison@lohutok.net>
    Cc: linux-spdx@vger.kernel.org
    Link: https://lkml.kernel.org/r/20190527070032.746973796@linutronix.de
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/arch/openrisc/include/asm/cache.h b/arch/openrisc/include/asm/cache.h
index 5f55da9cbfd5..fbc3f8cae9de 100644
--- a/arch/openrisc/include/asm/cache.h
+++ b/arch/openrisc/include/asm/cache.h
@@ -1,3 +1,4 @@
+/* SPDX-License-Identifier: GPL-2.0-or-later */
 /*
  * OpenRISC Linux
  *
@@ -9,11 +10,6 @@
  * Copyright (C) 2003 Matjaz Breskvar <phoenix@bsemi.com>
  * Copyright (C) 2010-2011 Jonas Bonn <jonas@southpole.se>
  * et al.
- *
- * This program is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
  */
 
 #ifndef __ASM_OPENRISC_CACHE_H

commit 2c7a5c5c48d97ce3105f3258a259f67b7b9d7eb1
Author: Guenter Roeck <linux@roeck-us.net>
Date:   Sat Sep 24 07:15:02 2016 -0700

    openrisc: Define __ro_after_init to avoid crash
    
    openrisc qemu tests fail with the following crash.
    
    Unable to handle kernel access at virtual address 0xc0300c34
    
    Oops#: 0001
    CPU #: 0
       PC: c016c710    SR: 0000ae67    SP: c1017e04
       GPR00: 00000000 GPR01: c1017e04 GPR02: c0300c34 GPR03: c0300c34
       GPR04: 00000000 GPR05: c0300cb0 GPR06: c0300c34 GPR07: 000000ff
       GPR08: c107f074 GPR09: c0199ef4 GPR10: c1016000 GPR11: 00000000
       GPR12: 00000000 GPR13: c107f044 GPR14: c0473774 GPR15: 07ce0000
       GPR16: 00000000 GPR17: c107ed8a GPR18: 00009600 GPR19: c107f044
       GPR20: c107ee74 GPR21: 00000003 GPR22: c0473770 GPR23: 00000033
       GPR24: 000000bf GPR25: 00000019 GPR26: c046400c GPR27: 00000001
       GPR28: c0464028 GPR29: c1018000 GPR30: 00000006 GPR31: ccf37483
         RES: 00000000 oGPR11: ffffffff
         Process swapper (pid: 1, stackpage=c1001960)
    
         Stack: Stack dump [0xc1017cf8]:
         sp + 00: 0xc1017e04
         sp + 04: 0xc0300c34
         sp + 08: 0xc0300c34
         sp + 12: 0x00000000
    ...
    
    Bisect points to commit d2ec3f77de8e ("pty: make ptmx file ops read-only
    after init"). Fix by defining __ro_after_init for the openrisc
    architecture, similar to parisc.
    
    Fixes: d2ec3f77de8e ("pty: make ptmx file ops read-only after init")
    Cc: Kees Cook <keescook@chromium.org>
    Signed-off-by: Guenter Roeck <linux@roeck-us.net>
    Acked-by: Stafford Horne <shorne@gmail.com>

diff --git a/arch/openrisc/include/asm/cache.h b/arch/openrisc/include/asm/cache.h
index 4ce7a01a252d..5f55da9cbfd5 100644
--- a/arch/openrisc/include/asm/cache.h
+++ b/arch/openrisc/include/asm/cache.h
@@ -23,6 +23,8 @@
  * they shouldn't be hard-coded!
  */
 
+#define __ro_after_init __read_mostly
+
 #define L1_CACHE_BYTES 16
 #define L1_CACHE_SHIFT 4
 

commit 61e85e367535a7b6385b404bef93928768140f96
Author: Jonas Bonn <jonas@southpole.se>
Date:   Sat Jun 4 11:06:11 2011 +0300

    OpenRISC: Memory management
    
    Signed-off-by: Jonas Bonn <jonas@southpole.se>
    Reviewed-by: Arnd Bergmann <arnd@arndb.de>

diff --git a/arch/openrisc/include/asm/cache.h b/arch/openrisc/include/asm/cache.h
new file mode 100644
index 000000000000..4ce7a01a252d
--- /dev/null
+++ b/arch/openrisc/include/asm/cache.h
@@ -0,0 +1,29 @@
+/*
+ * OpenRISC Linux
+ *
+ * Linux architectural port borrowing liberally from similar works of
+ * others.  All original copyrights apply as per the original source
+ * declaration.
+ *
+ * OpenRISC implementation:
+ * Copyright (C) 2003 Matjaz Breskvar <phoenix@bsemi.com>
+ * Copyright (C) 2010-2011 Jonas Bonn <jonas@southpole.se>
+ * et al.
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ */
+
+#ifndef __ASM_OPENRISC_CACHE_H
+#define __ASM_OPENRISC_CACHE_H
+
+/* FIXME: How can we replace these with values from the CPU...
+ * they shouldn't be hard-coded!
+ */
+
+#define L1_CACHE_BYTES 16
+#define L1_CACHE_SHIFT 4
+
+#endif /* __ASM_OPENRISC_CACHE_H */
