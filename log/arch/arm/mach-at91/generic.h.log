commit d2912cb15bdda8ba4a5dd73396ad62641af2f520
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Tue Jun 4 10:11:33 2019 +0200

    treewide: Replace GPLv2 boilerplate/reference with SPDX - rule 500
    
    Based on 2 normalized pattern(s):
    
      this program is free software you can redistribute it and or modify
      it under the terms of the gnu general public license version 2 as
      published by the free software foundation
    
      this program is free software you can redistribute it and or modify
      it under the terms of the gnu general public license version 2 as
      published by the free software foundation #
    
    extracted by the scancode license scanner the SPDX license identifier
    
      GPL-2.0-only
    
    has been chosen to replace the boilerplate/reference in 4122 file(s).
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Reviewed-by: Enrico Weigelt <info@metux.net>
    Reviewed-by: Kate Stewart <kstewart@linuxfoundation.org>
    Reviewed-by: Allison Randal <allison@lohutok.net>
    Cc: linux-spdx@vger.kernel.org
    Link: https://lkml.kernel.org/r/20190604081206.933168790@linutronix.de
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 72b45accfa0f..0a4cdcb4985b 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -1,11 +1,8 @@
+/* SPDX-License-Identifier: GPL-2.0-only */
 /*
  * linux/arch/arm/mach-at91/generic.h
  *
  *  Copyright (C) 2005 David Brownell
- *
- * This program is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License version 2 as
- * published by the Free Software Foundation.
  */
 
 #ifndef _AT91_GENERIC_H

commit 01c7031cfa7308c2a6d46636bda2e51be6474cf4
Author: Claudiu Beznea <claudiu.beznea@microchip.com>
Date:   Thu Feb 14 15:54:41 2019 +0000

    ARM: at91: pm: initial PM support for SAM9X60
    
    Add initial PM support for SAM9X60. This include idle, WFI and ULP0.
    
    Signed-off-by: Claudiu Beznea <claudiu.beznea@microchip.com>
    Signed-off-by: Alexandre Belloni <alexandre.belloni@bootlin.com>
    Signed-off-by: Ludovic Desroches <ludovic.desroches@microchip.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index e2bd17237964..72b45accfa0f 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -14,11 +14,13 @@
 #ifdef CONFIG_PM
 extern void __init at91rm9200_pm_init(void);
 extern void __init at91sam9_pm_init(void);
+extern void __init sam9x60_pm_init(void);
 extern void __init sama5_pm_init(void);
 extern void __init sama5d2_pm_init(void);
 #else
 static inline void __init at91rm9200_pm_init(void) { }
 static inline void __init at91sam9_pm_init(void) { }
+static inline void __init sam9x60_pm_init(void) { }
 static inline void __init sama5_pm_init(void) { }
 static inline void __init sama5d2_pm_init(void) { }
 #endif

commit 24a0f5c539f944248cbb2e3502830dcb7fd2a96e
Author: Alexandre Belloni <alexandre.belloni@free-electrons.com>
Date:   Tue Sep 27 12:29:50 2016 +0200

    ARM: at91: pm: Add sama5d2 backup mode
    
    The sama5d2 has a mode were it is possible to cut power to the SoC while
    keeping the RAM in self refresh.
    Resuming from that mode needs support in the firmware/bootloader.
    
    Signed-off-by: Alexandre Belloni <alexandre.belloni@free-electrons.com>
    Acked-by: Wenyou Yang <wenyou.yang@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index f1ead0f13c19..e2bd17237964 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -15,10 +15,12 @@
 extern void __init at91rm9200_pm_init(void);
 extern void __init at91sam9_pm_init(void);
 extern void __init sama5_pm_init(void);
+extern void __init sama5d2_pm_init(void);
 #else
 static inline void __init at91rm9200_pm_init(void) { }
 static inline void __init at91sam9_pm_init(void) { }
 static inline void __init sama5_pm_init(void) { }
+static inline void __init sama5d2_pm_init(void) { }
 #endif
 
 #endif /* _AT91_GENERIC_H */

commit 1346919285933b881e169ede93e67abd226676aa
Author: Alexandre Belloni <alexandre.belloni@free-electrons.com>
Date:   Wed Feb 1 23:43:03 2017 +0100

    ARM: at91: pm: Merge all at91sam9*_pm_init
    
    The PM initialization is now identical for all at91sam9. Merge the
    functions.
    
    Acked-by: Wenyou Yang <wenyou.yang@atmel.com>
    Signed-off-by: Alexandre Belloni <alexandre.belloni@free-electrons.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 28ca57a2060f..f1ead0f13c19 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -13,15 +13,11 @@
 
 #ifdef CONFIG_PM
 extern void __init at91rm9200_pm_init(void);
-extern void __init at91sam9260_pm_init(void);
-extern void __init at91sam9g45_pm_init(void);
-extern void __init at91sam9x5_pm_init(void);
+extern void __init at91sam9_pm_init(void);
 extern void __init sama5_pm_init(void);
 #else
 static inline void __init at91rm9200_pm_init(void) { }
-static inline void __init at91sam9260_pm_init(void) { }
-static inline void __init at91sam9g45_pm_init(void) { }
-static inline void __init at91sam9x5_pm_init(void) { }
+static inline void __init at91sam9_pm_init(void) { }
 static inline void __init sama5_pm_init(void) { }
 #endif
 

commit 6c38bda9ae4ac442b904416901c4dac6d2e53e70
Author: Alexandre Belloni <alexandre.belloni@free-electrons.com>
Date:   Wed Sep 30 02:01:20 2015 +0200

    ARM: at91: remove useless includes and function prototypes
    
    Remove leftover from the previous cleanup
    
    Signed-off-by: Alexandre Belloni <alexandre.belloni@free-electrons.com>
    Acked-by: Boris Brezillon <boris.brezillon@free-electrons.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index d224e195706a..28ca57a2060f 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -11,13 +11,6 @@
 #ifndef _AT91_GENERIC_H
 #define _AT91_GENERIC_H
 
-#include <linux/of.h>
-#include <linux/reboot.h>
-
- /* Map io */
-extern void __init at91_map_io(void);
-extern void __init at91_alt_map_io(void);
-
 #ifdef CONFIG_PM
 extern void __init at91rm9200_pm_init(void);
 extern void __init at91sam9260_pm_init(void);

commit fbc7edca5a7dd417013ef4900763ef931f325b3d
Author: Alexandre Belloni <alexandre.belloni@free-electrons.com>
Date:   Wed Sep 30 01:58:40 2015 +0200

    ARM: at91: pm: move idle functions to pm.c
    
    Avoid using code from clk/at91 for PM.
    This also has the bonus effect of setting arm_pm_idle for sama5 platforms.
    
    Signed-off-by: Alexandre Belloni <alexandre.belloni@free-electrons.com>
    Acked-by: Boris Brezillon <boris.brezillon@free-electrons.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index b0fa7dc7286d..d224e195706a 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -18,20 +18,18 @@
 extern void __init at91_map_io(void);
 extern void __init at91_alt_map_io(void);
 
-/* idle */
-extern void at91rm9200_idle(void);
-extern void at91sam9_idle(void);
-
 #ifdef CONFIG_PM
 extern void __init at91rm9200_pm_init(void);
 extern void __init at91sam9260_pm_init(void);
 extern void __init at91sam9g45_pm_init(void);
 extern void __init at91sam9x5_pm_init(void);
+extern void __init sama5_pm_init(void);
 #else
 static inline void __init at91rm9200_pm_init(void) { }
 static inline void __init at91sam9260_pm_init(void) { }
 static inline void __init at91sam9g45_pm_init(void) { }
 static inline void __init at91sam9x5_pm_init(void) { }
+static inline void __init sama5_pm_init(void) { }
 #endif
 
 #endif /* _AT91_GENERIC_H */

commit bbfc97e1b1b9fb2177a9134f57506eb371638b85
Author: Alexandre Belloni <alexandre.belloni@free-electrons.com>
Date:   Thu Mar 12 13:07:30 2015 +0100

    ARM: at91: properly initialize timer
    
    Use clocksource_of_init to initialize the system timer instead of relying on a
    custom function.
    
    Signed-off-by: Alexandre Belloni <alexandre.belloni@free-electrons.com>
    Acked-by: Boris Brezillon <boris.brezillon@free-electrons.com>
    Acked-by: Daniel Lezcano <daniel.lezcano@linaro.org>
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 2b396c4e1fc1..b0fa7dc7286d 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -18,9 +18,6 @@
 extern void __init at91_map_io(void);
 extern void __init at91_alt_map_io(void);
 
- /* Timer */
-extern void at91rm9200_timer_init(void);
-
 /* idle */
 extern void at91rm9200_idle(void);
 extern void at91sam9_idle(void);

commit 0d3441928b45cc42fdc8949153e8a0b51615300d
Author: Alexandre Belloni <alexandre.belloni@free-electrons.com>
Date:   Thu Mar 12 15:54:24 2015 +0100

    ARM: at91: remove unused at91_ioremap_matrix and header
    
    at91_ioremap_matrix and the at91_matrix.h header are not used anymore, remove
    them.
    
    Signed-off-by: Alexandre Belloni <alexandre.belloni@free-electrons.com>
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 583369ffc284..2b396c4e1fc1 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -25,10 +25,6 @@ extern void at91rm9200_timer_init(void);
 extern void at91rm9200_idle(void);
 extern void at91sam9_idle(void);
 
-/* Matrix */
-extern void at91_ioremap_matrix(u32 base_addr);
-
-
 #ifdef CONFIG_PM
 extern void __init at91rm9200_pm_init(void);
 extern void __init at91sam9260_pm_init(void);

commit a91c5824dd79e5bb9606a48c45b7704a58177967
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Sun Jan 25 14:42:49 2015 +0100

    ARM: at91: fix pm declarations
    
    In a recent rearrangement of the at91 pm initialization code, a broken
    set of declarations was added for the !CONFIG_PM-case, leading to
    this link error:
    
    arch/arm/mach-at91/board-dt-sama5.o: In function `at91_rm9200_pm_init':
    arch/arm/mach-at91/generic.h:40: multiple definition of `at91_rm9200_pm_init'
    arch/arm/mach-at91/setup.o:arch/arm/mach-at91/generic.h:40: first defined here
    arch/arm/mach-at91/board-dt-sama5.o: In function `at91_sam9260_pm_init':
    arch/arm/mach-at91/generic.h:41: multiple definition of `at91_sam9260_pm_init'
    arch/arm/mach-at91/setup.o:arch/arm/mach-at91/generic.h:41: first defined here
    arch/arm/mach-at91/board-dt-sama5.o: In function `at91_sam9g45_pm_init':
    arch/arm/mach-at91/generic.h:42: multiple definition of `at91_sam9g45_pm_init'
    arch/arm/mach-at91/setup.o:arch/arm/mach-at91/generic.h:42: first defined here
    
    This adds the missing 'static inline' to the declarations to avoid
    creating a copy of the functions in each file that includes the
    header.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Fixes: 4db0ba22da9 ("ARM: at91: pm: prepare for multiplatform")
    Acked-by: Nicolas Ferre <nicolas.ferre@atmel.com>
    Cc: Jean-Christophe Plagniol-Villard <plagnioj@jcrosoft.com>
    Cc: Alexandre Belloni <alexandre.belloni@free-electrons.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index a6e726a6e0b5..583369ffc284 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -35,10 +35,10 @@ extern void __init at91sam9260_pm_init(void);
 extern void __init at91sam9g45_pm_init(void);
 extern void __init at91sam9x5_pm_init(void);
 #else
-void __init at91rm9200_pm_init(void) { }
-void __init at91sam9260_pm_init(void) { }
-void __init at91sam9g45_pm_init(void) { }
-void __init at91sam9x5_pm_init(void) { }
+static inline void __init at91rm9200_pm_init(void) { }
+static inline void __init at91sam9260_pm_init(void) { }
+static inline void __init at91sam9g45_pm_init(void) { }
+static inline void __init at91sam9x5_pm_init(void) { }
 #endif
 
 #endif /* _AT91_GENERIC_H */

commit ad3fc3e316891cbc4f33116a61c57c4a9b2a2518
Author: Nicolas Ferre <nicolas.ferre@atmel.com>
Date:   Tue Jan 27 18:41:33 2015 +0100

    ARM: at91/trivial: unify functions and machine names
    
    Remove the string "(Device Tree)" after the machine name because all AT91
    machines use the DT nowadays.
    Also change some function names to unify following the convention:
    - at91sam9xxx aren't named sam9, 9xxx but with the full name
    - sama5 are the ones that don't have the at91 prefix anymore.
    
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 9c6e5b9f87ff..a6e726a6e0b5 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -30,15 +30,15 @@ extern void at91_ioremap_matrix(u32 base_addr);
 
 
 #ifdef CONFIG_PM
-extern void __init at91_rm9200_pm_init(void);
-extern void __init at91_sam9260_pm_init(void);
-extern void __init at91_sam9g45_pm_init(void);
-extern void __init at91_sam9x5_pm_init(void);
+extern void __init at91rm9200_pm_init(void);
+extern void __init at91sam9260_pm_init(void);
+extern void __init at91sam9g45_pm_init(void);
+extern void __init at91sam9x5_pm_init(void);
 #else
-void __init at91_rm9200_pm_init(void) { }
-void __init at91_sam9260_pm_init(void) { }
-void __init at91_sam9g45_pm_init(void) { }
-void __init at91_sam9x5_pm_init(void) { }
+void __init at91rm9200_pm_init(void) { }
+void __init at91sam9260_pm_init(void) { }
+void __init at91sam9g45_pm_init(void) { }
+void __init at91sam9x5_pm_init(void) { }
 #endif
 
 #endif /* _AT91_GENERIC_H */

commit 827de1f123ba0880033d1b5299e116470e19bafb
Author: Alexandre Belloni <alexandre.belloni@free-electrons.com>
Date:   Tue Jan 27 17:38:46 2015 +0100

    ARM: at91: remove at91_dt_initialize and machine init_early()
    
    Move the ramc initialization to pm.c as it is the only user left.
    This allows us to get rid of at91_dt_initialize() that was the only one called
    by the init_early() function pointer of struct machine_desc.
    
    Signed-off-by: Alexandre Belloni <alexandre.belloni@free-electrons.com>
    [nicolas.ferre@atmel.com: adapt patch to newer series]
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index a8ee83ef6cd4..9c6e5b9f87ff 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -18,9 +18,6 @@
 extern void __init at91_map_io(void);
 extern void __init at91_alt_map_io(void);
 
- /* Processors */
-extern void __init at91_dt_initialize(void);
-
  /* Timer */
 extern void at91rm9200_timer_init(void);
 

commit bf02280e435cb620b255bb03738ac334cb7233dd
Author: Nicolas Ferre <nicolas.ferre@atmel.com>
Date:   Thu Jan 22 16:54:50 2015 +0100

    ARM: at91: fix PM initialization for newer SoCs
    
    Newer SoCs: at91sam9x5, at91sam9n12, sama5d3 and sama5d4 embed a DDR controller
    and have a different PMC status register layout than the at91sam9g45. Create
    another at91_sam9x5_pm_init() function to match this compatibility.
    
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 44fc725edcf1..a8ee83ef6cd4 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -36,10 +36,12 @@ extern void at91_ioremap_matrix(u32 base_addr);
 extern void __init at91_rm9200_pm_init(void);
 extern void __init at91_sam9260_pm_init(void);
 extern void __init at91_sam9g45_pm_init(void);
+extern void __init at91_sam9x5_pm_init(void);
 #else
 void __init at91_rm9200_pm_init(void) { }
 void __init at91_sam9260_pm_init(void) { }
 void __init at91_sam9g45_pm_init(void) { }
+void __init at91_sam9x5_pm_init(void) { }
 #endif
 
 #endif /* _AT91_GENERIC_H */

commit 29ee506d0d56f6d39cc237de2512f9cb5629cbf7
Author: Alexandre Belloni <alexandre.belloni@free-electrons.com>
Date:   Thu Jan 15 15:59:31 2015 +0100

    ARM: at91: move at91rm9200_idle() to clk/at91/pmc.c
    
    Move at91rm9200_idle() along with at91sam9_idle() in clk/at91/pmc.c.
    
    Signed-off-by: Alexandre Belloni <alexandre.belloni@free-electrons.com>
    Acked-by: Michael Turquette <mturquette@linaro.org>
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 1823a779182d..44fc725edcf1 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -25,6 +25,7 @@ extern void __init at91_dt_initialize(void);
 extern void at91rm9200_timer_init(void);
 
 /* idle */
+extern void at91rm9200_idle(void);
 extern void at91sam9_idle(void);
 
 /* Matrix */

commit 0be0b8cd49f22037096ad41b831a93dd8d0d4f87
Author: Alexandre Belloni <alexandre.belloni@free-electrons.com>
Date:   Thu Jan 15 15:59:30 2015 +0100

    ARM: at91: remove unused at91_init_sram
    
    SRAM initialization is now done through the mmio-sram driver and
    at91_init_sram() is not called anymore, remove it.
    
    Signed-off-by: Alexandre Belloni <alexandre.belloni@free-electrons.com>
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index fae7a703813c..1823a779182d 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -17,8 +17,6 @@
  /* Map io */
 extern void __init at91_map_io(void);
 extern void __init at91_alt_map_io(void);
-extern void __init at91_init_sram(int bank, unsigned long base,
-				  unsigned int length);
 
  /* Processors */
 extern void __init at91_dt_initialize(void);

commit 4db0ba22da9f4406c292a6a6110eeb2edd12f16a
Author: Alexandre Belloni <alexandre.belloni@free-electrons.com>
Date:   Thu Jan 15 15:59:27 2015 +0100

    ARM: at91: pm: prepare for multiplatform
    
    Split at91_pm_init() in three variants that are called by the respective SoCs
    .init_machine. This allows to remove the of_machine_is_compatible() calls and
    move at91_pm_init() out of arch_initcall() which is required for multiplatform.
    
    Signed-off-by: Alexandre Belloni <alexandre.belloni@free-electrons.com>
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 54f3837a0a4d..fae7a703813c 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -31,4 +31,16 @@ extern void at91sam9_idle(void);
 
 /* Matrix */
 extern void at91_ioremap_matrix(u32 base_addr);
+
+
+#ifdef CONFIG_PM
+extern void __init at91_rm9200_pm_init(void);
+extern void __init at91_sam9260_pm_init(void);
+extern void __init at91_sam9g45_pm_init(void);
+#else
+void __init at91_rm9200_pm_init(void) { }
+void __init at91_sam9260_pm_init(void) { }
+void __init at91_sam9g45_pm_init(void) { }
+#endif
+
 #endif /* _AT91_GENERIC_H */

commit bd87373229e3e8b1a2a42b9eeed4c60fd4418ec6
Author: Alexandre Belloni <alexandre.belloni@free-electrons.com>
Date:   Mon Jan 12 19:42:16 2015 +0100

    ARM: at91: remove useless at91rm9200_set_type()
    
    Since all rm9200 board files have been removed, there is no user of
    at91rm9200_set_type() left. Remove it
    
    Signed-off-by: Alexandre Belloni <alexandre.belloni@free-electrons.com>
    Acked-by: Boris Brezillon <boris.brezillon@free-electrons.com>
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index c10c2ddaae6d..54f3837a0a4d 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -21,7 +21,6 @@ extern void __init at91_init_sram(int bank, unsigned long base,
 				  unsigned int length);
 
  /* Processors */
-extern void __init at91rm9200_set_type(int type);
 extern void __init at91_dt_initialize(void);
 
  /* Timer */

commit 427accd3c43aee11c59b4c2d6e8328a0337017fc
Author: Alexandre Belloni <alexandre.belloni@free-electrons.com>
Date:   Mon Jan 12 19:42:15 2015 +0100

    ARM: at91: remove useless at91rm9200_dt_initialize()
    
    at91rm9200_dt_initialize() is doing the same as at91_dt_initialize(), use that
    one instead.
    
    Signed-off-by: Alexandre Belloni <alexandre.belloni@free-electrons.com>
    Acked-by: Boris Brezillon <boris.brezillon@free-electrons.com>
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index e0368aa06390..c10c2ddaae6d 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -22,7 +22,6 @@ extern void __init at91_init_sram(int bank, unsigned long base,
 
  /* Processors */
 extern void __init at91rm9200_set_type(int type);
-extern void __init at91rm9200_dt_initialize(void);
 extern void __init at91_dt_initialize(void);
 
  /* Timer */

commit 415c94743524696d66e2bbbc00b72ad593cb0187
Author: Alexandre Belloni <alexandre.belloni@free-electrons.com>
Date:   Mon Jan 12 19:42:13 2015 +0100

    ARM: at91: remove useless at91_sysirq_mask_rtx
    
    The irq fixup from at91_sysirq_mask_rtc and at91_sysirq_mask_rtt is now handled
    by aic_common_rtc_irq_fixup and aic_common_rtt_irq_fixup. Remove those useless
    functions.
    Also remove the now unused mach/at91_rtt.h header.
    
    Signed-off-by: Alexandre Belloni <alexandre.belloni@free-electrons.com>
    Acked-by: Boris Brezillon <boris.brezillon@free-electrons.com>
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index d53324210adf..e0368aa06390 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -25,10 +25,6 @@ extern void __init at91rm9200_set_type(int type);
 extern void __init at91rm9200_dt_initialize(void);
 extern void __init at91_dt_initialize(void);
 
- /* Interrupts */
-extern void __init at91_sysirq_mask_rtc(u32 rtc_base);
-extern void __init at91_sysirq_mask_rtt(u32 rtt_base);
-
  /* Timer */
 extern void at91rm9200_timer_init(void);
 

commit 50755f6f038829d3428435158fcdd5fb15a5d902
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Tue Dec 2 14:54:03 2014 +0100

    ARM: at91/clocksource: remove !DT PIT initializations
    
    As AT91 !DT code is now removed, cleanup the PIT clocksource driver.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    [nicolas.ferre@atmel.com: split patch]
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>
    Acked-by: Maxime Ripard <maxime.ripard@free-electrons.com>
    Cc: Boris BREZILLON <boris.brezillon@free-electrons.com>
    Cc: Daniel Lezcano <daniel.lezcano@linaro.org>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 8527e8bd675f..d53324210adf 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -31,8 +31,6 @@ extern void __init at91_sysirq_mask_rtt(u32 rtt_base);
 
  /* Timer */
 extern void at91rm9200_timer_init(void);
-extern void at91sam926x_ioremap_pit(u32 addr);
-extern void at91sam926x_pit_init(int irq);
 
 /* idle */
 extern void at91sam9_idle(void);

commit 8117bf17fe1a2a37ba33d71e59597c0f2261ad92
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Tue Dec 2 14:26:44 2014 +0100

    ARM: at91: at91rm9200 ST initialization is now DT only
    
    As at91rm9200 is now DT only, there is no need to keep old entry point in this
    at91rm9200 System Timer (ST) driver.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    [nicolas.ferre@atmel.com: split patch]
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 13c5b255e335..8527e8bd675f 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -30,8 +30,6 @@ extern void __init at91_sysirq_mask_rtc(u32 rtc_base);
 extern void __init at91_sysirq_mask_rtt(u32 rtt_base);
 
  /* Timer */
-extern void __init at91_init_time(void);
-extern void at91rm9200_ioremap_st(u32 addr);
 extern void at91rm9200_timer_init(void);
 extern void at91sam926x_ioremap_pit(u32 addr);
 extern void at91sam926x_pit_init(int irq);

commit 85c4b31e6e462674a0392240e7e38ebe8bb22832
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Tue Dec 2 12:08:27 2014 +0100

    ARM: at91: remove old AT91-specific drivers
    
    GPIO and LED drivers were replaced by generic ones for DT boards. These drivers
    were remaining: delete them now. Modifications are also done on the
    corresponding header files.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    [nicolas.ferre@atmel.com: split patch]
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 6c5e67b0edfe..13c5b255e335 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -41,20 +41,4 @@ extern void at91sam9_idle(void);
 
 /* Matrix */
 extern void at91_ioremap_matrix(u32 base_addr);
-
- /* GPIO */
-#define AT91RM9200_PQFP		3	/* AT91RM9200 PQFP package has 3 banks */
-#define AT91RM9200_BGA		4	/* AT91RM9200 BGA package has 4 banks */
-
-struct at91_gpio_bank {
-	unsigned short id;		/* peripheral ID */
-	unsigned long regbase;		/* offset from system peripheral base */
-};
-extern void __init at91_gpio_init(struct at91_gpio_bank *, int nr_banks);
-extern void __init at91_gpio_irq_setup(void);
-extern int  __init at91_gpio_of_irq_setup(struct device_node *node,
-					  struct device_node *parent);
-
-extern u32 at91_get_extern_irq(void);
-
 #endif /* _AT91_GENERIC_H */

commit 865a381223cff0d6d976d9bbe1d57a9288ba147b
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Tue Dec 2 12:54:57 2014 +0100

    ARM: at91: cleanup initilisation code by removing dead code
    
    The AT91-specific SoC strucutre "struct at91_init_soc" was filled with specific
    !DT initilisation functions. Now that we got rid of the !DT board file
    description, remove unneeded functions.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    [nicolas.ferre@atmel.com: split patch]
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index eb81940f9848..6c5e67b0edfe 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -22,19 +22,13 @@ extern void __init at91_init_sram(int bank, unsigned long base,
 
  /* Processors */
 extern void __init at91rm9200_set_type(int type);
-extern void __init at91_initialize(unsigned long main_clock);
 extern void __init at91rm9200_dt_initialize(void);
 extern void __init at91_dt_initialize(void);
 
  /* Interrupts */
-extern void __init at91_init_irq_default(void);
-extern void __init at91_init_interrupts(unsigned int priority[]);
 extern void __init at91_sysirq_mask_rtc(u32 rtc_base);
 extern void __init at91_sysirq_mask_rtt(u32 rtt_base);
 
- /* Devices */
-extern void __init at91_register_devices(void);
-
  /* Timer */
 extern void __init at91_init_time(void);
 extern void at91rm9200_ioremap_st(u32 addr);
@@ -42,19 +36,12 @@ extern void at91rm9200_timer_init(void);
 extern void at91sam926x_ioremap_pit(u32 addr);
 extern void at91sam926x_pit_init(int irq);
 
- /* Power Management */
-extern void at91_irq_suspend(void);
-extern void at91_irq_resume(void);
-
 /* idle */
 extern void at91sam9_idle(void);
 
 /* Matrix */
 extern void at91_ioremap_matrix(u32 base_addr);
 
-/* Ram Controler */
-extern void at91_ioremap_ramc(int id, u32 addr, u32 size);
-
  /* GPIO */
 #define AT91RM9200_PQFP		3	/* AT91RM9200 PQFP package has 3 banks */
 #define AT91RM9200_BGA		4	/* AT91RM9200 BGA package has 4 banks */

commit 4a109c50d1958a2783df01980b55508fe47bb79c
Author: Nicolas Ferre <nicolas.ferre@atmel.com>
Date:   Thu Nov 27 16:28:54 2014 +0100

    ARM: at91: remove unused IRQ function declarations
    
    Since 3b26f39b0ab1 (ARM: at91: make use of the new AIC driver for dt enabled
    boards) the old IRQ initialisation functions aren't used anymore: remove their
    declaration in generic.h.
    
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>
    Acked-by: Boris BREZILLON <boris.brezillon@free-electrons.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 713d1d9e50a1..eb81940f9848 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -29,10 +29,6 @@ extern void __init at91_dt_initialize(void);
  /* Interrupts */
 extern void __init at91_init_irq_default(void);
 extern void __init at91_init_interrupts(unsigned int priority[]);
-extern int  __init at91_aic_of_init(struct device_node *node,
-				    struct device_node *parent);
-extern int  __init at91_aic5_of_init(struct device_node *node,
-				    struct device_node *parent);
 extern void __init at91_sysirq_mask_rtc(u32 rtc_base);
 extern void __init at91_sysirq_mask_rtt(u32 rtt_base);
 

commit 1ccdde057b03a2446eeee7b7a63306c4d9c68d61
Author: Nicolas Ferre <nicolas.ferre@atmel.com>
Date:   Thu Nov 27 16:10:06 2014 +0100

    ARM: at91: remove legacy IRQ driver and related code
    
    Remove irc.c and associated header file. The related code was idendified by
    the CONFIG_OLD_IRQ_AT91 option that was removed previously. It has been spotted
    by following coccinelle semantic match:
    
    @rule1@
    expression E;
    statement S;
    @@
    (
    - if (IS_ENABLED(CONFIG_OLD_IRQ_AT91)) S
    |
    - if (IS_ENABLED(CONFIG_OLD_IRQ_AT91) && E) S
    )
    
    Cc: Julia Lawall <Julia.Lawall@lip6.fr>
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>
    Acked-by: Boris BREZILLON <boris.brezillon@free-electrons.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 1ec9b011b6a9..713d1d9e50a1 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -29,8 +29,6 @@ extern void __init at91_dt_initialize(void);
  /* Interrupts */
 extern void __init at91_init_irq_default(void);
 extern void __init at91_init_interrupts(unsigned int priority[]);
-extern void __init at91_aic_init(unsigned int priority[],
-				 unsigned int ext_irq_mask);
 extern int  __init at91_aic_of_init(struct device_node *node,
 				    struct device_node *parent);
 extern int  __init at91_aic5_of_init(struct device_node *node,

commit ff78a189b0ae55f258f020a428c834250eb8f834
Author: Nicolas Ferre <nicolas.ferre@atmel.com>
Date:   Wed Nov 26 17:19:14 2014 +0100

    ARM: at91: remove old at91-specific clock driver
    
    This clock driver collection was specific to AT91 and only used in !DT cases.
    All clocks and the clock trees for all Atmel SoCs are now described by drivers
    using the common clock framework.
    
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>
    Acked-by: Boris BREZILLON <boris.brezillon@free-electrons.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 464b08e9830a..1ec9b011b6a9 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -11,7 +11,6 @@
 #ifndef _AT91_GENERIC_H
 #define _AT91_GENERIC_H
 
-#include <linux/clkdev.h>
 #include <linux/of.h>
 #include <linux/reboot.h>
 
@@ -49,16 +48,6 @@ extern void at91rm9200_timer_init(void);
 extern void at91sam926x_ioremap_pit(u32 addr);
 extern void at91sam926x_pit_init(int irq);
 
- /* Clocks */
-#ifdef CONFIG_OLD_CLK_AT91
-extern int __init at91_clock_init(unsigned long main_clock);
-extern int __init at91_dt_clock_init(void);
-#else
-static int inline at91_clock_init(unsigned long main_clock) { return 0; }
-static int inline at91_dt_clock_init(void) { return 0; }
-#endif
-struct device;
-
  /* Power Management */
 extern void at91_irq_suspend(void);
 extern void at91_irq_resume(void);

commit 7538ec7d1e5990f719538aeec9c021ba694040d9
Author: Nicolas Ferre <nicolas.ferre@atmel.com>
Date:   Tue Oct 21 14:16:54 2014 +0200

    ARM: at91: remove no-MMU at91x40 support
    
    As there is currently no-one to take care of this old !MMU target and as its
    support in recent kernels is a bit rotten, remove this at91x40 support and the
    board file associated with it (at91eb01).
    There are modern ARM !MMU in Mainline now so this target is not interesting for
    building tests anymore. It would be better to start from these modern ARM !MMU
    platforms to reintroduce at91x40 support if needed.
    
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Acked-by: Greg Ungerer <gerg@uclinux.org>
    Acked-by: Uwe Kleine-König <u.kleine-koenig@pengutronix.de>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 81959cf4a137..464b08e9830a 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -24,14 +24,12 @@ extern void __init at91_init_sram(int bank, unsigned long base,
  /* Processors */
 extern void __init at91rm9200_set_type(int type);
 extern void __init at91_initialize(unsigned long main_clock);
-extern void __init at91x40_initialize(unsigned long main_clock);
 extern void __init at91rm9200_dt_initialize(void);
 extern void __init at91_dt_initialize(void);
 
  /* Interrupts */
 extern void __init at91_init_irq_default(void);
 extern void __init at91_init_interrupts(unsigned int priority[]);
-extern void __init at91x40_init_interrupts(unsigned int priority[]);
 extern void __init at91_aic_init(unsigned int priority[],
 				 unsigned int ext_irq_mask);
 extern int  __init at91_aic_of_init(struct device_node *node,
@@ -50,7 +48,6 @@ extern void at91rm9200_ioremap_st(u32 addr);
 extern void at91rm9200_timer_init(void);
 extern void at91sam926x_ioremap_pit(u32 addr);
 extern void at91sam926x_pit_init(int irq);
-extern void at91x40_timer_init(void);
 
  /* Clocks */
 #ifdef CONFIG_OLD_CLK_AT91

commit 8b45bc892e6842115fc87c2b2a3b86a20617606a
Merge: eb785bef684f fa637bf0595e
Author: Linus Torvalds <torvalds@linux-foundation.org>
Date:   Wed Oct 8 17:37:16 2014 -0400

    Merge tag 'drivers-for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/arm/arm-soc
    
    Pull ARM SoC driver updates from Arnd Bergmann:
     "These are changes for drivers that are intimately tied to some SoC and
      for some reason could not get merged through the respective subsystem
      maintainer tree.
    
      Most of the new code is for the Keystone Navigator driver, which is
      new base support that is going to be needed for their hardware
      accelerated network driver and other units.
    
      Most of the commits are for moving old code around from at91 and omap
      for things that are done in device drivers nowadays.
    
       - at91: move reset, poweroff, memory and clocksource code into
         drivers directories
       - socfpga: add edac driver (through arm-soc, as requested by Boris)
       - omap: move omap-intc code to drivers/irqchip
       - sunxi: added an RTC driver for sun6i
       - omap: mailbox driver related changes
       - keystone: support for the "Navigator" component
       - versatile: new reboot, led and soc drivers"
    
    * tag 'drivers-for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/arm/arm-soc: (92 commits)
      bus: arm-ccn: Fix spurious warning message
      leds: add device tree bindings for register bit LEDs
      soc: add driver for the ARM RealView
      power: reset: driver for the Versatile syscon reboot
      leds: add a driver for syscon-based LEDs
      drivers/soc: ti: fix build break with modules
      MAINTAINERS: Add Keystone Multicore Navigator drivers entry
      soc: ti: add Keystone Navigator DMA support
      Documentation: dt: soc: add Keystone Navigator DMA bindings
      soc: ti: add Keystone Navigator QMSS driver
      Documentation: dt: soc: add Keystone Navigator QMSS bindings
      rtc: sunxi: Depend on platforms sun4i/sun7i that actually have the rtc
      rtc: sun6i: Add sun6i RTC driver
      irqchip: omap-intc: remove unnecessary comments
      irqchip: omap-intc: correct maximum number or MIR registers
      irqchip: omap-intc: enable TURBO idle mode
      irqchip: omap-intc: enable IP protection
      irqchip: omap-intc: remove unnecesary of_address_to_resource() call
      irqchip: omap-intc: comment style cleanup
      irqchip: omap-intc: minor improvement to omap_irq_pending()
      ...

commit 726d32bf79ef4042004535c9af9c8ea543abe46f
Author: Nicolas Ferre <nicolas.ferre@atmel.com>
Date:   Mon Sep 15 18:15:55 2014 +0200

    ARM: at91: SAMA5D4 SoC detection code and low level routines
    
    SoC identification code, kernel uncompress and low level
    debugging routines update.
    On SAMA5D4, DBGU is at another address AT91_BASE_DBGU2 so another
    round of detection is needed. We also had to differentiate with
    SAMA5D3 SoC family and rename some variables.
    
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>
    Acked-by: Alexandre Belloni <alexandre.belloni@free-electrons.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 631fa3b8c16d..cddf1e51c50e 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -14,6 +14,7 @@
 
  /* Map io */
 extern void __init at91_map_io(void);
+extern void __init at91_alt_map_io(void);
 extern void __init at91_init_sram(int bank, unsigned long base,
 				  unsigned int length);
 

commit 7d80335e29701e9c2cc55ec0ea79afe6351aa20b
Author: Maxime Ripard <maxime.ripard@free-electrons.com>
Date:   Mon Sep 15 16:02:24 2014 +0200

    ARM: at91: Give the PIT irq as an argument of at91sam926x_pit_init
    
    This allows to remove the dependency of the timer driver on mach/hardware.h and
    having an hardcoded interrupt number in the driver itself.
    
    Signed-off-by: Maxime Ripard <maxime.ripard@free-electrons.com>
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index fb99dabab8f7..189d7c7e7f60 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -48,7 +48,7 @@ extern void __init at91_init_time(void);
 extern void at91rm9200_ioremap_st(u32 addr);
 extern void at91rm9200_timer_init(void);
 extern void at91sam926x_ioremap_pit(u32 addr);
-extern void at91sam926x_pit_init(void);
+extern void at91sam926x_pit_init(int irq);
 extern void at91x40_timer_init(void);
 
  /* Clocks */

commit d2992e51e799099e319aeaaa8648917954f59a3b
Author: Maxime Ripard <maxime.ripard@free-electrons.com>
Date:   Tue Sep 2 18:05:04 2014 +0200

    ARM: at91: soc: Add init_time callback
    
    Introduce an init_time callback to the at91_init_soc structure to be able to
    tweak the init_time machine callback on a per-soc basis, instead of having to
    rely on a global one.
    
    Signed-off-by: Maxime Ripard <maxime.ripard@free-electrons.com>
    Acked-by: Boris BREZILLON <boris.brezillon@free-electrons.com>
    Acked-by: Alexandre Belloni <alexandre.belloni@free-electrons.com>
    Acked-by: Daniel Lezcano <daniel.lezcano@linaro.org>
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>
    
    Conflicts:
            arch/arm/mach-at91/setup.c

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 31cba6d9aa61..fb99dabab8f7 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -44,6 +44,7 @@ extern void __init at91_sysirq_mask_rtt(u32 rtt_base);
 extern void __init at91_register_devices(void);
 
  /* Timer */
+extern void __init at91_init_time(void);
 extern void at91rm9200_ioremap_st(u32 addr);
 extern void at91rm9200_timer_init(void);
 extern void at91sam926x_ioremap_pit(u32 addr);

commit 1bd59dbe53d9913420ae751d0447e769fd22cbf5
Author: Maxime Ripard <maxime.ripard@free-electrons.com>
Date:   Tue Jul 1 11:33:15 2014 +0200

    ARM: at91: generic.h: Add include safe guards
    
    The generic.h header file doesn't have any safe guards against multiple
    inclusion. It only worked so far because all the symbols defined in it were
    extern, but this is a rather fragile assumption.
    
    Signed-off-by: Maxime Ripard <maxime.ripard@free-electrons.com>
    Acked-by: Boris BREZILLON <boris.brezillon@free-electrons.com>
    Acked-by: Alexandre Belloni <alexandre.belloni@free-electrons.com>
    Acked-by: Daniel Lezcano <daniel.lezcano@linaro.org>
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index f42b0490ad98..31cba6d9aa61 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -8,6 +8,9 @@
  * published by the Free Software Foundation.
  */
 
+#ifndef _AT91_GENERIC_H
+#define _AT91_GENERIC_H
+
 #include <linux/clkdev.h>
 #include <linux/of.h>
 #include <linux/reboot.h>
@@ -84,3 +87,5 @@ extern int  __init at91_gpio_of_irq_setup(struct device_node *node,
 					  struct device_node *parent);
 
 extern u32 at91_get_extern_irq(void);
+
+#endif /* _AT91_GENERIC_H */

commit 351a4ffea259a11deebe0eb169c46ccbfc3abd36
Author: Maxime Ripard <maxime.ripard@free-electrons.com>
Date:   Thu Jul 3 14:46:31 2014 +0200

    ARM: at91: Remove rstc and shdwnc global base addresses
    
    Now that there's no user left for the global variables holding the reset and
    shutdown controllers base address, we can remove these variables and their
    associated mapping function.
    
    Signed-off-by: Maxime Ripard <maxime.ripard@free-electrons.com>
    Acked-by: Alexandre Belloni <alexandre.belloni@free-electrons.com>
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 5d5e55237c41..f42b0490ad98 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -64,12 +64,6 @@ extern void at91_irq_resume(void);
 /* idle */
 extern void at91sam9_idle(void);
 
-/* reset */
-extern void at91_ioremap_rstc(u32 base_addr);
-
-/* shutdown */
-extern void at91_ioremap_shdwc(u32 base_addr);
-
 /* Matrix */
 extern void at91_ioremap_matrix(u32 base_addr);
 

commit 99d63fa1c8fe8853540116a6deaedc1ba1fc0468
Author: Maxime Ripard <maxime.ripard@free-electrons.com>
Date:   Thu Jul 3 12:00:52 2014 +0200

    ARM: at91: Remove reset code from the machine code
    
    Now that the transition is over and that we probe our reset driver in every
    case, we can remove the legacy code from the machine directory.
    
    Signed-off-by: Maxime Ripard <maxime.ripard@free-electrons.com>
    Acked-by: Alexandre Belloni <alexandre.belloni@free-electrons.com>
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 4c2c96195a50..5d5e55237c41 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -66,8 +66,6 @@ extern void at91sam9_idle(void);
 
 /* reset */
 extern void at91_ioremap_rstc(u32 base_addr);
-extern void at91sam9_alt_restart(enum reboot_mode, const char *);
-extern void at91sam9g45_restart(enum reboot_mode, const char *);
 
 /* shutdown */
 extern void at91_ioremap_shdwc(u32 base_addr);

commit 65f2ce96a94d2a61fca486a48d9da30845b16d20
Author: Maxime Ripard <maxime.ripard@free-electrons.com>
Date:   Wed Jul 2 17:49:28 2014 +0200

    ARM: at91/soc: Introduce register_devices callback
    
    Some core devices should be registered by the SoC itself rather than by every
    board using this SoC. Introduce a register_devices callback that should be
    called during the init_machine in order to do that.
    
    Signed-off-by: Maxime Ripard <maxime.ripard@free-electrons.com>
    Acked-by: Alexandre Belloni <alexandre.belloni@free-electrons.com>
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 631fa3b8c16d..4c2c96195a50 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -37,6 +37,8 @@ extern int  __init at91_aic5_of_init(struct device_node *node,
 extern void __init at91_sysirq_mask_rtc(u32 rtc_base);
 extern void __init at91_sysirq_mask_rtt(u32 rtt_base);
 
+ /* Devices */
+extern void __init at91_register_devices(void);
 
  /* Timer */
 extern void at91rm9200_ioremap_st(u32 addr);

commit c8a8c6300866a51ba41fb41b95800e5982dcf96a
Author: Boris BREZILLON <b.brezillon@overkiz.com>
Date:   Fri Oct 11 09:37:46 2013 +0200

    ARM: at91: add Kconfig options for common clk support
    
    This patch adds the following Kconfig options to prepare the transition to
    common clk framework:
    
    - AT91_USE_OLD_CLK: this option is selected by every SoC which does not
      support new at91 clks based on common clk framework (SoC which does not
      define the clock tree in its device tree).
      This options is also selected when the user choose non dt boards support
      (new at91 clks can only be registered from a device tree definition).
    
    - COMMON_CLK_AT91: this option cannot be selected directly. Instead it is
      enabled if these 3 conditions are met:
       * at least one of the selected SoCs have a PMC (Power Management
         Controller) Unit
       * device tree support is enabled
       * the old at91 clk implementation is disabled (every selected SoC define
         its clks in its device tree and non dt boards support is disabled)
    
    - OLD_CLK_AT91: this option cannot be selected directly. Instead it is
      enabled if these 2 conditions are met:
       * at least one of the selected SoCs have a PMC (Power Management
         Controller) Unit
       * at least one of the selected SoCs does not define its clks in its
         device tree or non dt-boards support is enabled
    
    This patch selects AT91_USE_OLD_CLK in all currently supported SoCs. These
    selects will be removed after clk definitions are properly added in each
    soc's device tree.
    It also selects AT91_USE_OLD_CLK in all non-dt boards support.
    
    AT91_PMC_UNIT references are replaced by OLD_CLK_AT91, because PMC Unit is
    enabled for both old and common clk implementations, and old clk
    implementation should not be compiled if COMMON_CLK is enabled.
    
    To avoid future link errors, a new stub is created for at91_dt_clock_init
    function if OLD_CLK_AT91 is disabled.
    
    A new check is added in dt init functions (setup.c) to prepare for SoCs
    supporting new clk implementation. These SoCs won't setup the
    register_clocks callback (clk registration is done using of_clk_init).
    
    Signed-off-by: Boris BREZILLON <b.brezillon@overkiz.com>
    Acked-by: Mike Turquette <mturquette@linaro.org>
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 26dee3ce9397..631fa3b8c16d 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -46,11 +46,12 @@ extern void at91sam926x_pit_init(void);
 extern void at91x40_timer_init(void);
 
  /* Clocks */
-#ifdef CONFIG_AT91_PMC_UNIT
+#ifdef CONFIG_OLD_CLK_AT91
 extern int __init at91_clock_init(unsigned long main_clock);
 extern int __init at91_dt_clock_init(void);
 #else
 static int inline at91_clock_init(unsigned long main_clock) { return 0; }
+static int inline at91_dt_clock_init(void) { return 0; }
 #endif
 struct device;
 

commit 94c4c79f2f1acca6e69a50bff5a7d9027509c16b
Author: Johan Hovold <jhovold@gmail.com>
Date:   Wed Oct 16 11:56:15 2013 +0200

    ARM: at91: fix hanged boot due to early rtt-interrupt
    
    Make sure the RTT-interrupts are masked at boot by adding a new helper
    function to be used at SOC-init.
    
    This fixes hanged boot on all AT91 SOCs with an RTT, for example, if an
    RTT-alarm goes off after a non-clean shutdown (e.g. when using RTC
    wakeup).
    
    The RTC and RTT-peripherals are powered by backup power (VDDBU) (on all
    AT91 SOCs but RM9200) and are not reset on wake-up, user, watchdog or
    software reset. This means that their interrupts may be enabled during
    early boot if, for example, they where not disabled during a previous
    shutdown (e.g. due to a buggy driver or a non-clean shutdown such as a
    user reset). Furthermore, an RTC or RTT-alarm may also be active.
    
    The RTC and RTT-interrupts use the shared system-interrupt line, which
    is also used by the PIT, and if an interrupt occurs before a handler
    (e.g. RTC-driver) has been installed this leads to the system interrupt
    being disabled and prevents the system from booting.
    
    Note that when boot hangs due to an early RTC or RTT-interrupt, the only
    way to get the system to start again is to remove the backup power (e.g.
    battery) or to disable the interrupt manually from the bootloader. In
    particular, a user reset is not sufficient.
    
    Signed-off-by: Johan Hovold <jhovold@gmail.com>
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>
    Cc: stable@vger.kernel.org # 3.11.x

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 80269bda0dd7..26dee3ce9397 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -35,6 +35,7 @@ extern int  __init at91_aic_of_init(struct device_node *node,
 extern int  __init at91_aic5_of_init(struct device_node *node,
 				    struct device_node *parent);
 extern void __init at91_sysirq_mask_rtc(u32 rtc_base);
+extern void __init at91_sysirq_mask_rtt(u32 rtt_base);
 
 
  /* Timer */

commit 6de714c21a8ea315fffba6a93bbe537f4c1bf4f0
Author: Johan Hovold <jhovold@gmail.com>
Date:   Wed Oct 16 11:56:14 2013 +0200

    ARM: at91: fix hanged boot due to early rtc-interrupt
    
    Make sure the RTC-interrupts are masked at boot by adding a new helper
    function to be used at SOC-init.
    
    This fixes hanged boot on all AT91 SOCs with an RTC (but RM9200), for
    example, after a reset during an RTC-update or if an RTC-alarm goes off
    after shutdown (e.g. when using RTC wakeup).
    
    The RTC and RTT-peripherals are powered by backup power (VDDBU) (on all
    AT91 SOCs but RM9200) and are not reset on wake-up, user, watchdog or
    software reset. This means that their interrupts may be enabled during
    early boot if, for example, they where not disabled during a previous
    shutdown (e.g. due to a buggy driver or a non-clean shutdown such as a
    user reset). Furthermore, an RTC or RTT-alarm may also be active.
    
    The RTC and RTT-interrupts use the shared system-interrupt line, which
    is also used by the PIT, and if an interrupt occurs before a handler
    (e.g. RTC-driver) has been installed this leads to the system interrupt
    being disabled and prevents the system from booting.
    
    Note that when boot hangs due to an early RTC or RTT-interrupt, the only
    way to get the system to start again is to remove the backup power (e.g.
    battery) or to disable the interrupt manually from the bootloader. In
    particular, a user reset is not sufficient.
    
    Signed-off-by: Johan Hovold <jhovold@gmail.com>
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>
    Cc: stable@vger.kernel.org # 3.11.x

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index dc6e2f5f804d..80269bda0dd7 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -34,6 +34,7 @@ extern int  __init at91_aic_of_init(struct device_node *node,
 				    struct device_node *parent);
 extern int  __init at91_aic5_of_init(struct device_node *node,
 				    struct device_node *parent);
+extern void __init at91_sysirq_mask_rtc(u32 rtc_base);
 
 
  /* Timer */

commit 7b6d864b48d95e6ea1df7df64475b9cb9616dcf9
Author: Robin Holt <holt@sgi.com>
Date:   Mon Jul 8 16:01:40 2013 -0700

    reboot: arm: change reboot_mode to use enum reboot_mode
    
    Preparing to move the parsing of reboot= to generic kernel code forces
    the change in reboot_mode handling to use the enum.
    
    [akpm@linux-foundation.org: fix arch/arm/mach-socfpga/socfpga.c]
    Signed-off-by: Robin Holt <holt@sgi.com>
    Cc: Russell King <rmk+kernel@arm.linux.org.uk>
    Cc: Russ Anderson <rja@sgi.com>
    Cc: Robin Holt <holt@sgi.com>
    Cc: H. Peter Anvin <hpa@zytor.com>
    Cc: Guan Xuetao <gxt@mprc.pku.edu.cn>
    Acked-by: Russell King <rmk+kernel@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index f6de36aefe85..dc6e2f5f804d 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -10,6 +10,7 @@
 
 #include <linux/clkdev.h>
 #include <linux/of.h>
+#include <linux/reboot.h>
 
  /* Map io */
 extern void __init at91_map_io(void);
@@ -60,8 +61,8 @@ extern void at91sam9_idle(void);
 
 /* reset */
 extern void at91_ioremap_rstc(u32 base_addr);
-extern void at91sam9_alt_restart(char, const char *);
-extern void at91sam9g45_restart(char, const char *);
+extern void at91sam9_alt_restart(enum reboot_mode, const char *);
+extern void at91sam9g45_restart(enum reboot_mode, const char *);
 
 /* shutdown */
 extern void at91_ioremap_shdwc(u32 base_addr);

commit 546c830c90beb7d3e398007715fd1b631c6c060a
Author: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
Date:   Sat Jun 1 16:40:11 2013 +0200

    ARM: at91: fix at91_extern_irq usage for non-dt boards
    
    Since 4b68520dc0ec96153bc0d87bca5ffba508edfcf
    ARM: at91: add AIC5 support
    
    we allocate the at91_extern_irq.
    
    This patch makes it static and stores the non-dt extern irq in the soc
    structure. It is then possible to use a at91_get_extern_irq() function
    to get the value for outside of the irq driver. It is useful for passing
    its value to at91_aic_init().
    
    Signed-off-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
    Acked-by: Ludovic Desroches <ludovic.desroches@atmel.com>
    [nicolas.ferre@atmel.com: rework commit message]
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 78ab06548658..f6de36aefe85 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -85,4 +85,4 @@ extern void __init at91_gpio_irq_setup(void);
 extern int  __init at91_gpio_of_irq_setup(struct device_node *node,
 					  struct device_node *parent);
 
-extern int at91_extern_irq;
+extern u32 at91_get_extern_irq(void);

commit 6bb27d7349db51b50c40534710fe164ca0d58902
Author: Stephen Warren <swarren@nvidia.com>
Date:   Thu Nov 8 12:40:59 2012 -0700

    ARM: delete struct sys_timer
    
    Now that the only field in struct sys_timer is .init, delete the struct,
    and replace the machine descriptor .timer field with the initialization
    function itself.
    
    This will enable moving timer drivers into drivers/clocksource without
    having to place a public prototype of each struct sys_timer object into
    include/linux; the intent is to create a single of_clocksource_init()
    function that determines which timer driver to initialize by scanning
    the device dtree, much like the proposed irqchip_init() at:
    http://www.spinics.net/lists/arm-kernel/msg203686.html
    
    Includes mach-omap2 fixes from Igor Grinberg.
    
    Tested-by: Robert Jarzmik <robert.jarzmik@free.fr>
    Signed-off-by: Stephen Warren <swarren@nvidia.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index fc593d615e7d..78ab06548658 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -36,12 +36,11 @@ extern int  __init at91_aic5_of_init(struct device_node *node,
 
 
  /* Timer */
-struct sys_timer;
 extern void at91rm9200_ioremap_st(u32 addr);
-extern struct sys_timer at91rm9200_timer;
+extern void at91rm9200_timer_init(void);
 extern void at91sam926x_ioremap_pit(u32 addr);
-extern struct sys_timer at91sam926x_timer;
-extern struct sys_timer at91x40_timer;
+extern void at91sam926x_pit_init(void);
+extern void at91x40_timer_init(void);
 
  /* Clocks */
 #ifdef CONFIG_AT91_PMC_UNIT

commit 17d6b293e72547f75f5d9b680b75459cb8f2c9cf
Merge: e59d969f441f ad8a15d99cf2
Author: Linus Walleij <linus.walleij@linaro.org>
Date:   Wed Nov 21 10:48:33 2012 +0100

    Merge branch 'delivery/pinctrl-at91-3.8' of http://github.com/at91linux/linux-at91 into at91

commit 397f8c3ca3fec5906d82656ca23a841763196f22
Author: Joachim Eastwood <manabian@gmail.com>
Date:   Sun Oct 28 18:31:09 2012 +0000

    ARM: AT91: Add AT91RM9200 DT board
    
    Signed-off-by: Joachim Eastwood <manabian@gmail.com>
    Signed-off-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index f49650677653..9bb5ce5fb225 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -20,6 +20,7 @@ extern void __init at91_init_sram(int bank, unsigned long base,
 extern void __init at91rm9200_set_type(int type);
 extern void __init at91_initialize(unsigned long main_clock);
 extern void __init at91x40_initialize(unsigned long main_clock);
+extern void __init at91rm9200_dt_initialize(void);
 extern void __init at91_dt_initialize(void);
 
  /* Interrupts */

commit 738a0fd752dc60e20beeda6f2f0f62e58dc0e344
Author: Nicolas Ferre <nicolas.ferre@atmel.com>
Date:   Wed Oct 24 16:09:57 2012 +0200

    ARM: at91: fix external interrupts in non-DT case
    
    Management of external interrupts has changed but the
    non-DT code has not integrated these changes.
    Add a mask to pass external irq specification from SoC
    specific code to the at91_aic_init() function.
    
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>
    Acked-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
    Acked-by: Ludovic Desroches <ludovic.desroches@atmel.com>
    Cc: stable <stable@vger.kernel.org> [v3.6]

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index f49650677653..b62f560e6c75 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -26,7 +26,8 @@ extern void __init at91_dt_initialize(void);
 extern void __init at91_init_irq_default(void);
 extern void __init at91_init_interrupts(unsigned int priority[]);
 extern void __init at91x40_init_interrupts(unsigned int priority[]);
-extern void __init at91_aic_init(unsigned int priority[]);
+extern void __init at91_aic_init(unsigned int priority[],
+				 unsigned int ext_irq_mask);
 extern int  __init at91_aic_of_init(struct device_node *node,
 				    struct device_node *parent);
 extern int  __init at91_aic5_of_init(struct device_node *node,

commit c4b68520dc0ec96153bc0d87bca5ffba508edfcf
Author: Ludovic Desroches <ludovic.desroches@atmel.com>
Date:   Wed May 30 10:01:09 2012 +0200

    ARM: at91: add AIC5 support
    
    The number of lines of AIC5 has increased from 32 to 128. Due to this
    increase, a source select register has been introduced for the interrupt
    line selection. Moreover, register mapping has been changed. For that reasons,
    we need some dedicated callbacks for AIC5.
    Power management is also concerned by these changes. On suspend, we can't get
    the whole interrupt mask register as before, we have to read this register 128
    times. To reduce this overhead, a snapshot of the whole IMR is maintained.
    
    Signed-off-by: Ludovic Desroches <ludovic.desroches@atmel.com>
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 0a60bf837037..f49650677653 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -29,6 +29,8 @@ extern void __init at91x40_init_interrupts(unsigned int priority[]);
 extern void __init at91_aic_init(unsigned int priority[]);
 extern int  __init at91_aic_of_init(struct device_node *node,
 				    struct device_node *parent);
+extern int  __init at91_aic5_of_init(struct device_node *node,
+				    struct device_node *parent);
 
 
  /* Timer */

commit a27fa58117ae1161adefedde449e5a71b3c593a4
Author: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
Date:   Thu Apr 5 13:43:40 2012 +0800

    ARM: at91: drop at91_set_serial_console
    
    at91_set_serial_console is used to define the default console of linux.
    This is already manage by the cmdline. And if the boot loader can not be
    modified you can still set it by enabling the CONFIG_CMDLINE_EXTEND option.
    And then the command-line arguments provided by the boot loader will be
    appended to the default kernel command string.
    
    Signed-off-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
    Acked-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index dd9b346c451d..0a60bf837037 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -40,17 +40,6 @@ extern struct sys_timer at91sam926x_timer;
 extern struct sys_timer at91x40_timer;
 
  /* Clocks */
-/*
- * function to specify the clock of the default console. As we do not
- * use the device/driver bus, the dev_name is not intialize. So we need
- * to link the clock to a specific con_id only "usart"
- */
-extern void __init at91rm9200_set_console_clock(int id);
-extern void __init at91sam9260_set_console_clock(int id);
-extern void __init at91sam9261_set_console_clock(int id);
-extern void __init at91sam9263_set_console_clock(int id);
-extern void __init at91sam9rl_set_console_clock(int id);
-extern void __init at91sam9g45_set_console_clock(int id);
 #ifdef CONFIG_AT91_PMC_UNIT
 extern int __init at91_clock_init(unsigned long main_clock);
 extern int __init at91_dt_clock_init(void);

commit eb5e76ffd4e626655944e99bb85b07e17172620d
Author: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
Date:   Fri Mar 2 20:44:23 2012 +0800

    ARM: at91: add pmc DT support
    
    Specified the main Oscillator via clock binding.
    This will allow to do not hardcode it anymore in the DT board at 12MHz.
    
    Signed-off-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
    Acked-by: Rob Herring <rob.herring@calxeda.com>
    Acked-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index d5f5083880f1..dd9b346c451d 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -53,6 +53,7 @@ extern void __init at91sam9rl_set_console_clock(int id);
 extern void __init at91sam9g45_set_console_clock(int id);
 #ifdef CONFIG_AT91_PMC_UNIT
 extern int __init at91_clock_init(unsigned long main_clock);
+extern int __init at91_dt_clock_init(void);
 #else
 static int inline at91_clock_init(unsigned long main_clock) { return 0; }
 #endif

commit 2b11ea5bf2fe4b79f9388d2eaf5d84713eb44a4c
Author: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
Date:   Tue Feb 28 13:57:51 2012 +0800

    ARM: at91/dt: add specific DT soc init
    
    This will allow to have static Device mapping and DT probe mapping for the
    System Controller.
    
    Temporary keep the call to ioremap_registers() until we have the binding
    for the SDRAM/DDR Controller.
    
    Temporary keep the main clock hardcoded to 12MHz until we have the binding
    for the PMC.
    
    Signed-off-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
    Acked-by: Rob Herring <rob.herring@calxeda.com>
    Acked-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 459f01a4a546..d5f5083880f1 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -20,6 +20,7 @@ extern void __init at91_init_sram(int bank, unsigned long base,
 extern void __init at91rm9200_set_type(int type);
 extern void __init at91_initialize(unsigned long main_clock);
 extern void __init at91x40_initialize(unsigned long main_clock);
+extern void __init at91_dt_initialize(void);
 
  /* Interrupts */
 extern void __init at91_init_irq_default(void);

commit 8014d6f4dd074d4d248d3de7f63348fa2568476b
Author: Nicolas Ferre <nicolas.ferre@atmel.com>
Date:   Tue Feb 14 18:08:14 2012 +0100

    ARM: at91: AIC and GPIO IRQ device tree initialization
    
    Both AIC and GPIO controllers are now using the standard of_irq_init()
    function to initialize IRQs in case of DT use.
    The DT specific initialization functions are now separated from the
    non-DT case and are now using "linear" irq domains.
    The .map() irqdomain operation is responsible for positioning the IRQ
    handlers. In AIC case, the Linux IRQ number is directly programmed in
    the hardware to avoid an additional reverse mapping operation.
    The AIC position its irq domain as the "default" irq domain.
    
    For DT case, the priority is not yet filled in the SMR. It will be the
    subject of another patch.
    
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 4cad85e57470..459f01a4a546 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -9,6 +9,7 @@
  */
 
 #include <linux/clkdev.h>
+#include <linux/of.h>
 
  /* Map io */
 extern void __init at91_map_io(void);
@@ -25,6 +26,9 @@ extern void __init at91_init_irq_default(void);
 extern void __init at91_init_interrupts(unsigned int priority[]);
 extern void __init at91x40_init_interrupts(unsigned int priority[]);
 extern void __init at91_aic_init(unsigned int priority[]);
+extern int  __init at91_aic_of_init(struct device_node *node,
+				    struct device_node *parent);
+
 
  /* Timer */
 struct sys_timer;
@@ -84,5 +88,7 @@ struct at91_gpio_bank {
 };
 extern void __init at91_gpio_init(struct at91_gpio_bank *, int nr_banks);
 extern void __init at91_gpio_irq_setup(void);
+extern int  __init at91_gpio_of_irq_setup(struct device_node *node,
+					  struct device_node *parent);
 
 extern int at91_extern_irq;

commit f363c407b42c467d06675c852e55f26adb959915
Author: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
Date:   Mon Feb 13 12:58:53 2012 +0800

    ARM: at91: make sdram/ddr register base soc independent
    
    Signed-off-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
    Acked-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index aec7fd054cc4..4cad85e57470 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -71,6 +71,9 @@ extern void at91_ioremap_shdwc(u32 base_addr);
 /* Matrix */
 extern void at91_ioremap_matrix(u32 base_addr);
 
+/* Ram Controler */
+extern void at91_ioremap_ramc(int id, u32 addr, u32 size);
+
  /* GPIO */
 #define AT91RM9200_PQFP		3	/* AT91RM9200 PQFP package has 3 banks */
 #define AT91RM9200_BGA		4	/* AT91RM9200 BGA package has 4 banks */

commit 5e9cf5e18d4bed39467cc020dcd3e66e8a8cd231
Author: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
Date:   Mon Feb 20 11:07:39 2012 +0100

    ARM: at91: make ST (System Timer) soc independent
    
    Signed-off-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
    Acked-by: Nicolas Ferre <nicolas.ferre@atmel.com>
    Reviewed-by: Ryan Mallon <rmallon@gmail.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index dc74ec043576..aec7fd054cc4 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -28,6 +28,7 @@ extern void __init at91_aic_init(unsigned int priority[]);
 
  /* Timer */
 struct sys_timer;
+extern void at91rm9200_ioremap_st(u32 addr);
 extern struct sys_timer at91rm9200_timer;
 extern void at91sam926x_ioremap_pit(u32 addr);
 extern struct sys_timer at91sam926x_timer;

commit 4342d6479e249c0cc952ff71f22167e4276a4927
Author: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
Date:   Sun Nov 27 23:15:50 2011 +0800

    ARM: at91: make matrix register base soc independent
    
    Signed-off-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
    Acked-by: Nicolas Ferre <nicolas.ferre@atmel.com>
    Reviewed-by: Ryan Mallon <rmallon@gmail.com>
    Cc: linux-usb@vger.kernel.org
    Cc: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 4e322f3492bf..dc74ec043576 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -67,6 +67,9 @@ extern void at91sam9g45_restart(char, const char *);
 /* shutdown */
 extern void at91_ioremap_shdwc(u32 base_addr);
 
+/* Matrix */
+extern void at91_ioremap_matrix(u32 base_addr);
+
  /* GPIO */
 #define AT91RM9200_PQFP		3	/* AT91RM9200 PQFP package has 3 banks */
 #define AT91RM9200_BGA		4	/* AT91RM9200 BGA package has 4 banks */

commit 0d78171672a30e8ec8084f54a557e9948260356d
Author: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
Date:   Sun Feb 5 20:25:32 2012 +0800

    ARM: at91: factorise duplicated at91sam9 idle
    
    Remove duplicated at91sam9xxxx_idle() functions introduced
    by commit c9dfafb "ARM: mach-at91: move special idle code out of line".
    Replace by a generic at91sam9_idle() function in setup.c common
    location.
    
    Signed-off-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
    Acked-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 7e8280e798c1..4e322f3492bf 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -56,6 +56,9 @@ struct device;
 extern void at91_irq_suspend(void);
 extern void at91_irq_resume(void);
 
+/* idle */
+extern void at91sam9_idle(void);
+
 /* reset */
 extern void at91_ioremap_rstc(u32 base_addr);
 extern void at91sam9_alt_restart(char, const char *);

commit 9918ceafd4a9e013572e03983f528017c29bb1cb
Author: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
Date:   Thu Jan 26 14:07:09 2012 +0100

    ARM: at91: code removal of CAP9 SoC
    
    Following removal announce and addition to feature-removal-schedule.txt,
    here is the actual source code deletion for Atmel CAP9 family.
    
    Signed-off-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
    Acked-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 594133451c0c..7e8280e798c1 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -45,7 +45,6 @@ extern void __init at91sam9261_set_console_clock(int id);
 extern void __init at91sam9263_set_console_clock(int id);
 extern void __init at91sam9rl_set_console_clock(int id);
 extern void __init at91sam9g45_set_console_clock(int id);
-extern void __init at91cap9_set_console_clock(int id);
 #ifdef CONFIG_AT91_PMC_UNIT
 extern int __init at91_clock_init(unsigned long main_clock);
 #else

commit 14f991a730f453a1c8f114ccb686f83e158fdd92
Author: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
Date:   Fri Nov 18 01:41:28 2011 +0800

    ARM: at91: Fix at91sam9g45 and at91cap9 reset
    
    As on the other sam9 we need to cleanly shutdown the DDRAM before rebooting.
    
    On those SoC the SDRAM/DDRAM controller is different. So, the assembly code
    ends up being not cleanly combined with previous at91sam9_alt_restart function.
    
    Signed-off-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
    Acked-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 62e508b71ec2..594133451c0c 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -60,6 +60,7 @@ extern void at91_irq_resume(void);
 /* reset */
 extern void at91_ioremap_rstc(u32 base_addr);
 extern void at91sam9_alt_restart(char, const char *);
+extern void at91sam9g45_restart(char, const char *);
 
 /* shutdown */
 extern void at91_ioremap_shdwc(u32 base_addr);

commit e9f68b5cc6160a473fc668054fd13f435fd4508b
Author: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
Date:   Fri Nov 18 01:25:52 2011 +0800

    ARM: at91: make rstc soc independent
    
    Signed-off-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
    Acked-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 4866b8180d66..62e508b71ec2 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -58,6 +58,7 @@ extern void at91_irq_suspend(void);
 extern void at91_irq_resume(void);
 
 /* reset */
+extern void at91_ioremap_rstc(u32 base_addr);
 extern void at91sam9_alt_restart(char, const char *);
 
 /* shutdown */

commit 40ba95fdf158713377d47736b1b3a9d75f4f2515
Merge: 70d84a6431d7 0575fb754dbf
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Sat Jan 7 11:51:28 2012 +0000

    Merge branch 'depends/rmk/restart' into next/cleanup
    
    Conflicts:
            arch/arm/mach-at91/at91cap9.c
            arch/arm/mach-at91/at91sam9260.c
            arch/arm/mach-at91/at91sam9261.c
            arch/arm/mach-at91/at91sam9263.c
            arch/arm/mach-at91/at91sam9g45.c
            arch/arm/mach-at91/at91sam9rl.c
            arch/arm/mach-exynos/cpu.c
            arch/arm/mach-shmobile/board-kota2.c
    
    This resolves a bunch of conflicts between the arm-soc tree
    and changes from the arm tree that have gone upstream.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>

commit 1b2073e7789429e6554e69b307d857d8f46a2e22
Author: Russell King <rmk+kernel@arm.linux.org.uk>
Date:   Thu Nov 3 09:53:29 2011 +0000

    ARM: restart: at91: use new restart hook
    
    Rather than using a private function pointer, use the existing
    arm_pm_restart function pointer instead.  We no longer need to enable
    the I-cache in at91sam9_alt_reset() as the caches will now be on when
    this function is called.
    
    Update the function names to use the 'restart' terminology rather than
    the 'reboot' terminology.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 938b34f57741..7f4503bc4cbb 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -57,7 +57,7 @@ extern void at91_irq_suspend(void);
 extern void at91_irq_resume(void);
 
 /* reset */
-extern void at91sam9_alt_reset(void);
+extern void at91sam9_alt_restart(char, const char *);
 
  /* GPIO */
 #define AT91RM9200_PQFP		3	/* AT91RM9200 PQFP package has 3 banks */
@@ -71,5 +71,4 @@ struct at91_gpio_bank {
 extern void __init at91_gpio_init(struct at91_gpio_bank *, int nr_banks);
 extern void __init at91_gpio_irq_setup(void);
 
-extern void (*at91_arch_reset)(void);
 extern int at91_extern_irq;

commit 619d4a4b40f44c1b45263a0e0c9598e3139a1fec
Author: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
Date:   Sun Nov 13 13:00:58 2011 +0800

    ARM: at91: switch gpio clock to clkdev
    
    Signed-off-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
    Cc: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index bc1776406f42..40309588f360 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -70,7 +70,6 @@ extern void at91_ioremap_shdwc(u32 base_addr);
 struct at91_gpio_bank {
 	unsigned short id;		/* peripheral ID */
 	unsigned long regbase;		/* offset from system peripheral base */
-	struct clk *clock;		/* associated clock */
 };
 extern void __init at91_gpio_init(struct at91_gpio_bank *, int nr_banks);
 extern void __init at91_gpio_irq_setup(void);

commit f22deee523e0ff49c3be01dd6f979d374230725a
Author: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
Date:   Tue Nov 1 01:23:20 2011 +0800

    ARM: at91: make shutdown controler soc independent
    
    Signed-off-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
    Acked-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 8196ecc37ed2..bc1776406f42 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -60,6 +60,9 @@ extern void at91_irq_resume(void);
 /* reset */
 extern void at91sam9_alt_reset(void);
 
+/* shutdown */
+extern void at91_ioremap_shdwc(u32 base_addr);
+
  /* GPIO */
 #define AT91RM9200_PQFP		3	/* AT91RM9200 PQFP package has 3 banks */
 #define AT91RM9200_BGA		4	/* AT91RM9200 BGA package has 4 banks */

commit 4ab0c5998d327cba5b7e0dc8ce67f45859997669
Author: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
Date:   Sun Sep 18 22:29:50 2011 +0800

    ARM: at91: make pit register base soc independent
    
    Signed-off-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
    Acked-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 11d7297eee22..8196ecc37ed2 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -29,6 +29,7 @@ extern void __init at91_aic_init(unsigned int priority[]);
  /* Timer */
 struct sys_timer;
 extern struct sys_timer at91rm9200_timer;
+extern void at91sam926x_ioremap_pit(u32 addr);
 extern struct sys_timer at91sam926x_timer;
 extern struct sys_timer at91x40_timer;
 

commit 80e91cb8023fbc07b2410c4ce5a2da12fbcebca4
Author: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
Date:   Fri Sep 16 23:37:50 2011 +0800

    ARM: at91: make gpio register base soc independant
    
    Signed-off-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
    Acked-by: Nicolas Ferre <nicolas.ferre@atmel.com>
    Reviewed-by: Ryan Mallon <rmallon@gmail.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 938b34f57741..11d7297eee22 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -65,7 +65,7 @@ extern void at91sam9_alt_reset(void);
 
 struct at91_gpio_bank {
 	unsigned short id;		/* peripheral ID */
-	unsigned long offset;		/* offset from system peripheral base */
+	unsigned long regbase;		/* offset from system peripheral base */
 	struct clk *clock;		/* associated clock */
 };
 extern void __init at91_gpio_init(struct at91_gpio_bank *, int nr_banks);

commit f0051d82a68abcf35418d49db1c82e6f0e514d78
Author: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
Date:   Tue May 10 03:20:09 2011 +0800

    at91: factorize sram init
    
    Signed-off-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
    Cc: Nicolas Ferre <nicolas.ferre@atmel.com>
    Cc: Patrice Vilchez <patrice.vilchez@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index a9d6ed4dbbc8..938b34f57741 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -12,6 +12,8 @@
 
  /* Map io */
 extern void __init at91_map_io(void);
+extern void __init at91_init_sram(int bank, unsigned long base,
+				  unsigned int length);
 
  /* Processors */
 extern void __init at91rm9200_set_type(int type);

commit 465393749da3a3229f6067246c7e8f97f7cc833d
Author: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
Date:   Sun Apr 24 18:20:28 2011 +0800

    at91: move clock subsystem init to soc generic init
    
    Signed-off-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
    Cc: Nicolas Ferre <nicolas.ferre@atmel.com>
    Cc: Patrice Vilchez <patrice.vilchez@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index ce113900258e..a9d6ed4dbbc8 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -31,7 +31,6 @@ extern struct sys_timer at91sam926x_timer;
 extern struct sys_timer at91x40_timer;
 
  /* Clocks */
-extern int __init at91_clock_init(unsigned long main_clock);
 /*
  * function to specify the clock of the default console. As we do not
  * use the device/driver bus, the dev_name is not intialize. So we need
@@ -44,6 +43,11 @@ extern void __init at91sam9263_set_console_clock(int id);
 extern void __init at91sam9rl_set_console_clock(int id);
 extern void __init at91sam9g45_set_console_clock(int id);
 extern void __init at91cap9_set_console_clock(int id);
+#ifdef CONFIG_AT91_PMC_UNIT
+extern int __init at91_clock_init(unsigned long main_clock);
+#else
+static int inline at91_clock_init(unsigned long main_clock) { return 0; }
+#endif
 struct device;
 
  /* Power Management */

commit 92100c12ca1bc5f347ff41c1413f9db07c4d276c
Author: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
Date:   Sat Apr 23 15:28:34 2011 +0800

    at91: factorize at91 interrupts init to soc
    
    they are the same except the default priority
    
    Signed-off-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
    Cc: Nicolas Ferre <nicolas.ferre@atmel.com>
    Cc: Patrice Vilchez <patrice.vilchez@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 3e9af0df13f0..ce113900258e 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -19,14 +19,9 @@ extern void __init at91_initialize(unsigned long main_clock);
 extern void __init at91x40_initialize(unsigned long main_clock);
 
  /* Interrupts */
-extern void __init at91rm9200_init_interrupts(unsigned int priority[]);
-extern void __init at91sam9260_init_interrupts(unsigned int priority[]);
-extern void __init at91sam9261_init_interrupts(unsigned int priority[]);
-extern void __init at91sam9263_init_interrupts(unsigned int priority[]);
-extern void __init at91sam9rl_init_interrupts(unsigned int priority[]);
-extern void __init at91sam9g45_init_interrupts(unsigned int priority[]);
+extern void __init at91_init_irq_default(void);
+extern void __init at91_init_interrupts(unsigned int priority[]);
 extern void __init at91x40_init_interrupts(unsigned int priority[]);
-extern void __init at91cap9_init_interrupts(unsigned int priority[]);
 extern void __init at91_aic_init(unsigned int priority[]);
 
  /* Timer */

commit 21d08b9d5536ac418bbce4f419fe2b528b7ddf31
Author: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
Date:   Sat Apr 23 15:28:34 2011 +0800

    at91: introduce commom AT91_BASE_SYS
    
    On all at91 except rm9200 and x40 have the System Controller starts
    at address 0xffffc000 and has a size of 16KiB.
    
    On rm9200 it's start at 0xfffe4000 of 111KiB with non reserved data starting
    at 0xfffff000
    
    This patch removes the individual definitions of AT91_BASE_SYS and
    replaces them with a common version at base 0xfffffc000 and size 16KiB
    and map the same memory space
    
    Signed-off-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
    Cc: Nicolas Ferre <nicolas.ferre@atmel.com>
    Cc: Patrice Vilchez <patrice.vilchez@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 8ff3418f3430..3e9af0df13f0 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -11,25 +11,12 @@
 #include <linux/clkdev.h>
 
  /* Map io */
-extern void __init at91rm9200_map_io(void);
-extern void __init at91sam9260_map_io(void);
-extern void __init at91sam9261_map_io(void);
-extern void __init at91sam9263_map_io(void);
-extern void __init at91sam9rl_map_io(void);
-extern void __init at91sam9g45_map_io(void);
-extern void __init at91x40_map_io(void);
-extern void __init at91cap9_map_io(void);
+extern void __init at91_map_io(void);
 
  /* Processors */
 extern void __init at91rm9200_set_type(int type);
-extern void __init at91rm9200_initialize(unsigned long main_clock);
-extern void __init at91sam9260_initialize(unsigned long main_clock);
-extern void __init at91sam9261_initialize(unsigned long main_clock);
-extern void __init at91sam9263_initialize(unsigned long main_clock);
-extern void __init at91sam9rl_initialize(unsigned long main_clock);
-extern void __init at91sam9g45_initialize(unsigned long main_clock);
+extern void __init at91_initialize(unsigned long main_clock);
 extern void __init at91x40_initialize(unsigned long main_clock);
-extern void __init at91cap9_initialize(unsigned long main_clock);
 
  /* Interrupts */
 extern void __init at91rm9200_init_interrupts(unsigned int priority[]);

commit 7a2207a0e1142a9b214b323e43ab2ecc592e5b0e
Author: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
Date:   Tue May 17 20:51:14 2011 +0800

    at91: drop at572d940hf support
    
    no-one use it and it's nearly impossible get a board to work on it
    and the Mainline implementation was never finished
    
    Signed-off-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
    Cc: Nicolas Ferre <nicolas.ferre@atmel.com>
    Cc: Patrice Vilchez <patrice.vilchez@atmel.com>
    Cc: Andrew Victor <linux@maxim.org.za>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 5783bd1b6c40..8ff3418f3430 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -19,7 +19,6 @@ extern void __init at91sam9rl_map_io(void);
 extern void __init at91sam9g45_map_io(void);
 extern void __init at91x40_map_io(void);
 extern void __init at91cap9_map_io(void);
-extern void __init at572d940hf_map_io(void);
 
  /* Processors */
 extern void __init at91rm9200_set_type(int type);
@@ -31,7 +30,6 @@ extern void __init at91sam9rl_initialize(unsigned long main_clock);
 extern void __init at91sam9g45_initialize(unsigned long main_clock);
 extern void __init at91x40_initialize(unsigned long main_clock);
 extern void __init at91cap9_initialize(unsigned long main_clock);
-extern void __init at572d940hf_initialize(unsigned long main_clock);
 
  /* Interrupts */
 extern void __init at91rm9200_init_interrupts(unsigned int priority[]);
@@ -42,7 +40,6 @@ extern void __init at91sam9rl_init_interrupts(unsigned int priority[]);
 extern void __init at91sam9g45_init_interrupts(unsigned int priority[]);
 extern void __init at91x40_init_interrupts(unsigned int priority[]);
 extern void __init at91cap9_init_interrupts(unsigned int priority[]);
-extern void __init at572d940hf_init_interrupts(unsigned int priority[]);
 extern void __init at91_aic_init(unsigned int priority[]);
 
  /* Timer */
@@ -65,7 +62,6 @@ extern void __init at91sam9263_set_console_clock(int id);
 extern void __init at91sam9rl_set_console_clock(int id);
 extern void __init at91sam9g45_set_console_clock(int id);
 extern void __init at91cap9_set_console_clock(int id);
-extern void __init at572d940hf_set_console_clock(int id);
 struct device;
 
  /* Power Management */

commit e57556e3b6dcbf9b459cd503b061457b6ed1758f
Author: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
Date:   Sun Apr 24 11:40:22 2011 +0800

    at91rm9200: introduce at91rm9200_set_type to specficy cpu package
    
    as we can not detect it
    by defaut the type will be bga
    introduce cpu_is_at91rm9200_bga and cpu_is_at91rm9200_pqfp
    
    Signed-off-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
    Cc: Nicolas Ferre <nicolas.ferre@atmel.com>
    Cc: Patrice Vilchez <patrice.vilchez@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index ecba94ee520b..5783bd1b6c40 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -22,7 +22,8 @@ extern void __init at91cap9_map_io(void);
 extern void __init at572d940hf_map_io(void);
 
  /* Processors */
-extern void __init at91rm9200_initialize(unsigned long main_clock, unsigned short banks);
+extern void __init at91rm9200_set_type(int type);
+extern void __init at91rm9200_initialize(unsigned long main_clock);
 extern void __init at91sam9260_initialize(unsigned long main_clock);
 extern void __init at91sam9261_initialize(unsigned long main_clock);
 extern void __init at91sam9263_initialize(unsigned long main_clock);

commit bd60299594fb1d28ae66563c9e76a0b89b0412cf
Author: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
Date:   Wed Feb 2 07:27:07 2011 +0100

    at91: switch to CLKDEV_LOOKUP
    
    we do not change the clock naming convention so does not need to switch
    the AVR32 yet
    
    Signed-off-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
    Acked-by: Nicolas Ferre <nicolas.ferre@atmel.com>
    Cc: Patrice Vilchez <patrice.vilchez@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 50d46fa9ddb6..ecba94ee520b 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -8,6 +8,8 @@
  * published by the Free Software Foundation.
  */
 
+#include <linux/clkdev.h>
+
  /* Map io */
 extern void __init at91rm9200_map_io(void);
 extern void __init at91sam9260_map_io(void);
@@ -50,8 +52,20 @@ extern struct sys_timer at91x40_timer;
 
  /* Clocks */
 extern int __init at91_clock_init(unsigned long main_clock);
+/*
+ * function to specify the clock of the default console. As we do not
+ * use the device/driver bus, the dev_name is not intialize. So we need
+ * to link the clock to a specific con_id only "usart"
+ */
+extern void __init at91rm9200_set_console_clock(int id);
+extern void __init at91sam9260_set_console_clock(int id);
+extern void __init at91sam9261_set_console_clock(int id);
+extern void __init at91sam9263_set_console_clock(int id);
+extern void __init at91sam9rl_set_console_clock(int id);
+extern void __init at91sam9g45_set_console_clock(int id);
+extern void __init at91cap9_set_console_clock(int id);
+extern void __init at572d940hf_set_console_clock(int id);
 struct device;
-extern void __init at91_clock_associate(const char *id, struct device *dev, const char *func);
 
  /* Power Management */
 extern void at91_irq_suspend(void);

commit 1b021a3b23a40be89c4f3fbe6f4696aa15141f26
Author: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
Date:   Thu Apr 28 20:19:32 2011 +0800

    at91: fix map_io init usage
    
    switch early init to init_early and introduce soc map_io
    
    with this Patch we will not do any more early device setup during the map io
    
    tks to Russell to point the new call back
    
    Signed-off-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com>
    Cc: Nicolas Ferre <nicolas.ferre@atmel.com>
    Cc: Patrice Vilchez <patrice.vilchez@atmel.com>
    Acked-by: Russell King <rmk+kernel@arm.linux.org.uk>
    Acked-by: Andrew Victor <linux@maxim.org.za>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 0c66deb2db39..50d46fa9ddb6 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -8,6 +8,17 @@
  * published by the Free Software Foundation.
  */
 
+ /* Map io */
+extern void __init at91rm9200_map_io(void);
+extern void __init at91sam9260_map_io(void);
+extern void __init at91sam9261_map_io(void);
+extern void __init at91sam9263_map_io(void);
+extern void __init at91sam9rl_map_io(void);
+extern void __init at91sam9g45_map_io(void);
+extern void __init at91x40_map_io(void);
+extern void __init at91cap9_map_io(void);
+extern void __init at572d940hf_map_io(void);
+
  /* Processors */
 extern void __init at91rm9200_initialize(unsigned long main_clock, unsigned short banks);
 extern void __init at91sam9260_initialize(unsigned long main_clock);

commit bb413db591d53c29292868577068fa822b84da82
Author: Nicolas Ferre <nicolas.ferre@atmel.com>
Date:   Thu Oct 14 19:14:00 2010 +0200

    AT91: reset: extend alternate reset procedure to several chips
    
    Several at91sam9 chips need the alternate reset procedure to be sure to halt
    SDRAM smoothly before resetting the chip.
    This is an extension of previous patch "Fix AT91SAM9G20 reset" to all chips
    affected.
    
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 65c3dc5ba0d0..0c66deb2db39 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -46,6 +46,9 @@ extern void __init at91_clock_associate(const char *id, struct device *dev, cons
 extern void at91_irq_suspend(void);
 extern void at91_irq_resume(void);
 
+/* reset */
+extern void at91sam9_alt_reset(void);
+
  /* GPIO */
 #define AT91RM9200_PQFP		3	/* AT91RM9200 PQFP package has 3 banks */
 #define AT91RM9200_BGA		4	/* AT91RM9200 BGA package has 4 banks */

commit 5e38efae9635436efa1e4952cf953085839a7121
Author: Andrew Victor <linux@maxim.org.za>
Date:   Tue Dec 15 21:57:27 2009 +0100

    ARM: 5850/1: [AT91] AT572D940HF processor support
    
    Add support for the Atmel AT572D940HF processor (DIOPSIS range).
    This processor integrates an ARM926 core, a DSP and the SoC
    peripherals usually found on an AT91 processor (USART, SSC, SPI, TWI,
    CAN, etc)
    
    Signed-off-by: Antonio R. Costa <costa.antonior@gmail.com>
    Signed-off-by: Andrew Victor <linux@maxim.org.za>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 88e413b38480..65c3dc5ba0d0 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -17,6 +17,7 @@ extern void __init at91sam9rl_initialize(unsigned long main_clock);
 extern void __init at91sam9g45_initialize(unsigned long main_clock);
 extern void __init at91x40_initialize(unsigned long main_clock);
 extern void __init at91cap9_initialize(unsigned long main_clock);
+extern void __init at572d940hf_initialize(unsigned long main_clock);
 
  /* Interrupts */
 extern void __init at91rm9200_init_interrupts(unsigned int priority[]);
@@ -27,6 +28,7 @@ extern void __init at91sam9rl_init_interrupts(unsigned int priority[]);
 extern void __init at91sam9g45_init_interrupts(unsigned int priority[]);
 extern void __init at91x40_init_interrupts(unsigned int priority[]);
 extern void __init at91cap9_init_interrupts(unsigned int priority[]);
+extern void __init at572d940hf_init_interrupts(unsigned int priority[]);
 extern void __init at91_aic_init(unsigned int priority[]);
 
  /* Timer */

commit 789b23bc40a67d9a19bedc2655c6bcab79bcabd8
Author: Nicolas Ferre <nicolas.ferre@atmel.com>
Date:   Fri Jun 26 15:36:58 2009 +0100

    [ARM] 5572/1: at91: Support for at91sam9g45 series: core chip & board support
    
    Here are the at91 specific files dedicated to the at91sam9g45 series. They
    mimic the traditional at91 way of managing chips & boards.
    
    The first board that embeds at91sam9g45 chip is the AT91SAM9G45-EKES. In
    the future, the main board for this 9g45 series will be the
    AT91SAM9M10G45-EK (I choose this last name for the board file).
    
    Simple drivers are enabled in _devices and board- files. Newer peripheral
    support will be added in future patches.
    
    Incuded peripherals support (for now):
    - USART
    - SPI
    - Ethernet
    - NAND flash
    - LCD
    - gpio/joystick/buttons
    - leds and pwm
    
    Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>
    Acked-by: Andrew Victor <linux@maxim.org.za>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index b5daf7f5e011..88e413b38480 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -14,6 +14,7 @@ extern void __init at91sam9260_initialize(unsigned long main_clock);
 extern void __init at91sam9261_initialize(unsigned long main_clock);
 extern void __init at91sam9263_initialize(unsigned long main_clock);
 extern void __init at91sam9rl_initialize(unsigned long main_clock);
+extern void __init at91sam9g45_initialize(unsigned long main_clock);
 extern void __init at91x40_initialize(unsigned long main_clock);
 extern void __init at91cap9_initialize(unsigned long main_clock);
 
@@ -23,6 +24,7 @@ extern void __init at91sam9260_init_interrupts(unsigned int priority[]);
 extern void __init at91sam9261_init_interrupts(unsigned int priority[]);
 extern void __init at91sam9263_init_interrupts(unsigned int priority[]);
 extern void __init at91sam9rl_init_interrupts(unsigned int priority[]);
+extern void __init at91sam9g45_init_interrupts(unsigned int priority[]);
 extern void __init at91x40_init_interrupts(unsigned int priority[]);
 extern void __init at91cap9_init_interrupts(unsigned int priority[]);
 extern void __init at91_aic_init(unsigned int priority[]);

commit f373e8c0639f1720d2d0fe414990f504e113c2ba
Author: Ryan Mallon <ryan@bluewatersys.com>
Date:   Tue Feb 10 21:02:08 2009 +0100

    [ARM] 5373/2: Add gpiolib support to AT91
    
    Add support for gpiolib, including debugfs output, to the AT91 family.
    The at91_get/set_gpio_value calls still exist since they are used by the
    atmel serial driver.
    
    Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 7b9ce7a336b0..b5daf7f5e011 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -47,9 +47,6 @@ extern void at91_irq_resume(void);
 #define AT91RM9200_BGA		4	/* AT91RM9200 BGA package has 4 banks */
 
 struct at91_gpio_bank {
-	unsigned chipbase;		/* bank's first GPIO number */
-	void __iomem *regbase;		/* base of register bank */
-	struct at91_gpio_bank *next;	/* bank sharing same IRQ/clock/... */
 	unsigned short id;		/* peripheral ID */
 	unsigned long offset;		/* offset from system peripheral base */
 	struct clk *clock;		/* associated clock */

commit e83aff58bf1b7e6b355a0cfa206e9d3aebe5623f
Author: David Brownell <david-b@pacbell.net>
Date:   Fri Jan 4 18:30:24 2008 +0100

    [ARM] 4739/1: at91sam9263: make gpio bank C and D irqs work
    
    On the at91sam9263, IRQs for GPIO banks C and D don't currently work.
    This is because banks C, D, and E share one clock and toplevel IRQ, but
    the AT91 code setting up and handling GPIO IRQs expects no sharing.
    This patch:
    
     - Fixes GPIO IRQ setup and handling to cope with GPIO banks that are
       shared like on sam9263 chips, by setting up a list of those banks
       and making the IRQ dispatching logic scan that list.
    
     - Precomputes the address of each bank's registers, saving it with
       other per-bank data so that it no longer needs to be constantly
       recomputed during IRQs and other GPIO operations.  That shrinks
       hot-path code, while helping the GPIO bank irq updates.
    
     - Fixes a minor bug where IRQ_TYPE_NONE was wrongly rejected (it just
       means "use the default", which is "both edges" here).
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Acked-by: Andrew Victor <linux@maxim.org.za>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index b5daf7f5e011..7b9ce7a336b0 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -47,6 +47,9 @@ extern void at91_irq_resume(void);
 #define AT91RM9200_BGA		4	/* AT91RM9200 BGA package has 4 banks */
 
 struct at91_gpio_bank {
+	unsigned chipbase;		/* bank's first GPIO number */
+	void __iomem *regbase;		/* base of register bank */
+	struct at91_gpio_bank *next;	/* bank sharing same IRQ/clock/... */
 	unsigned short id;		/* peripheral ID */
 	unsigned long offset;		/* offset from system peripheral base */
 	struct clk *clock;		/* associated clock */

commit 2b3b3516b6eeea1464e205b2dde9ebc9b7dd2ec8
Author: Andrew Victor <linux@maxim.org.za>
Date:   Thu Jan 24 15:10:39 2008 +0100

    [ARM] 4764/1: [AT91] AT91CAP9 core support
    
    Add support for Atmel's AT91CAP9 Customizable Microcontroller family.
      <http://www.atmel.com/products/AT91CAP/Default.asp>
    
    Signed-off-by: Stelian Pop <stelian@popies.net>
    Signed-off-by: Andrew Victor <linux@maxim.org.za>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 77d4c0a37842..b5daf7f5e011 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -15,6 +15,7 @@ extern void __init at91sam9261_initialize(unsigned long main_clock);
 extern void __init at91sam9263_initialize(unsigned long main_clock);
 extern void __init at91sam9rl_initialize(unsigned long main_clock);
 extern void __init at91x40_initialize(unsigned long main_clock);
+extern void __init at91cap9_initialize(unsigned long main_clock);
 
  /* Interrupts */
 extern void __init at91rm9200_init_interrupts(unsigned int priority[]);
@@ -23,6 +24,7 @@ extern void __init at91sam9261_init_interrupts(unsigned int priority[]);
 extern void __init at91sam9263_init_interrupts(unsigned int priority[]);
 extern void __init at91sam9rl_init_interrupts(unsigned int priority[]);
 extern void __init at91x40_init_interrupts(unsigned int priority[]);
+extern void __init at91cap9_init_interrupts(unsigned int priority[]);
 extern void __init at91_aic_init(unsigned int priority[]);
 
  /* Timer */

commit 9a7e246b53a74ca0eed7c917aa274fbb25f61a68
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jul 30 02:39:02 2007 +0100

    [ARM] 4535/1: AT91x40 function prototypes
    
    Prototypes for the at91x40 CPU support functions.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Acked-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 68ed71a3e6c6..77d4c0a37842 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -14,6 +14,7 @@ extern void __init at91sam9260_initialize(unsigned long main_clock);
 extern void __init at91sam9261_initialize(unsigned long main_clock);
 extern void __init at91sam9263_initialize(unsigned long main_clock);
 extern void __init at91sam9rl_initialize(unsigned long main_clock);
+extern void __init at91x40_initialize(unsigned long main_clock);
 
  /* Interrupts */
 extern void __init at91rm9200_init_interrupts(unsigned int priority[]);
@@ -21,12 +22,14 @@ extern void __init at91sam9260_init_interrupts(unsigned int priority[]);
 extern void __init at91sam9261_init_interrupts(unsigned int priority[]);
 extern void __init at91sam9263_init_interrupts(unsigned int priority[]);
 extern void __init at91sam9rl_init_interrupts(unsigned int priority[]);
+extern void __init at91x40_init_interrupts(unsigned int priority[]);
 extern void __init at91_aic_init(unsigned int priority[]);
 
  /* Timer */
 struct sys_timer;
 extern struct sys_timer at91rm9200_timer;
 extern struct sys_timer at91sam926x_timer;
+extern struct sys_timer at91x40_timer;
 
  /* Clocks */
 extern int __init at91_clock_init(unsigned long main_clock);

commit 877d7720f5f67793b9b6027840d2c88ea25dc4c8
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Fri May 11 20:49:56 2007 +0100

    [ARM] 4370/3: AT91: Support for Atmel AT91SAM9RL processors.
    
    Add support for Atmel's new AT91SAM9RL range of processors.
    Includes similar peripherals as other AT91SAM9 processors, but with a
    High-speed USB controller and various sizes of internal SRAM.
    
    Signed-off-by: Nicolas Ferre <nicolas.ferre@rfo.atmel.com>
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index bda26221c522..68ed71a3e6c6 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -13,12 +13,14 @@ extern void __init at91rm9200_initialize(unsigned long main_clock, unsigned shor
 extern void __init at91sam9260_initialize(unsigned long main_clock);
 extern void __init at91sam9261_initialize(unsigned long main_clock);
 extern void __init at91sam9263_initialize(unsigned long main_clock);
+extern void __init at91sam9rl_initialize(unsigned long main_clock);
 
  /* Interrupts */
 extern void __init at91rm9200_init_interrupts(unsigned int priority[]);
 extern void __init at91sam9260_init_interrupts(unsigned int priority[]);
 extern void __init at91sam9261_init_interrupts(unsigned int priority[]);
 extern void __init at91sam9263_init_interrupts(unsigned int priority[]);
+extern void __init at91sam9rl_init_interrupts(unsigned int priority[]);
 extern void __init at91_aic_init(unsigned int priority[]);
 
  /* Timer */

commit b2c6561605da4802886cafe96432b8e2968e9edc
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Thu Feb 8 09:42:40 2007 +0100

    [ARM] 4145/2: AT91: Add support for AT91SAM9263 processor
    
    Add support for the Atmel AT91SAM9263 processor.  It is similar to the
    AT91SAM9260 but with more integrated peripherals, 5 GPIO banks, etc.
    
    Original patch from Nicolas Ferre.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
index 10ee37bf6d4d..bda26221c522 100644
--- a/arch/arm/mach-at91/generic.h
+++ b/arch/arm/mach-at91/generic.h
@@ -12,11 +12,13 @@
 extern void __init at91rm9200_initialize(unsigned long main_clock, unsigned short banks);
 extern void __init at91sam9260_initialize(unsigned long main_clock);
 extern void __init at91sam9261_initialize(unsigned long main_clock);
+extern void __init at91sam9263_initialize(unsigned long main_clock);
 
  /* Interrupts */
 extern void __init at91rm9200_init_interrupts(unsigned int priority[]);
 extern void __init at91sam9260_init_interrupts(unsigned int priority[]);
 extern void __init at91sam9261_init_interrupts(unsigned int priority[]);
+extern void __init at91sam9263_init_interrupts(unsigned int priority[]);
 extern void __init at91_aic_init(unsigned int priority[]);
 
  /* Timer */

commit 9d0412680e6c7b685ee466842047bcfb924d6dc5
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Mon Feb 5 11:42:07 2007 +0100

    [ARM] 4124/1: Rename mach-at91rm9200 and arch-at91rm9200 directories
    
    Now that Linux includes support for the Atmel AT91SAM9260 and
    AT91SAM9261 processors in addition to the original Atmel AT91RM9200
    (with support for more AT91 processors pending), the "mach-at91rm9200"
    and "arch-at91rm9200" directories should be renamed to indicate their
    more generic nature.
    
    The following git commands should be run BEFORE applying this patch:
      git-mv arch/arm/mach-at91rm9200 arch/arm/mach-at91
      git-mv include/asm-arm/arch-at91rm9200 include/asm-arm/arch-at91
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

diff --git a/arch/arm/mach-at91/generic.h b/arch/arm/mach-at91/generic.h
new file mode 100644
index 000000000000..10ee37bf6d4d
--- /dev/null
+++ b/arch/arm/mach-at91/generic.h
@@ -0,0 +1,49 @@
+/*
+ * linux/arch/arm/mach-at91/generic.h
+ *
+ *  Copyright (C) 2005 David Brownell
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+ /* Processors */
+extern void __init at91rm9200_initialize(unsigned long main_clock, unsigned short banks);
+extern void __init at91sam9260_initialize(unsigned long main_clock);
+extern void __init at91sam9261_initialize(unsigned long main_clock);
+
+ /* Interrupts */
+extern void __init at91rm9200_init_interrupts(unsigned int priority[]);
+extern void __init at91sam9260_init_interrupts(unsigned int priority[]);
+extern void __init at91sam9261_init_interrupts(unsigned int priority[]);
+extern void __init at91_aic_init(unsigned int priority[]);
+
+ /* Timer */
+struct sys_timer;
+extern struct sys_timer at91rm9200_timer;
+extern struct sys_timer at91sam926x_timer;
+
+ /* Clocks */
+extern int __init at91_clock_init(unsigned long main_clock);
+struct device;
+extern void __init at91_clock_associate(const char *id, struct device *dev, const char *func);
+
+ /* Power Management */
+extern void at91_irq_suspend(void);
+extern void at91_irq_resume(void);
+
+ /* GPIO */
+#define AT91RM9200_PQFP		3	/* AT91RM9200 PQFP package has 3 banks */
+#define AT91RM9200_BGA		4	/* AT91RM9200 BGA package has 4 banks */
+
+struct at91_gpio_bank {
+	unsigned short id;		/* peripheral ID */
+	unsigned long offset;		/* offset from system peripheral base */
+	struct clk *clock;		/* associated clock */
+};
+extern void __init at91_gpio_init(struct at91_gpio_bank *, int nr_banks);
+extern void __init at91_gpio_irq_setup(void);
+
+extern void (*at91_arch_reset)(void);
+extern int at91_extern_irq;
