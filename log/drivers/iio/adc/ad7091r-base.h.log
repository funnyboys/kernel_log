commit 260442cc5be4e652628f01ea6ac58f542e2c8e7a
Author: Paul Cercueil <paul.cercueil@analog.com>
Date:   Fri Nov 15 15:57:21 2019 +0200

    iio: adc: ad7091r5: Add scale and external VREF support
    
    The scale can now be obtained with the "in_voltage_scale" file.
    By default, the scale returned corresponds to the internal VREF of 2.5V.
    
    It is possible to use an external VREF (through the REFIN/REFOUT pin of
    the chip), by passing a regulator to the driver. The scale will then be
    calculated according to the voltage reported by the regulator.
    
    Signed-off-by: Paul Cercueil <paul.cercueil@analog.com>
    Co-developed-by: Beniamin Bia <beniamin.bia@analog.com>
    Signed-off-by: Beniamin Bia <beniamin.bia@analog.com>
    Signed-off-by: Jonathan Cameron <Jonathan.Cameron@huawei.com>

diff --git a/drivers/iio/adc/ad7091r-base.h b/drivers/iio/adc/ad7091r-base.h
index b0b4fe01a681..509748aef9b1 100644
--- a/drivers/iio/adc/ad7091r-base.h
+++ b/drivers/iio/adc/ad7091r-base.h
@@ -14,6 +14,7 @@ struct ad7091r_state;
 struct ad7091r_chip_info {
 	unsigned int num_channels;
 	const struct iio_chan_spec *channels;
+	unsigned int vref_mV;
 };
 
 extern const struct regmap_config ad7091r_regmap_config;

commit ca69300173b642ba64118200172171ea5967b6c5
Author: Paul Cercueil <paul.cercueil@analog.com>
Date:   Fri Nov 15 15:57:20 2019 +0200

    iio: adc: Add support for AD7091R5 ADC
    
    AD7091R5 is 4-Channel, I2C, Ultra Low Power,12-Bit ADC.
    
    This driver will also support AD7091R2/4/8 in the future.
    
    Datasheet:
    Link: https://www.analog.com/media/en/technical-documentation/data-sheets/ad7091r-5.pdf
    
    Signed-off-by: Paul Cercueil <paul.cercueil@analog.com>
    Co-developed-by: Beniamin Bia <beniamin.bia@analog.com>
    Signed-off-by: Beniamin Bia <beniamin.bia@analog.com>
    Signed-off-by: Jonathan Cameron <Jonathan.Cameron@huawei.com>

diff --git a/drivers/iio/adc/ad7091r-base.h b/drivers/iio/adc/ad7091r-base.h
new file mode 100644
index 000000000000..b0b4fe01a681
--- /dev/null
+++ b/drivers/iio/adc/ad7091r-base.h
@@ -0,0 +1,25 @@
+/* SPDX-License-Identifier: GPL-2.0 */
+/*
+ * AD7091RX Analog to Digital converter driver
+ *
+ * Copyright 2014-2019 Analog Devices Inc.
+ */
+
+#ifndef __DRIVERS_IIO_ADC_AD7091R_BASE_H__
+#define __DRIVERS_IIO_ADC_AD7091R_BASE_H__
+
+struct device;
+struct ad7091r_state;
+
+struct ad7091r_chip_info {
+	unsigned int num_channels;
+	const struct iio_chan_spec *channels;
+};
+
+extern const struct regmap_config ad7091r_regmap_config;
+
+int ad7091r_probe(struct device *dev, const char *name,
+		const struct ad7091r_chip_info *chip_info,
+		struct regmap *map, int irq);
+
+#endif /* __DRIVERS_IIO_ADC_AD7091R_BASE_H__ */
