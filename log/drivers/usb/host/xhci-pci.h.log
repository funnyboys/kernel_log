commit 78ef1b1ea193d1b977864f8c20968fcf4f1dbff4
Author: Vinod Koul <vkoul@kernel.org>
Date:   Tue May 19 15:00:02 2020 +0530

    usb: xhci: make symbols static
    
    When renesas module is not built, we get compiler warning on xhci driver
    with W=1
    
      CC [M]  drivers/usb/host/xhci-rcar.o
    drivers/usb/host/xhci-pci.h:13:5: warning: no previous prototype for ‘renesas_xhci_check_request_fw’ [-Wmissing-prototypes]
     int renesas_xhci_check_request_fw(struct pci_dev *dev,
         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    drivers/usb/host/xhci-pci.h:19:6: warning: no previous prototype for ‘renesas_xhci_pci_exit’ [-Wmissing-prototypes]
     void renesas_xhci_pci_exit(struct pci_dev *dev) { };
          ^~~~~~~~~~~~~~~~~~~~~
    
    We have defined these symbols when CONFIG_USB_XHCI_PCI_RENESAS is not
    defined, but missed making then static.
    
    Reported-by: kbuild test robot <lkp@intel.com>
    Fixes: 8bd5741e3145 ("usb: renesas-xhci: Add the renesas xhci driver")
    Signed-off-by: Vinod Koul <vkoul@kernel.org>
    Link: https://lore.kernel.org/r/20200519093002.1152144-1-vkoul@kernel.org
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/usb/host/xhci-pci.h b/drivers/usb/host/xhci-pci.h
index 4d749556e350..acd7cf0a1706 100644
--- a/drivers/usb/host/xhci-pci.h
+++ b/drivers/usb/host/xhci-pci.h
@@ -10,13 +10,13 @@ int renesas_xhci_check_request_fw(struct pci_dev *dev,
 void renesas_xhci_pci_exit(struct pci_dev *dev);
 
 #else
-int renesas_xhci_check_request_fw(struct pci_dev *dev,
-				  const struct pci_device_id *id)
+static int renesas_xhci_check_request_fw(struct pci_dev *dev,
+					 const struct pci_device_id *id)
 {
 	return 0;
 }
 
-void renesas_xhci_pci_exit(struct pci_dev *dev) { };
+static void renesas_xhci_pci_exit(struct pci_dev *dev) { };
 
 #endif
 

commit 8bd5741e3145e40c1e4f422fa5f1b9d7fe0644b3
Author: Christian Lamparter <chunkeey@googlemail.com>
Date:   Thu May 14 17:50:37 2020 +0530

    usb: renesas-xhci: Add the renesas xhci driver
    
    This add a new driver for renesas xhci which is basically a firmware
    loader for uPD720201 and uPD720202 w/o ROM. The xhci-pci driver will
    invoke this driver for loading/unloading on relevant devices.
    
    This patch adds a firmware loader for the uPD720201K8-711-BAC-A
    and uPD720202K8-711-BAA-A variant. Both of these chips are listed
    in Renesas' R19UH0078EJ0500 Rev.5.00 "User's Manual: Hardware" as
    devices which need the firmware loader on page 2 in order to
    work as they "do not support the External ROM".
    
    The "Firmware Download Sequence" is describe in chapter
    "7.1 FW Download Interface" R19UH0078EJ0500 Rev.5.00 page 131.
    
    The firmware "K2013080.mem" is available from a USB3.0 Host to
    PCIe Adapter (PP2U-E card) "Firmware download" archive. An
    alternative version can be sourced from Netgear's WNDR4700 GPL
    archives.
    
    The release notes of the PP2U-E's "Firmware Download" ver 2.0.1.3
    (2012-06-15) state that the firmware is for the following devices:
     - uPD720201 ES 2.0 sample whose revision ID is 2.
     - uPD720201 ES 2.1 sample & CS sample & Mass product, ID is 3.
     - uPD720202 ES 2.0 sample & CS sample & Mass product, ID is 2.
    
    [vkoul: fixed comments:
            used macros for timeout count and delay
            removed renesas_fw_alive_check
            cleaned renesas_fw_callback
            removed recursion for renesas_fw_download
            add register defines and field names
            move to a separate file
            make fw loader as sync probe so that we execute in probe and
            prevent race
            make xhci-pci-renesas a seprate module]
    
    Signed-off-by: Christian Lamparter <chunkeey@googlemail.com>
    Signed-off-by: Bjorn Andersson <bjorn.andersson@linaro.org>
    Signed-off-by: Vinod Koul <vkoul@kernel.org>
    Link: https://lore.kernel.org/r/20200514122039.300417-3-vkoul@kernel.org
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/usb/host/xhci-pci.h b/drivers/usb/host/xhci-pci.h
new file mode 100644
index 000000000000..4d749556e350
--- /dev/null
+++ b/drivers/usb/host/xhci-pci.h
@@ -0,0 +1,28 @@
+/* SPDX-License-Identifier: GPL-2.0 */
+/* Copyright (C) 2019-2020 Linaro Limited */
+
+#ifndef XHCI_PCI_H
+#define XHCI_PCI_H
+
+#if IS_ENABLED(CONFIG_USB_XHCI_PCI_RENESAS)
+int renesas_xhci_check_request_fw(struct pci_dev *dev,
+				  const struct pci_device_id *id);
+void renesas_xhci_pci_exit(struct pci_dev *dev);
+
+#else
+int renesas_xhci_check_request_fw(struct pci_dev *dev,
+				  const struct pci_device_id *id)
+{
+	return 0;
+}
+
+void renesas_xhci_pci_exit(struct pci_dev *dev) { };
+
+#endif
+
+struct xhci_driver_data {
+	u64 quirks;
+	const char *firmware;
+};
+
+#endif
