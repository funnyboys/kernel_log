commit 4a06e6fb97cb83410413a99a2d3c55215954b0d3
Author: Nathan Chancellor <natechancellor@gmail.com>
Date:   Mon May 14 07:03:53 2018 -0700

    staging: ks7010: Remove unused define
    
    After commit 6d6612deaf55 ("staging: ks7010: Remove unnecessary limit
    checks"), this define is not used anywhere. Remove it as well.
    
    Suggested-by: Dan Carpenter <dan.carpenter@oracle.com>
    Signed-off-by: Nathan Chancellor <natechancellor@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 11dd263d735f..7aaf8d780939 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -33,7 +33,6 @@ struct ks_wlan_parameter {
 	u8 preamble;
 	u8 power_mgmt;
 	u32 scan_type;
-#define BEACON_LOST_COUNT_MIN 0
 #define BEACON_LOST_COUNT_MAX 65535
 	u32 beacon_lost_count;
 	u32 rts;

commit 4cf2df756f6bda754abc070d44a1f05d6996de2e
Author: Sergio Paracuellos <sergio.paracuellos@gmail.com>
Date:   Sun May 13 20:35:44 2018 +0200

    staging: ks7010: replace not standard uint type to unsigned int
    
    The field 'wakeup_count' in 'ks_wlan_private' struct is declared
    as 'uint' which is not a standard type. Replace in favour of
    'unsigned int' which it is.
    
    Signed-off-by: Sergio Paracuellos <sergio.paracuellos@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 655f1e3a2157..11dd263d735f 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -513,7 +513,7 @@ struct ks_wlan_private {
 	unsigned long last_doze;
 	unsigned long last_wakeup;
 
-	uint wakeup_count;	/* for detect wakeup loop */
+	unsigned int wakeup_count;	/* for detect wakeup loop */
 };
 
 static inline void inc_txqhead(struct ks_wlan_private *priv)

commit d96f3a7cecdc399af19da3268f69d2d05b07093d
Author: Sergio Paracuellos <sergio.paracuellos@gmail.com>
Date:   Fri May 4 06:16:29 2018 +0200

    staging: ks7010: change type for rsn_enabled in wpa_status struct
    
    Field rsn_enabled included in wpa_status struct is declared as
    unsigned int but it is only be set using 0 and 1 values and
    in conditional if code is just being used as a boolean. Change
    its type to be a boolean.
    
    Signed-off-by: Sergio Paracuellos <sergio.paracuellos@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index dd42692de451..655f1e3a2157 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -338,7 +338,7 @@ struct mic_failure {
 
 struct wpa_status {
 	int wpa_enabled;
-	unsigned int rsn_enabled;
+	bool rsn_enabled;
 	int version;
 	int pairwise_suite;	/* unicast cipher */
 	int group_suite;	/* multicast cipher */

commit 1c800aabfd68b22795f01358d6b36c4cc5b12571
Author: Sergio Paracuellos <sergio.paracuellos@gmail.com>
Date:   Fri May 4 06:16:26 2018 +0200

    staging: ks7010: move two preprocessor definitions to ks_wlan.h
    
    In ks_wlan_translate_scan function there are two preprocessor
    definitions:
    
        - RSN_INFO_ELEM_ID
        - GENERIC_INFO_ELEM_ID
    
    These can be moved to common ks_wlan.h because they can be used
    in get_current_ap function instead of use hardcoded values.
    GENERIC_INFO_ELEM_ID has been renamed to WPA_INFO_ELEM_ID which
    is more clear.
    
    Signed-off-by: Sergio Paracuellos <sergio.paracuellos@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index fb080feb7202..dd42692de451 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -190,6 +190,9 @@ struct rsn_ie {
 	u8 body[RSN_IE_BODY_MAX];
 } __packed;
 
+#define WPA_INFO_ELEM_ID 0xdd
+#define RSN_INFO_ELEM_ID 0x30
+
 #define WPS_IE_BODY_MAX 255
 struct wps_ie {
 	u8 id;	/* 221 'dd <len> 00 50 F2 04' */

commit e765861cadc2dfc3da7227d0942aadaa68c33fd9
Author: Sergio Paracuellos <sergio.paracuellos@gmail.com>
Date:   Fri May 4 06:16:18 2018 +0200

    staging: ks7010: remove nonsense comment in ks_wlan.h file
    
    Header file ks_wlan.h has a lot of nonsense comments along
    the different declarations included on it. Most of them are
    just the same as the variable name. Just remove them all.
    
    Signed-off-by: Sergio Paracuellos <sergio.paracuellos@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index ad349efc3aeb..fb080feb7202 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -9,35 +9,35 @@
 #ifndef _KS_WLAN_H
 #define _KS_WLAN_H
 
-#include <linux/atomic.h>	/* struct atomic_t */
+#include <linux/atomic.h>
 #include <linux/circ_buf.h>
-#include <linux/completion.h>	/* struct completion */
-#include <linux/netdevice.h>	/* struct net_device_stats,  struct sk_buff */
-#include <linux/sched.h>	/* wait_queue_head_t */
-#include <linux/spinlock.h>	/* spinlock_t */
+#include <linux/completion.h>
+#include <linux/netdevice.h>
+#include <linux/sched.h>
+#include <linux/spinlock.h>
 #include <linux/wireless.h>
 
 struct ks_wlan_parameter {
-	u8 operation_mode;	/* Operation Mode */
-	u8 channel;	/*  Channel */
-	u8 tx_rate;	/*  Transmit Rate */
+	u8 operation_mode;
+	u8 channel;
+	u8 tx_rate;
 	struct {
 		u8 size;
 		u8 body[16];
 	} rate_set;
-	u8 bssid[ETH_ALEN];	/* BSSID */
+	u8 bssid[ETH_ALEN];
 	struct {
 		u8 size;
 		u8 body[32 + 1];
-	} ssid;	/*  SSID */
-	u8 preamble;	/*  Preamble */
+	} ssid;
+	u8 preamble;
 	u8 power_mgmt;
-	u32 scan_type;	/*  AP List Scan Type */
+	u32 scan_type;
 #define BEACON_LOST_COUNT_MIN 0
 #define BEACON_LOST_COUNT_MAX 65535
-	u32 beacon_lost_count;	/*  Beacon Lost Count */
-	u32 rts;	/*  RTS Threashold */
-	u32 fragment;	/*  Fragmentation Threshold */
+	u32 beacon_lost_count;
+	u32 rts;
+	u32 fragment;
 	u32 privacy_invoked;
 	u32 wep_index;
 	struct {
@@ -45,9 +45,9 @@ struct ks_wlan_parameter {
 		u8 val[13 * 2 + 1];
 	} wep_key[4];
 	u16 authenticate_type;
-	u16 phy_type;	/* 11b/11g/11bg mode type */
-	u16 cts_mode;	/* for 11g/11bg mode cts mode */
-	u16 phy_info_timer;	/* phy information timer */
+	u16 phy_type;
+	u16 cts_mode;
+	u16 phy_info_timer;
 };
 
 enum {
@@ -155,7 +155,7 @@ enum {
 	SME_WEP_SET_CONFIRM,
 	SME_TERMINATE,
 
-	SME_EVENT_SIZE	/* end */
+	SME_EVENT_SIZE
 };
 
 /* SME Status */
@@ -330,7 +330,7 @@ struct mic_failure {
 	u16 failure;	/* MIC Failure counter 0 or 1 or 2 */
 	u16 counter;	/* 1sec counter 0-60 */
 	u32 last_failure_time;
-	int stop;	/* stop flag */
+	int stop;
 };
 
 struct wpa_status {
@@ -339,7 +339,7 @@ struct wpa_status {
 	int version;
 	int pairwise_suite;	/* unicast cipher */
 	int group_suite;	/* multicast cipher */
-	int key_mgmt_suite;	/* authentication key management suite */
+	int key_mgmt_suite;
 	int auth_alg;
 	int txkey;
 	struct wpa_key key[WPA_KEY_INDEX_MAX];
@@ -485,17 +485,16 @@ struct ks_wlan_private {
 	unsigned char firmware_version[128 + 1];
 	int version_size;
 
-	bool mac_address_valid;	/* Mac Address Status */
+	bool mac_address_valid;
 
 	int dev_state;
 
 	struct sk_buff *skb;
 	unsigned int cur_rx;	/* Index into the Rx buffer of next Rx pkt. */
-	/* spinlock_t lock; */
 #define FORCE_DISCONNECT    0x80000000
 #define CONNECT_STATUS_MASK 0x7FFFFFFF
-	u32 connect_status;	/* connect status */
-	int infra_status;	/* Infractructure status */
+	u32 connect_status;
+	int infra_status;
 	u8 scan_ssid_len;
 	u8 scan_ssid[IW_ESSID_MAX_SIZE + 1];
 	struct local_gain gain;

commit 075116293e8b2ea6365f0b98963d925486900b58
Author: Sergio Paracuellos <sergio.paracuellos@gmail.com>
Date:   Fri May 4 06:16:07 2018 +0200

    staging: ks7010: avoid ks_sdio_card dependency in ks_wlan header
    
    ks_wlan_private struct has a pointer to struct ks_sdio_card in its
    fields. Because of that a forward declaration in needed in ks_wlan.h
    header and also it makes necessary to have ks_sdio_card public in
    a ks7010_sdio.h header. Changing this pointer into a void pointer
    makes no longer necessary to have ks7010_sdio.h header as well as
    removes the forward dependency in ks_wlan.h. Declaration of
    ks_sdio_card has been moved to ks7010_sdio.c source file and To make
    code cleaner inside this file a new ks7010_to_func function has been
    added. The code has been updated to this changes.
    
    Signed-off-by: Sergio Paracuellos <sergio.paracuellos@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index d73f6222973b..ad349efc3aeb 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -428,11 +428,9 @@ struct rx_device {
 	spinlock_t rx_dev_lock;	/* protect access to the queue */
 };
 
-struct ks_sdio_card;
-
 struct ks_wlan_private {
 	/* hardware information */
-	struct ks_sdio_card *ks_sdio_card;
+	void *if_hw;
 	struct workqueue_struct *wq;
 	struct delayed_work rw_dwork;
 	struct tasklet_struct rx_bh_task;

commit 57c6f08dfe27b81cf39f4b7d1d4a24bb1f49477b
Author: Sergio Paracuellos <sergio.paracuellos@gmail.com>
Date:   Fri May 4 06:16:06 2018 +0200

    staging: ks7010: move tx and rx queues definitions into ks_wlan.h header
    
    There are some definitions for rx and tx queues in ks7010_sdio
    which is not the best place to put them. Changing them into the
    ks_wlan header file there is no need to explicity include ks7010_sdio.h
    which makes no sense at all and can be resolved easily using
    forward declarations. The functions related with the queues circular
    buffers have been moved also into this header.
    
    Signed-off-by: Sergio Paracuellos <sergio.paracuellos@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 5070af86115f..d73f6222973b 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -10,14 +10,13 @@
 #define _KS_WLAN_H
 
 #include <linux/atomic.h>	/* struct atomic_t */
+#include <linux/circ_buf.h>
 #include <linux/completion.h>	/* struct completion */
 #include <linux/netdevice.h>	/* struct net_device_stats,  struct sk_buff */
 #include <linux/sched.h>	/* wait_queue_head_t */
 #include <linux/spinlock.h>	/* spinlock_t */
 #include <linux/wireless.h>
 
-#include "ks7010_sdio.h"
-
 struct ks_wlan_parameter {
 	u8 operation_mode;	/* Operation Mode */
 	u8 channel;	/*  Channel */
@@ -366,6 +365,71 @@ struct wps_status {
 	u8 ie[255];
 };
 
+/* Tx Device struct */
+#define	TX_DEVICE_BUFF_SIZE	1024
+
+struct ks_wlan_private;
+
+/**
+ * struct tx_device_buffer - Queue item for the tx queue.
+ * @sendp: Pointer to the send request data.
+ * @size: Size of @sendp data.
+ * @complete_handler: Function called once data write to device is complete.
+ * @arg1: First argument to @complete_handler.
+ * @arg2: Second argument to @complete_handler.
+ */
+struct tx_device_buffer {
+	unsigned char *sendp;
+	unsigned int size;
+	void (*complete_handler)(struct ks_wlan_private *priv,
+				 struct sk_buff *skb);
+	struct sk_buff *skb;
+};
+
+/**
+ * struct tx_device - Tx buffer queue.
+ * @tx_device_buffer: Queue buffer.
+ * @qhead: Head of tx queue.
+ * @qtail: Tail of tx queue.
+ * @tx_dev_lock: Queue lock.
+ */
+struct tx_device {
+	struct tx_device_buffer tx_dev_buff[TX_DEVICE_BUFF_SIZE];
+	unsigned int qhead;
+	unsigned int qtail;
+	spinlock_t tx_dev_lock;	/* protect access to the queue */
+};
+
+/* Rx Device struct */
+#define	RX_DATA_SIZE	(2 + 2 + 2347 + 1)
+#define	RX_DEVICE_BUFF_SIZE	32
+
+/**
+ * struct rx_device_buffer - Queue item for the rx queue.
+ * @data: rx data.
+ * @size: Size of @data.
+ */
+struct rx_device_buffer {
+	unsigned char data[RX_DATA_SIZE];
+	unsigned int size;
+};
+
+/**
+ * struct rx_device - Rx buffer queue.
+ * @rx_device_buffer: Queue buffer.
+ * @qhead: Head of rx queue.
+ * @qtail: Tail of rx queue.
+ * @rx_dev_lock: Queue lock.
+ */
+struct rx_device {
+	struct rx_device_buffer rx_dev_buff[RX_DEVICE_BUFF_SIZE];
+	unsigned int qhead;
+	unsigned int qtail;
+	spinlock_t rx_dev_lock;	/* protect access to the queue */
+};
+
+struct ks_sdio_card;
+
 struct ks_wlan_private {
 	/* hardware information */
 	struct ks_sdio_card *ks_sdio_card;
@@ -452,6 +516,50 @@ struct ks_wlan_private {
 	uint wakeup_count;	/* for detect wakeup loop */
 };
 
+static inline void inc_txqhead(struct ks_wlan_private *priv)
+{
+	priv->tx_dev.qhead = (priv->tx_dev.qhead + 1) % TX_DEVICE_BUFF_SIZE;
+}
+
+static inline void inc_txqtail(struct ks_wlan_private *priv)
+{
+	priv->tx_dev.qtail = (priv->tx_dev.qtail + 1) % TX_DEVICE_BUFF_SIZE;
+}
+
+static inline bool txq_has_space(struct ks_wlan_private *priv)
+{
+	return (CIRC_SPACE(priv->tx_dev.qhead, priv->tx_dev.qtail,
+			   TX_DEVICE_BUFF_SIZE) > 0);
+}
+
+static inline void inc_rxqhead(struct ks_wlan_private *priv)
+{
+	priv->rx_dev.qhead = (priv->rx_dev.qhead + 1) % RX_DEVICE_BUFF_SIZE;
+}
+
+static inline void inc_rxqtail(struct ks_wlan_private *priv)
+{
+	priv->rx_dev.qtail = (priv->rx_dev.qtail + 1) % RX_DEVICE_BUFF_SIZE;
+}
+
+static inline bool rxq_has_space(struct ks_wlan_private *priv)
+{
+	return (CIRC_SPACE(priv->rx_dev.qhead, priv->rx_dev.qtail,
+			   RX_DEVICE_BUFF_SIZE) > 0);
+}
+
+static inline unsigned int txq_count(struct ks_wlan_private *priv)
+{
+	return CIRC_CNT_TO_END(priv->tx_dev.qhead, priv->tx_dev.qtail,
+			       TX_DEVICE_BUFF_SIZE);
+}
+
+static inline unsigned int rxq_count(struct ks_wlan_private *priv)
+{
+	return CIRC_CNT_TO_END(priv->rx_dev.qhead, priv->rx_dev.qtail,
+			       RX_DEVICE_BUFF_SIZE);
+}
+
 int ks_wlan_net_start(struct net_device *dev);
 int ks_wlan_net_stop(struct net_device *dev);
 bool is_connect_status(u32 status);

commit a0a954b151d037e8cbf8822eb56a1a79c4caed30
Author: Sergio Paracuellos <sergio.paracuellos@gmail.com>
Date:   Fri May 4 06:16:05 2018 +0200

    staging: ks7010: add SPDX identifiers to all files
    
    It's good to have SPDX identifiers in all files to make it easier to
    audit the kernel tree for correct licenses.
    
    Fix up the all of the staging ks7010 files to have a proper SPDX
    identifier, based on the license text in the file itself.  The SPDX
    identifier is a legally binding shorthand, which can be used instead of
    the full boiler plate text.
    
    Extra GPL text wording can be removed as it is no longer needed at all.
    
    Signed-off-by: Sergio Paracuellos <sergio.paracuellos@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 2894b0c3816c..5070af86115f 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -1,12 +1,9 @@
+/* SPDX-License-Identifier: GPL-2.0 */
 /*
  *   Driver for KeyStream IEEE802.11 b/g wireless LAN cards.
  *
  *   Copyright (C) 2006-2008 KeyStream Corp.
  *   Copyright (C) 2009 Renesas Technology Corp.
- *
- *   This program is free software; you can redistribute it and/or modify
- *   it under the terms of the GNU General Public License version 2 as
- *   published by the Free Software Foundation.
  */
 
 #ifndef _KS_WLAN_H

commit 92c1552caef3661f049c4e967550e933599e2663
Author: Sergio Paracuellos <sergio.paracuellos@gmail.com>
Date:   Tue Apr 24 15:50:00 2018 +0200

    staging: ks7010: remove WPS definition conditional code
    
    WPS definition was defined by default in ks_wlan.h header
    file. So it makes no sense to have conditional preprocessor
    stuff along the code about this.
    
    Signed-off-by: Sergio Paracuellos <sergio.paracuellos@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 365001bebabc..2894b0c3816c 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -12,8 +12,6 @@
 #ifndef _KS_WLAN_H
 #define _KS_WLAN_H
 
-#define WPS
-
 #include <linux/atomic.h>	/* struct atomic_t */
 #include <linux/completion.h>	/* struct completion */
 #include <linux/netdevice.h>	/* struct net_device_stats,  struct sk_buff */
@@ -122,10 +120,8 @@ enum {
 	SME_RSN_AUTH_REQUEST,
 	SME_RSN_ENABLED_REQUEST,
 	SME_RSN_MODE_REQUEST,
-#ifdef WPS
 	SME_WPS_ENABLE_REQUEST,
 	SME_WPS_PROBE_REQUEST,
-#endif
 	SME_SET_GAIN,
 	SME_GET_GAIN,
 	SME_SLEEP_REQUEST,
@@ -198,14 +194,12 @@ struct rsn_ie {
 	u8 body[RSN_IE_BODY_MAX];
 } __packed;
 
-#ifdef WPS
 #define WPS_IE_BODY_MAX 255
 struct wps_ie {
 	u8 id;	/* 221 'dd <len> 00 50 F2 04' */
 	u8 size;	/* max ? 255 ? */
 	u8 body[WPS_IE_BODY_MAX];
 } __packed;
-#endif /* WPS */
 
 struct local_ap {
 	u8 bssid[6];
@@ -226,9 +220,7 @@ struct local_ap {
 	u8 noise;
 	struct rsn_ie wpa_ie;
 	struct rsn_ie rsn_ie;
-#ifdef WPS
 	struct wps_ie wps_ie;
-#endif /* WPS */
 };
 
 #define LOCAL_APLIST_MAX 31
@@ -371,13 +363,11 @@ struct pmk_list {
 	} pmk[PMK_LIST_MAX];
 };
 
-#ifdef WPS
 struct wps_status {
 	int wps_enabled;
 	int ielen;
 	u8 ie[255];
 };
-#endif /* WPS */
 
 struct ks_wlan_private {
 	/* hardware information */
@@ -450,9 +440,7 @@ struct ks_wlan_private {
 	u8 scan_ssid_len;
 	u8 scan_ssid[IW_ESSID_MAX_SIZE + 1];
 	struct local_gain gain;
-#ifdef WPS
 	struct wps_status wps;
-#endif /* WPS */
 	u8 sleep_mode;
 
 	u8 region;

commit fe1694e13c1cd0b8e860770c63f520b83348e610
Author: Sergio Paracuellos <sergio.paracuellos@gmail.com>
Date:   Mon Apr 23 15:44:54 2018 +0200

    staging: ks7010: removes data_buff field of ks_wlan_private struct
    
    This commit removes data_buff array field of ks_wlan_private
    which is not being used at all.
    
    Signed-off-by: Sergio Paracuellos <sergio.paracuellos@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index a4d03f967cc5..365001bebabc 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -447,9 +447,6 @@ struct ks_wlan_private {
 #define CONNECT_STATUS_MASK 0x7FFFFFFF
 	u32 connect_status;	/* connect status */
 	int infra_status;	/* Infractructure status */
-
-	u8 data_buff[0x1000];
-
 	u8 scan_ssid_len;
 	u8 scan_ssid[IW_ESSID_MAX_SIZE + 1];
 	struct local_gain gain;

commit e18d13a7bc3289a3453bc554a1443dc0c0bad9ed
Author: Sergio Paracuellos <sergio.paracuellos@gmail.com>
Date:   Mon Apr 23 15:44:53 2018 +0200

    staging: ks7010: remove two fields of ks_wlan_private struct
    
    This commit removes l2_dev and l2_fd fields of ks_wlan_private
    struct because they are not being used at all.
    
    Signed-off-by: Sergio Paracuellos <sergio.paracuellos@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 52de44866d53..a4d03f967cc5 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -454,8 +454,6 @@ struct ks_wlan_private {
 	u8 scan_ssid[IW_ESSID_MAX_SIZE + 1];
 	struct local_gain gain;
 #ifdef WPS
-	struct net_device *l2_dev;
-	int l2_fd;
 	struct wps_status wps;
 #endif /* WPS */
 	u8 sleep_mode;

commit d892cc1cfe0c1ce4e4eb58a1877835802953adac
Author: Sergio Paracuellos <sergio.paracuellos@gmail.com>
Date:   Mon Apr 23 15:44:48 2018 +0200

    staging: ks7010: change name and type for device_open_status field
    
    This commit changes type for device_open_status field of ks_wlan_private
    structure from int to bool. This variable is only be set to 1
    on ks_wlan_net_start and set to 0 on ks_wlan_net_stop. For this
    purpose it is not necessary at all to use an integer because a bool
    is enough. This also renames field name from device_open_status to
    is_device_open.
    
    Signed-off-by: Sergio Paracuellos <sergio.paracuellos@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 615c42e2cffb..52de44866d53 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -424,7 +424,7 @@ struct ks_wlan_private {
 	unsigned int need_commit;	/* for ioctl */
 
 	/* DeviceIoControl */
-	bool device_open_status;
+	bool is_device_open;
 	atomic_t event_count;
 	atomic_t rec_count;
 	int dev_count;

commit 7d9cbdc8909cf11247bf88afe29a966bfed06f02
Author: Sergio Paracuellos <sergio.paracuellos@gmail.com>
Date:   Thu Apr 19 07:08:06 2018 +0200

    staging: ks7010: remove enum from ks_wlan.h header
    
    This commit removes an enum which is in ks_wlan.h
    and it is not being used at all.
    
    Signed-off-by: Sergio Paracuellos <sergio.paracuellos@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index e15fa46bf213..615c42e2cffb 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -286,14 +286,6 @@ struct scan_ext {
 	char ssid[IW_ESSID_MAX_SIZE + 1];
 };
 
-enum {
-	CIPHER_NONE,
-	CIPHER_WEP40,
-	CIPHER_TKIP,
-	CIPHER_CCMP,
-	CIPHER_WEP104
-};
-
 #define CIPHER_ID_WPA_NONE    "\x00\x50\xf2\x00"
 #define CIPHER_ID_WPA_WEP40   "\x00\x50\xf2\x01"
 #define CIPHER_ID_WPA_TKIP    "\x00\x50\xf2\x02"

commit 549f625c856163202c16cd7228d6bdf290953ba7
Author: Sergio Paracuellos <sergio.paracuellos@gmail.com>
Date:   Thu Apr 19 07:08:04 2018 +0200

    staging: ks7010: review includes of ks_wlan.h file
    
    This commit reviews includes of ks_wlan.h header file.
    It removes those which are not being used at all. It
    also reorder remaining ones in alphabetical order.
    The linux/module.h include file has been moved to the
    correct file which is ks7010_sdio.c in order to be able
    to compile the driver without problems.
    
    Signed-off-by: Sergio Paracuellos <sergio.paracuellos@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index efda12258d44..e15fa46bf213 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -14,23 +14,12 @@
 
 #define WPS
 
-#include <linux/interrupt.h>
-#include <linux/kernel.h>
-#include <linux/module.h>
-
-#include <linux/spinlock.h>	/* spinlock_t */
-#include <linux/sched.h>	/* wait_queue_head_t */
-#include <linux/types.h>	/* pid_t */
-#include <linux/netdevice.h>	/* struct net_device_stats,  struct sk_buff */
-#include <linux/etherdevice.h>
-#include <linux/wireless.h>
 #include <linux/atomic.h>	/* struct atomic_t */
-#include <linux/timer.h>	/* struct timer_list */
-#include <linux/string.h>
 #include <linux/completion.h>	/* struct completion */
-#include <linux/workqueue.h>
-
-#include <linux/io.h>
+#include <linux/netdevice.h>	/* struct net_device_stats,  struct sk_buff */
+#include <linux/sched.h>	/* wait_queue_head_t */
+#include <linux/spinlock.h>	/* spinlock_t */
+#include <linux/wireless.h>
 
 #include "ks7010_sdio.h"
 

commit 8102f61d453edada4395bfc664538c3e11c6464d
Author: Quytelda Kahja <quytelda@tamalin.org>
Date:   Fri Mar 30 23:08:52 2018 -0700

    staging: ks7010: Change 'device_open_status' to a bool.
    
    The 'device_open_status' member of 'struct ks_wlan_private' is only
    ever set to zero or one, so it makes more sense for it to be a bool
    instead of an int.
    
    Signed-off-by: Quytelda Kahja <quytelda@tamalin.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index eb0c14e78bd2..efda12258d44 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -443,7 +443,7 @@ struct ks_wlan_private {
 	unsigned int need_commit;	/* for ioctl */
 
 	/* DeviceIoControl */
-	int device_open_status;
+	bool device_open_status;
 	atomic_t event_count;
 	atomic_t rec_count;
 	int dev_count;

commit e7814c00df34a673b2f062765f932ef064668667
Author: Quytelda Kahja <quytelda@tamalin.org>
Date:   Fri Mar 30 23:08:46 2018 -0700

    staging: ks7010: Remove trailing _t from 'struct wps_status_t'.
    
    The "_t" suffix is not needed for structure names in this driver, and is a
    reflection of an older typedef system that is no longer in place. Replace
    all occurences of 'struct wps_status_t' with 'struct wps_status'.
    
    Signed-off-by: Quytelda Kahja <quytelda@tamalin.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 20b584524a77..eb0c14e78bd2 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -391,7 +391,7 @@ struct pmk_list {
 };
 
 #ifdef WPS
-struct wps_status_t {
+struct wps_status {
 	int wps_enabled;
 	int ielen;
 	u8 ie[255];
@@ -475,7 +475,7 @@ struct ks_wlan_private {
 #ifdef WPS
 	struct net_device *l2_dev;
 	int l2_fd;
-	struct wps_status_t wps;
+	struct wps_status wps;
 #endif /* WPS */
 	u8 sleep_mode;
 

commit b74024743e2530d0fe10b2e4cc6754c8c5af2be5
Author: Quytelda Kahja <quytelda@tamalin.org>
Date:   Fri Mar 30 23:08:45 2018 -0700

    staging: ks7010: Remove trailing _t from 'struct pmk_t'.
    
    The "_t" suffix is not needed for structure names in this driver, and is a
    reflection of an older typedef system that is no longer in place. Replace
    all occurences of 'struct pmk_t' with 'struct pmk'.
    
    Signed-off-by: Quytelda Kahja <quytelda@tamalin.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 69eac00e75b1..20b584524a77 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -383,7 +383,7 @@ struct wpa_status {
 struct pmk_list {
 	u16 size;
 	struct list_head head;
-	struct pmk_t {
+	struct pmk {
 		struct list_head list;
 		u8 bssid[ETH_ALEN];
 		u8 pmkid[IW_PMKID_LEN];

commit 956d23aeb3c591889dfba5609c4a0eae123ea69f
Author: Quytelda Kahja <quytelda@tamalin.org>
Date:   Fri Mar 30 23:08:44 2018 -0700

    staging: ks7010: Remove trailing _t from 'struct pmk_list_t'.
    
    The "_t" suffix is not needed for structure names in this driver, and is a
    reflection of an older typedef system that is no longer in place. Replace
    all occurences of 'struct pmk_list_t' with 'struct pmk_list'.
    
    Signed-off-by: Quytelda Kahja <quytelda@tamalin.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 851721182b05..69eac00e75b1 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -380,7 +380,7 @@ struct wpa_status {
 
 #include <linux/list.h>
 #define PMK_LIST_MAX 8
-struct pmk_list_t {
+struct pmk_list {
 	u16 size;
 	struct list_head head;
 	struct pmk_t {
@@ -428,7 +428,7 @@ struct ks_wlan_private {
 	struct power_save_status psstatus;
 	struct sleep_status sleepstatus;
 	struct wpa_status wpa;
-	struct pmk_list_t pmklist;
+	struct pmk_list pmklist;
 	/* wireless parameter */
 	struct ks_wlan_parameter reg;
 	u8 current_rate;

commit 04e9e06ce5a26f6609ddbae86c5a40caa64fa3c4
Author: Quytelda Kahja <quytelda@tamalin.org>
Date:   Fri Mar 30 23:08:43 2018 -0700

    staging: ks7010: Remove trailing _t from 'struct wpa_status_t'.
    
    The "_t" suffix is not needed for structure names in this driver, and is a
    reflection of an older typedef system that is no longer in place. Replace
    all occurences of 'struct wpa_status_t' with 'struct wpa_status'.
    
    Signed-off-by: Quytelda Kahja <quytelda@tamalin.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index c3e61021a75a..851721182b05 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -364,7 +364,7 @@ struct mic_failure {
 	int stop;	/* stop flag */
 };
 
-struct wpa_status_t {
+struct wpa_status {
 	int wpa_enabled;
 	unsigned int rsn_enabled;
 	int version;
@@ -427,7 +427,7 @@ struct ks_wlan_private {
 	struct local_ap current_ap;
 	struct power_save_status psstatus;
 	struct sleep_status sleepstatus;
-	struct wpa_status_t wpa;
+	struct wpa_status wpa;
 	struct pmk_list_t pmklist;
 	/* wireless parameter */
 	struct ks_wlan_parameter reg;

commit 9b0b63a4d126426b8f60bfffdf8d0a9fbccb2b46
Author: Quytelda Kahja <quytelda@tamalin.org>
Date:   Fri Mar 30 23:08:42 2018 -0700

    staging: ks7010: Remove trailing _t from 'struct mic_failure_t'.
    
    The "_t" suffix is not needed for structure names in this driver, and is a
    reflection of an older typedef system that is no longer in place. Replace
    all occurences of 'struct mic_failure_t' with 'struct mic_failure'.
    
    Signed-off-by: Quytelda Kahja <quytelda@tamalin.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 2458dbba66a0..c3e61021a75a 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -357,7 +357,7 @@ struct wpa_key {
 #define WPA_KEY_INDEX_MAX 4
 #define WPA_RX_SEQ_LEN 6
 
-struct mic_failure_t {
+struct mic_failure {
 	u16 failure;	/* MIC Failure counter 0 or 1 or 2 */
 	u16 counter;	/* 1sec counter 0-60 */
 	u32 last_failure_time;
@@ -375,7 +375,7 @@ struct wpa_status_t {
 	int txkey;
 	struct wpa_key key[WPA_KEY_INDEX_MAX];
 	struct scan_ext scan_ext;
-	struct mic_failure_t mic_failure;
+	struct mic_failure mic_failure;
 };
 
 #include <linux/list.h>

commit 8b76eb091b5b8aec094b0fde9cf58856a8e699cb
Author: Quytelda Kahja <quytelda@tamalin.org>
Date:   Fri Mar 30 23:08:41 2018 -0700

    staging: ks7010: Remove trailing _t from 'struct wpa_key_t'.
    
    The "_t" suffix is not needed for structure names in this driver, and is a
    reflection of an older typedef system that is no longer in place. Replace
    all occurences of 'struct wpa_key_t' with 'struct wpa_key'.
    
    Signed-off-by: Quytelda Kahja <quytelda@tamalin.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index ece9950ba893..2458dbba66a0 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -339,7 +339,7 @@ enum {
 
 #define MIC_KEY_SIZE 8
 
-struct wpa_key_t {
+struct wpa_key {
 	u32 ext_flags;	/* IW_ENCODE_EXT_xxx */
 	u8 tx_seq[IW_ENCODE_SEQ_MAX_SIZE];	/* LSB first */
 	u8 rx_seq[IW_ENCODE_SEQ_MAX_SIZE];	/* LSB first */
@@ -373,7 +373,7 @@ struct wpa_status_t {
 	int key_mgmt_suite;	/* authentication key management suite */
 	int auth_alg;
 	int txkey;
-	struct wpa_key_t key[WPA_KEY_INDEX_MAX];
+	struct wpa_key key[WPA_KEY_INDEX_MAX];
 	struct scan_ext scan_ext;
 	struct mic_failure_t mic_failure;
 };

commit eafb5e2928977de0c7da623d1bb85d8b60c33bdc
Author: Quytelda Kahja <quytelda@tamalin.org>
Date:   Fri Mar 30 23:08:40 2018 -0700

    staging: ks7010: Remove trailing _t from 'struct scan_ext_t'.
    
    The "_t" suffix is not needed for structure names in this driver, and is a
    reflection of an older typedef system that is no longer in place. Replace
    all occurences of 'struct scan_ext_t' with 'struct scan_ext'.
    
    Signed-off-by: Quytelda Kahja <quytelda@tamalin.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index d10ad152aa32..ece9950ba893 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -292,7 +292,7 @@ struct sleep_status {
 };
 
 /* WPA */
-struct scan_ext_t {
+struct scan_ext {
 	unsigned int flag;
 	char ssid[IW_ESSID_MAX_SIZE + 1];
 };
@@ -374,7 +374,7 @@ struct wpa_status_t {
 	int auth_alg;
 	int txkey;
 	struct wpa_key_t key[WPA_KEY_INDEX_MAX];
-	struct scan_ext_t scan_ext;
+	struct scan_ext scan_ext;
 	struct mic_failure_t mic_failure;
 };
 

commit cdc2138189102d91b147e5d089cd7ef36232d6c0
Author: Quytelda Kahja <quytelda@tamalin.org>
Date:   Fri Mar 30 23:08:39 2018 -0700

    staging: ks7010: Remove trailing _t from 'struct sleep_status_t'.
    
    The "_t" suffix is not needed for structure names in this driver, and is a
    reflection of an older typedef system that is no longer in place. Replace
    all occurences of 'struct sleep_status_t' with 'struct sleep_status'.
    
    Signed-off-by: Quytelda Kahja <quytelda@tamalin.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index edd13060c24c..d10ad152aa32 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -285,7 +285,7 @@ struct power_save_status {
 	atomic_t snooze_guard;
 };
 
-struct sleep_status_t {
+struct sleep_status {
 	atomic_t status;	/* initialvalue 0 */
 	atomic_t doze_request;
 	atomic_t wakeup_request;
@@ -426,7 +426,7 @@ struct ks_wlan_private {
 	struct local_aplist aplist;
 	struct local_ap current_ap;
 	struct power_save_status psstatus;
-	struct sleep_status_t sleepstatus;
+	struct sleep_status sleepstatus;
 	struct wpa_status_t wpa;
 	struct pmk_list_t pmklist;
 	/* wireless parameter */

commit fa399ae2967930608d4be87dd0e6189ec86fd5ad
Author: Quytelda Kahja <quytelda@tamalin.org>
Date:   Fri Mar 30 23:08:38 2018 -0700

    staging: ks7010: Remove trailing _t from 'struct power_save_status_t'.
    
    The "_t" suffix is not needed for structure names in this driver, and is a
    reflection of an older typedef system that is no longer in place. Replace
    all occurences of 'struct power_save_status_t' with 'struct
    power_save_status'.
    
    Signed-off-by: Quytelda Kahja <quytelda@tamalin.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index f99b00344d39..edd13060c24c 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -278,7 +278,7 @@ enum {
 	PS_WAKEUP
 };
 
-struct power_save_status_t {
+struct power_save_status {
 	atomic_t status;	/* initialvalue 0 */
 	struct completion wakeup_wait;
 	atomic_t confirm_wait;
@@ -425,7 +425,7 @@ struct ks_wlan_private {
 
 	struct local_aplist aplist;
 	struct local_ap current_ap;
-	struct power_save_status_t psstatus;
+	struct power_save_status psstatus;
 	struct sleep_status_t sleepstatus;
 	struct wpa_status_t wpa;
 	struct pmk_list_t pmklist;

commit c83891b424dbf2c0ae6ac2de2b3cf5e1211ed7e1
Author: Quytelda Kahja <quytelda@tamalin.org>
Date:   Fri Mar 30 23:08:37 2018 -0700

    staging: ks7010: Remove trailing _t from 'struct local_eeprom_sum_t'.
    
    The "_t" suffix is not needed for structure names in this driver, and is a
    reflection of an older typedef system that is no longer in place. Replace
    all occurences of 'struct local_eeprom_sum_t' with 'struct
    local_eeprom_sum'.
    
    Signed-off-by: Quytelda Kahja <quytelda@tamalin.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index e6c4a0fece54..f99b00344d39 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -256,7 +256,7 @@ struct local_gain {
 	u8 rx_gain;
 };
 
-struct local_eeprom_sum_t {
+struct local_eeprom_sum {
 	u8 type;
 	u8 result;
 };
@@ -480,7 +480,7 @@ struct ks_wlan_private {
 	u8 sleep_mode;
 
 	u8 region;
-	struct local_eeprom_sum_t eeprom_sum;
+	struct local_eeprom_sum eeprom_sum;
 	u8 eeprom_checksum;
 
 	struct hostt hostt;

commit 431df21a031f4ab45f77c67ca1ac30951afa8665
Author: Quytelda Kahja <quytelda@tamalin.org>
Date:   Fri Mar 30 23:08:36 2018 -0700

    staging: ks7010: Remove trailing _t from 'struct local_gain_t'.
    
    The "_t" suffix is not needed for structure names in this driver, and is a
    reflection of an older typedef system that is no longer in place. Replace
    all occurences of 'struct local_gain_t' with 'struct local_gain'.
    
    Signed-off-by: Quytelda Kahja <quytelda@tamalin.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 57b21d3a2435..e6c4a0fece54 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -249,7 +249,7 @@ struct local_aplist {
 	struct local_ap ap[LOCAL_APLIST_MAX + 1];
 };
 
-struct local_gain_t {
+struct local_gain {
 	u8 tx_mode;
 	u8 rx_mode;
 	u8 tx_gain;
@@ -471,7 +471,7 @@ struct ks_wlan_private {
 
 	u8 scan_ssid_len;
 	u8 scan_ssid[IW_ESSID_MAX_SIZE + 1];
-	struct local_gain_t gain;
+	struct local_gain gain;
 #ifdef WPS
 	struct net_device *l2_dev;
 	int l2_fd;

commit f9ca0deacb9db9bea29218ad3858505bfcf8ff56
Author: Quytelda Kahja <quytelda@tamalin.org>
Date:   Fri Mar 30 23:08:35 2018 -0700

    staging: ks7010: Remove trailing _t from 'struct local_aplist_t'.
    
    The "_t" suffix is not needed for structure names in this driver, and is a
    reflection of an older typedef system that is no longer in place. Replace
    all occurences of 'struct local_aplist_t' with 'struct local_aplist'.
    
    Signed-off-by: Quytelda Kahja <quytelda@tamalin.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 3104ff92c453..57b21d3a2435 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -244,7 +244,7 @@ struct local_ap {
 
 #define LOCAL_APLIST_MAX 31
 #define LOCAL_CURRENT_AP LOCAL_APLIST_MAX
-struct local_aplist_t {
+struct local_aplist {
 	int size;
 	struct local_ap ap[LOCAL_APLIST_MAX + 1];
 };
@@ -423,7 +423,7 @@ struct ks_wlan_private {
 
 	unsigned char eth_addr[ETH_ALEN];
 
-	struct local_aplist_t aplist;
+	struct local_aplist aplist;
 	struct local_ap current_ap;
 	struct power_save_status_t psstatus;
 	struct sleep_status_t sleepstatus;

commit 01d391d45701790be830e6af0a18fece388cc1f4
Author: Quytelda Kahja <quytelda@tamalin.org>
Date:   Fri Mar 30 23:08:34 2018 -0700

    staging: ks7010: Remove trailing _t from 'struct local_ap_t'.
    
    The "_t" suffix is not needed for structure names in this driver, and is a
    reflection of an older typedef system that is no longer in place. Replace
    all occurences of 'struct local_ap_t' with 'struct local_ap'.
    
    Signed-off-by: Quytelda Kahja <quytelda@tamalin.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 30d81f9456b7..3104ff92c453 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -218,7 +218,7 @@ struct wps_ie {
 } __packed;
 #endif /* WPS */
 
-struct local_ap_t {
+struct local_ap {
 	u8 bssid[6];
 	u8 rssi;
 	u8 sq;
@@ -246,7 +246,7 @@ struct local_ap_t {
 #define LOCAL_CURRENT_AP LOCAL_APLIST_MAX
 struct local_aplist_t {
 	int size;
-	struct local_ap_t ap[LOCAL_APLIST_MAX + 1];
+	struct local_ap ap[LOCAL_APLIST_MAX + 1];
 };
 
 struct local_gain_t {
@@ -424,7 +424,7 @@ struct ks_wlan_private {
 	unsigned char eth_addr[ETH_ALEN];
 
 	struct local_aplist_t aplist;
-	struct local_ap_t current_ap;
+	struct local_ap current_ap;
 	struct power_save_status_t psstatus;
 	struct sleep_status_t sleepstatus;
 	struct wpa_status_t wpa;

commit 7383324ffc9dc25c347c7f61a9fd08d29b028485
Author: Quytelda Kahja <quytelda@tamalin.org>
Date:   Fri Mar 30 23:08:33 2018 -0700

    staging: ks7010: Remove trailing _t from 'struct wps_ie_t'.
    
    The "_t" suffix is not needed for structure names in this driver, and is a
    reflection of an older typedef system that is no longer in place. Replace
    all occurences of 'struct wps_ie_t' with 'struct wps_ie'.
    
    Signed-off-by: Quytelda Kahja <quytelda@tamalin.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 10ff4460594f..30d81f9456b7 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -211,7 +211,7 @@ struct rsn_ie {
 
 #ifdef WPS
 #define WPS_IE_BODY_MAX 255
-struct wps_ie_t {
+struct wps_ie {
 	u8 id;	/* 221 'dd <len> 00 50 F2 04' */
 	u8 size;	/* max ? 255 ? */
 	u8 body[WPS_IE_BODY_MAX];
@@ -238,7 +238,7 @@ struct local_ap_t {
 	struct rsn_ie wpa_ie;
 	struct rsn_ie rsn_ie;
 #ifdef WPS
-	struct wps_ie_t wps_ie;
+	struct wps_ie wps_ie;
 #endif /* WPS */
 };
 

commit 00284ea43fca45fde22fe5ec2ff6a06eb86742e4
Author: Quytelda Kahja <quytelda@tamalin.org>
Date:   Fri Mar 30 23:08:32 2018 -0700

    staging: ks7010: Remove trailing _t from 'struct rsn_ie_t'.
    
    The "_t" suffix is not needed for structure names in this driver, and is a
    reflection of an older typedef system that is no longer in place. Replace
    all occurences of 'struct rsn_ie_t' with 'struct rsn_ie'.
    
    Signed-off-by: Quytelda Kahja <quytelda@tamalin.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 3ea62b708b01..10ff4460594f 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -203,7 +203,7 @@ struct hostt {
 };
 
 #define RSN_IE_BODY_MAX 64
-struct rsn_ie_t {
+struct rsn_ie {
 	u8 id;	/* 0xdd = WPA or 0x30 = RSN */
 	u8 size;	/* max ? 255 ? */
 	u8 body[RSN_IE_BODY_MAX];
@@ -235,8 +235,8 @@ struct local_ap_t {
 	u16 capability;
 	u8 channel;
 	u8 noise;
-	struct rsn_ie_t wpa_ie;
-	struct rsn_ie_t rsn_ie;
+	struct rsn_ie wpa_ie;
+	struct rsn_ie rsn_ie;
 #ifdef WPS
 	struct wps_ie_t wps_ie;
 #endif /* WPS */

commit 20a5ca23163d2a252598109a3ce016042be84137
Author: Quytelda Kahja <quytelda@tamalin.org>
Date:   Fri Mar 30 23:08:31 2018 -0700

    staging: ks7010: Remove trailing _t from 'struct hostt_t'.
    
    The "_t" suffix is not needed for structure names in this driver, and is a
    reflection of an older typedef system that is no longer in place. Replace
    all occurences of 'struct hostt_t' with 'struct hostt'.
    
    Signed-off-by: Quytelda Kahja <quytelda@tamalin.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 1b7036c32d1c..3ea62b708b01 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -196,7 +196,7 @@ struct sme_info {
 	unsigned long sme_flag;
 };
 
-struct hostt_t {
+struct hostt {
 	int buff[SME_EVENT_BUFF_SIZE];
 	unsigned int qhead;
 	unsigned int qtail;
@@ -483,7 +483,7 @@ struct ks_wlan_private {
 	struct local_eeprom_sum_t eeprom_sum;
 	u8 eeprom_checksum;
 
-	struct hostt_t hostt;
+	struct hostt hostt;
 
 	unsigned long last_doze;
 	unsigned long last_wakeup;

commit 7423c4e399cfc5b03b62e34735df520e4c789531
Author: Quytelda Kahja <quytelda@tamalin.org>
Date:   Wed Mar 28 22:51:49 2018 -0700

    staging: ks7010: Remove unused member 'reg_net' from 'ks_wlan_private'.
    
    'reg_net' is never used in this driver.
    
    Signed-off-by: Quytelda Kahja <quytelda@tamalin.org>x
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 846bb1041850..1b7036c32d1c 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -406,7 +406,6 @@ struct ks_wlan_private {
 	struct tasklet_struct rx_bh_task;
 
 	struct net_device *net_dev;
-	int reg_net;	/* register_netdev */
 	struct net_device_stats nstats;
 	struct iw_statistics wstats;
 

commit f40cd66b45b3fc2822e3abb254929c6e2820ab91
Author: Quytelda Kahja <quytelda@tamalin.org>
Date:   Wed Mar 28 22:51:48 2018 -0700

    staging: ks7010: Change mac_address_valid to a bool instead of int.
    
    'mac_address_valid' is only ever assigned 0 or 1, so it makes more sense
    to use a bool type for this variable.
    
    Signed-off-by: Quytelda Kahja <quytelda@tamalin.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index f1f6c88adcca..846bb1041850 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -456,7 +456,7 @@ struct ks_wlan_private {
 	unsigned char firmware_version[128 + 1];
 	int version_size;
 
-	int mac_address_valid;	/* Mac Address Status */
+	bool mac_address_valid;	/* Mac Address Status */
 
 	int dev_state;
 

commit d1c4520dafba7d1a424940f50d2805f1fb9e5cac
Author: Sergio Paracuellos <sergio.paracuellos@gmail.com>
Date:   Mon Mar 26 18:52:47 2018 +0200

    staging: ks7010: use GENMASK instead of custom defines in SME_WEP_VAL_MASK
    
    This commits replaces custom defines that were been used
    to define a mask using GENMASK macro from linux bitops
    header file.
    
    With this change the "WARNING: line over 80 characters"
    warning message reported by checkpatch script is also
    removed.
    
    Signed-off-by: Sergio Paracuellos <sergio.paracuellos@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 626d2d60f464..f1f6c88adcca 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -87,7 +87,7 @@ enum {
 #define SME_WEP_VAL2        BIT(6)
 #define SME_WEP_VAL3        BIT(7)
 #define SME_WEP_VAL4        BIT(8)
-#define SME_WEP_VAL_MASK    (SME_WEP_VAL1 | SME_WEP_VAL2 | SME_WEP_VAL3 | SME_WEP_VAL4)
+#define SME_WEP_VAL_MASK    GENMASK(8, 5)
 #define SME_RSN             BIT(9)
 #define SME_RSN_MULTICAST   BIT(10)
 #define SME_RSN_UNICAST	    BIT(11)

commit 55189ccbaec04d79226f250a31ce5b96f47116b0
Author: Quytelda Kahja <quytelda@tamalin.org>
Date:   Fri Mar 23 23:40:43 2018 -0700

    staging: ks7010: Fix spelling mistakes.
    
    Fix two spelling mistakes in comments.
    
    Signed-off-by: Quytelda Kahja <quytelda@tamalin.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index aeabbe37619b..626d2d60f464 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -54,7 +54,7 @@ struct ks_wlan_parameter {
 #define BEACON_LOST_COUNT_MAX 65535
 	u32 beacon_lost_count;	/*  Beacon Lost Count */
 	u32 rts;	/*  RTS Threashold */
-	u32 fragment;	/*  Fragmentation Threashold */
+	u32 fragment;	/*  Fragmentation Threshold */
 	u32 privacy_invoked;
 	u32 wep_index;
 	struct {

commit a00c38a335a858ec87ebc6c456e779966c58934e
Author: Sergio Paracuellos <sergio.paracuellos@gmail.com>
Date:   Tue Mar 20 15:36:44 2018 +0100

    staging: ks7010: remove max_event_count field which is only being used in debug
    
    This patch removes max_event_count field of sme_info structure which is a
    write only variable just being used for debug purposes.
    
    Signed-off-by: Sergio Paracuellos <sergio.paracuellos@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 6bad88d287fd..aeabbe37619b 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -192,10 +192,6 @@ struct sme_info {
 	int event_buff[SME_EVENT_BUFF_SIZE];
 	unsigned int qhead;
 	unsigned int qtail;
-#ifdef DEBUG
-	/* for debug */
-	unsigned int max_event_count;
-#endif
 	spinlock_t sme_spin;
 	unsigned long sme_flag;
 };

commit 31ce0d861cd1053b3950cf405c73f32ca9ed73ea
Author: Sergio Paracuellos <sergio.paracuellos@gmail.com>
Date:   Tue Mar 20 15:36:43 2018 +0100

    staging: ks7010: replace KS_WLAN_DEBUG with DEBUG preprocessor directive
    
    This commit replaces custom KS_WLAN_DEBUG which is not being used anymore
    in favour of DEBUG which is the one included when debugging is enabled.
    
    Signed-off-by: Sergio Paracuellos <sergio.paracuellos@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 4fff7f7ebf1d..6bad88d287fd 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -192,7 +192,7 @@ struct sme_info {
 	int event_buff[SME_EVENT_BUFF_SIZE];
 	unsigned int qhead;
 	unsigned int qtail;
-#ifdef KS_WLAN_DEBUG
+#ifdef DEBUG
 	/* for debug */
 	unsigned int max_event_count;
 #endif

commit 5259b3293617ea88842a658793ffaa61ea0e0ef4
Author: Sergio Paracuellos <sergio.paracuellos@gmail.com>
Date:   Thu Mar 15 20:09:22 2018 +0100

    staging: ks7010: replace DPRINTK traces in favour of netdev_*
    
    This commit removes custom defined DPRINTK macro and replaces all the
    associated debug and other traces for preferred ones netdev_*.
    
    Signed-off-by: Sergio Paracuellos <sergio.paracuellos@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 3767079be00d..4fff7f7ebf1d 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -34,16 +34,6 @@
 
 #include "ks7010_sdio.h"
 
-#ifdef KS_WLAN_DEBUG
-#define DPRINTK(n, fmt, args...) \
-	do { \
-		if (KS_WLAN_DEBUG > (n)) \
-			pr_notice("%s: "fmt, __func__, ## args); \
-	} while (0)
-#else
-#define DPRINTK(n, fmt, args...)
-#endif
-
 struct ks_wlan_parameter {
 	u8 operation_mode;	/* Operation Mode */
 	u8 channel;	/*  Channel */

commit 93270634a32b2c4e5ff7c3f1987a5473b484623f
Author: Janusz Lisiecki <janusz.lisiecki@gmail.com>
Date:   Sat Apr 29 22:58:41 2017 +0200

    staging: ks7010: avoid CamelCase in fields of struct local_gain_t
    
    Replace CamelCase fields of struct with underscores to comply
    with the standard kernel coding style
    
    Signed-off-by: Janusz Lisiecki <janusz.lisiecki@gmail.com>
    Reviewed-by: Tobin C. Harding <me@tobin.cc>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index cd4f56ddbea8..3767079be00d 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -264,10 +264,10 @@ struct local_aplist_t {
 };
 
 struct local_gain_t {
-	u8 TxMode;
-	u8 RxMode;
-	u8 TxGain;
-	u8 RxGain;
+	u8 tx_mode;
+	u8 rx_mode;
+	u8 tx_gain;
+	u8 rx_gain;
 };
 
 struct local_eeprom_sum_t {

commit 8fb8e05ccafaa0e09fd93d9bffd0b4037cc36317
Author: Tobin C. Harding <me@tobin.cc>
Date:   Thu Apr 27 11:25:22 2017 +1000

    staging: ks7010: make abbreviation mgmt uniform
    
    Driver currently uses abbreviations 'mgt' and 'mngmt' for
    'management'. Also 'power' is sometimes abbreviated to 'pow' and other
    times not. It makes the code easier to read and easier to modify if
    one abbreviation is used throughout the driver. 'mgmt' is widely
    accepted as an abbreviation of 'management'. 'power' can be spelled
    out in full, the extra two characters aids readability without an
    excessive cost.
    
    Make abbreviation of 'management' uniform across the driver, function
    names, preprocessor defined constants, and enumeration types.
    
    Signed-off-by: Tobin C. Harding <me@tobin.cc>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index a2465391cc94..cd4f56ddbea8 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -58,7 +58,7 @@ struct ks_wlan_parameter {
 		u8 body[32 + 1];
 	} ssid;	/*  SSID */
 	u8 preamble;	/*  Preamble */
-	u8 powermgt;	/*  PowerManagementMode */
+	u8 power_mgmt;
 	u32 scan_type;	/*  AP List Scan Type */
 #define BEACON_LOST_COUNT_MIN 0
 #define BEACON_LOST_COUNT_MAX 65535

commit 0e24eb8abf93a2e80ecbe97419d2d1fe089a7386
Author: Tobin C. Harding <me@tobin.cc>
Date:   Thu Apr 27 11:25:19 2017 +1000

    staging: ks7010: abstract connection status
    
    Host interface connection status is handled using a 32 bit type. Top
    byte is used as for FORCE_DISCONNECT status, low bits are used for
    connect/disconnect status. Driver masks and checks integers to
    ascertain status. If functions are defined to do the masking and
    equality check then the details of how the status integer is used are
    abstracted away. This makes the code easier to read. Also future
    updates to the status handling will be easier because the code is in
    one place.
    
    Driver currently uses the CONNECT_STATUS and DISCONNECT_STATUS as
    values, as apposed to opaque values. Because of this driver code
    checks for equality with CONNECT_STATUS and DISCONNECT_STATUS as
    apposed to negating a single check (ie 'foo != CONNECT_STATUS). In
    order to maintain the current functionality we define two separate
    functions is_connect_status() and is_disconnect_status().
    
    Add functions to abstract the status integer check. Update all sites
    that do the check manually to use the newly defined functions.
    
    Signed-off-by: Tobin C. Harding <me@tobin.cc>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index eb15db90733b..a2465391cc94 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -508,5 +508,7 @@ struct ks_wlan_private {
 
 int ks_wlan_net_start(struct net_device *dev);
 int ks_wlan_net_stop(struct net_device *dev);
+bool is_connect_status(u32 status);
+bool is_disconnect_status(u32 status);
 
 #endif /* _KS_WLAN_H */

commit 18bd6dd1f849105b0aca7666d8eb3528b8cd8a8e
Author: Tobin C. Harding <me@tobin.cc>
Date:   Tue Apr 18 10:35:35 2017 +1000

    staging: ks7010: move hw info into dev private data
    
    Currently driver uses a hardware information struct description to
    group some SDIO related functionality (work, work queue, sdio private
    data pointer). This structure is then embedded in the device private
    data structure. Having nested structures described in different header
    files means that to view the device private data programmers must open
    two header files. This structure could be embedded anonymously in the
    device private data and achieve the same result (grouping of function
    specific to SDIO) without the need to open multiple headers. However,
    the SDIO private data structure already has various different data and
    pointers, adding the embedded structure adds little extra meaning and
    lengthens all the dereferences throughout the driver, often meaning
    addition line breaks and braces. We can increase readability and
    reduce code complexity by moving the hardware information data and
    pointers to directly be within the device private data structure
    description.
    
    While preparing for this refactoring it was noted that the identifier
    currently used for the delayed work is 'rw_wq', this is confusing
    since the 'wq' suffix typically means 'work queue'. This identifier
    would be more meaningful if it used the suffix 'dwork' as does the
    declaration of queue_delayed_work() (include/linux/workqueue.h).
    
    The identifier for the work queue is currently 'ks7010sdio_wq'. This
    identifier can be shortened without loss of meaning because there is
    only one work queue within the driver. Identifier 'wq' is typical
    within in-tree driver code and aptly describes the pointer.
    
    Current pointer to the SDIO private data is identified by 'sdio_card',
    this is sufficiently meaningful from within the hw_info structure but
    once the hw_info_t structure is removed the pointer would be better to
    have a prefix appended to it to retain the prior level of meaning.
    
    Move members from struct hw_info_t to struct ks_wlan_private.
    
    Rename identifiers;
    struct delayed_work pointer 'rw_wq' to 'rw_dwork'.
    struct workqueue_struct pointer 'ks7010sdio_wq' to 'wq'.
    struct ks_sdio_card  pointer 'sdio_card' to 'ks_sdio_card'.
    
    Remove structure description hw_info_t. Fix init/destroy calls. Fix
    all call sites, SDIO private data access calls, and queuing calls.
    
    Signed-off-by: Tobin C. Harding <me@tobin.cc>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index b0bc7a8d850c..eb15db90733b 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -413,7 +413,10 @@ struct wps_status_t {
 #endif /* WPS */
 
 struct ks_wlan_private {
-	struct hw_info_t ks_wlan_hw;	/* hardware information */
+	/* hardware information */
+	struct ks_sdio_card *ks_sdio_card;
+	struct workqueue_struct *wq;
+	struct delayed_work rw_dwork;
 	struct tasklet_struct rx_bh_task;
 
 	struct net_device *net_dev;

commit 321dabdc746d995a962d02dd81ecf23ddc3b3169
Author: Tobin C. Harding <me@tobin.cc>
Date:   Tue Apr 18 10:35:34 2017 +1000

    staging: ks7010: move tasklet_struct to ks_wlan_private
    
    Currently a pointer to the tasklet_struct used for bottom half
    processing on the receive path is within the hw_info_t structure. This
    structure is then embedded in the device private data
    structure. Having the tasklet_struct nested does not add meaning to
    the device private data, device private data already (and typically)
    has various data relating to the device, there is no real need to
    separate the tasklet_struct to a SDIO specific structure. While not
    adding allot of extra meaning having the nested structure means the
    programmer must open two header files to read the description of the
    device private data, the code would be easier to read if the device
    private data struct description was not spread over two files.
    
    Move tasklet_struct out of sdio header file and into the device
    private data structure description.
    
    Signed-off-by: Tobin C. Harding <me@tobin.cc>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 79684702fc5b..b0bc7a8d850c 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -414,6 +414,7 @@ struct wps_status_t {
 
 struct ks_wlan_private {
 	struct hw_info_t ks_wlan_hw;	/* hardware information */
+	struct tasklet_struct rx_bh_task;
 
 	struct net_device *net_dev;
 	int reg_net;	/* register_netdev */

commit 07e483c14bd5d149b1c214562654798a5be104b0
Author: Tobin C. Harding <me@tobin.cc>
Date:   Tue Apr 18 10:35:33 2017 +1000

    staging: ks7010: rename wakeup work struct
    
    struct work_struct uses identifier ks_wlan_wakeup_task, this is
    confusing because the 'task' suffix implies that this is a
    tasklet_struct instead of a work struct. Suffix 'work' would be more
    clear. The code would be easier to read if it followed the principle
    of least surprise and used the 'work' suffix for a work_struct
    identifier.
    
    Rename work_struct structure 'ks_wlan_wakeup_task' to 'wakeup_work'.
    
    Signed-off-by: Tobin C. Harding <me@tobin.cc>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 7ba440a7e3d0..79684702fc5b 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -429,7 +429,7 @@ struct ks_wlan_private {
 	u8 *rxp;
 	unsigned int rx_size;
 	struct tasklet_struct sme_task;
-	struct work_struct ks_wlan_wakeup_task;
+	struct work_struct wakeup_work;
 	int scan_ind_count;
 
 	unsigned char eth_addr[ETH_ALEN];

commit 483b10084d5d301089e6ad9e16a24cf501c5d253
Author: Chetan Sethi <cpsethi369@gmail.com>
Date:   Tue Feb 28 12:01:27 2017 +0900

    staging: ks7010: fix coding style issue of aligning comments properly
    
    This patch fixes coding style issue of having block comments using a
    trailing */ on a separate line, warning as issued by checkpatch
    
    Signed-off-by: Chetan Sethi <cpsethi369@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 0e40159d9c6c..7ba440a7e3d0 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -359,7 +359,8 @@ struct wpa_key_t {
 	u8 rx_seq[IW_ENCODE_SEQ_MAX_SIZE];	/* LSB first */
 	struct sockaddr addr;	/* ff:ff:ff:ff:ff:ff for broadcast/multicast
 				 * (group) keys or unicast address for
-				 * individual keys */
+				 * individual keys
+				 */
 	u16 alg;
 	u16 key_len;	/* WEP: 5 or 13, TKIP: 32, CCMP: 16 */
 	u8 key_val[IW_ENCODING_TOKEN_MAX];

commit d670333e808a2a0e9b96b91a4ad5487a6bbb7d57
Author: Chetan Sethi <cpsethi369@gmail.com>
Date:   Tue Feb 28 12:01:07 2017 +0900

    staging: ks7010: fix coding style issue of using __func__ instead of __FUNCTION__
    
    This patch fixes coding style issue of using __func__ instead of gcc
    specific __FUNCTION__, warning as issued by checkpatch
    
    Signed-off-by: Chetan Sethi <cpsethi369@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index f1dfa73a779c..0e40159d9c6c 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -38,7 +38,7 @@
 #define DPRINTK(n, fmt, args...) \
 	do { \
 		if (KS_WLAN_DEBUG > (n)) \
-			pr_notice("%s: "fmt, __FUNCTION__, ## args); \
+			pr_notice("%s: "fmt, __func__, ## args); \
 	} while (0)
 #else
 #define DPRINTK(n, fmt, args...)

commit 1227d7696835ae5b53a7f01649dda487bd436b1f
Author: Chetan Sethi <cpsethi369@gmail.com>
Date:   Tue Feb 28 12:00:45 2017 +0900

    staging: ks7010: fix coding style issue of using pr_notice instead of printk
    
    Signed-off-by: Chetan Sethi <cpsethi369@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 7098c6fe4568..f1dfa73a779c 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -38,7 +38,7 @@
 #define DPRINTK(n, fmt, args...) \
 	do { \
 		if (KS_WLAN_DEBUG > (n)) \
-			printk(KERN_NOTICE "%s: "fmt, __FUNCTION__, ## args); \
+			pr_notice("%s: "fmt, __FUNCTION__, ## args); \
 	} while (0)
 #else
 #define DPRINTK(n, fmt, args...)

commit 05be989d98b7a8ceaa3b10dd60f1f14bd163a06f
Author: Chetan Sethi <cpsethi369@gmail.com>
Date:   Tue Feb 28 12:00:23 2017 +0900

    staging: ks7010: fix coding style issue of enclosing complex macro value in parentheses
    
    This patch fixes error of enclosing complex macro value in parentheses,
    error as issued by checkpatch
    
    Signed-off-by: Chetan Sethi <cpsethi369@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 089ceb9e73c9..7098c6fe4568 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -36,8 +36,10 @@
 
 #ifdef KS_WLAN_DEBUG
 #define DPRINTK(n, fmt, args...) \
-                 if (KS_WLAN_DEBUG > (n)) \
-			printk(KERN_NOTICE "%s: "fmt, __FUNCTION__, ## args)
+	do { \
+		if (KS_WLAN_DEBUG > (n)) \
+			printk(KERN_NOTICE "%s: "fmt, __FUNCTION__, ## args); \
+	} while (0)
 #else
 #define DPRINTK(n, fmt, args...)
 #endif

commit 01d9de8071dbc5585a217f579151dac5cf276e57
Author: Chetan Sethi <cpsethi369@gmail.com>
Date:   Tue Feb 28 11:59:36 2017 +0900

    staging: ks7010: fixed warning of avoiding line over 80 characters
    
    This patch fixes warning of line over 80 characters, as issued by
    checkpatch.pl
    
    Signed-off-by: Chetan Sethi <cpsethi369@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index b563f327dee9..089ceb9e73c9 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -18,10 +18,10 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 
-#include <linux/spinlock.h>	/* spinlock_t                                   */
-#include <linux/sched.h>	/* wait_queue_head_t                            */
-#include <linux/types.h>	/* pid_t                                        */
-#include <linux/netdevice.h>	/* struct net_device_stats,  struct sk_buff     */
+#include <linux/spinlock.h>	/* spinlock_t */
+#include <linux/sched.h>	/* wait_queue_head_t */
+#include <linux/types.h>	/* pid_t */
+#include <linux/netdevice.h>	/* struct net_device_stats,  struct sk_buff */
 #include <linux/etherdevice.h>
 #include <linux/wireless.h>
 #include <linux/atomic.h>	/* struct atomic_t */
@@ -36,7 +36,8 @@
 
 #ifdef KS_WLAN_DEBUG
 #define DPRINTK(n, fmt, args...) \
-                 if (KS_WLAN_DEBUG > (n)) printk(KERN_NOTICE "%s: "fmt, __FUNCTION__, ## args)
+                 if (KS_WLAN_DEBUG > (n)) \
+			printk(KERN_NOTICE "%s: "fmt, __FUNCTION__, ## args)
 #else
 #define DPRINTK(n, fmt, args...)
 #endif

commit f3f45c734eb8b1e352908f6f2af2e2e4951906be
Author: Shiva Kerdel <shiva@exdev.nl>
Date:   Fri Feb 17 00:18:35 2017 +0100

    Staging: ks7010: ks_*: Use the BIT macro for bitwise checks
    
    Changed bit swifting operators to BIT macros (preferred),
    This change will also solve the preferred space surrounding
    the operator checks.
    
    Signed-off-by: Shiva Kerdel <shiva@exdev.nl>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 9ab80e1f123e..b563f327dee9 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -85,23 +85,23 @@ enum {
 };
 
 /* SME flag */
-#define SME_MODE_SET	    (1<<0)
-#define SME_RTS             (1<<1)
-#define SME_FRAG            (1<<2)
-#define SME_WEP_FLAG        (1<<3)
-#define SME_WEP_INDEX       (1<<4)
-#define SME_WEP_VAL1        (1<<5)
-#define SME_WEP_VAL2        (1<<6)
-#define SME_WEP_VAL3        (1<<7)
-#define SME_WEP_VAL4        (1<<8)
+#define SME_MODE_SET	    BIT(0)
+#define SME_RTS             BIT(1)
+#define SME_FRAG            BIT(2)
+#define SME_WEP_FLAG        BIT(3)
+#define SME_WEP_INDEX       BIT(4)
+#define SME_WEP_VAL1        BIT(5)
+#define SME_WEP_VAL2        BIT(6)
+#define SME_WEP_VAL3        BIT(7)
+#define SME_WEP_VAL4        BIT(8)
 #define SME_WEP_VAL_MASK    (SME_WEP_VAL1 | SME_WEP_VAL2 | SME_WEP_VAL3 | SME_WEP_VAL4)
-#define SME_RSN             (1<<9)
-#define SME_RSN_MULTICAST   (1<<10)
-#define SME_RSN_UNICAST	    (1<<11)
-#define SME_RSN_AUTH	    (1<<12)
+#define SME_RSN             BIT(9)
+#define SME_RSN_MULTICAST   BIT(10)
+#define SME_RSN_UNICAST	    BIT(11)
+#define SME_RSN_AUTH	    BIT(12)
 
-#define SME_AP_SCAN         (1<<13)
-#define SME_MULTICAST       (1<<14)
+#define SME_AP_SCAN         BIT(13)
+#define SME_MULTICAST       BIT(14)
 
 /* SME Event */
 enum {

commit db224d31bbcd04fe1e85b40649e61ced97776720
Author: Shiva Kerdel <shiva@exdev.nl>
Date:   Thu Feb 16 17:13:25 2017 +0100

    Staging: ks7010: Add required and preferred spaces around operators
    
    Spaces should be added around operators to improve readability
    and are required in some cases.
    
    Signed-off-by: Shiva Kerdel <shiva@exdev.nl>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index f0c083b2b6aa..9ab80e1f123e 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -36,7 +36,7 @@
 
 #ifdef KS_WLAN_DEBUG
 #define DPRINTK(n, fmt, args...) \
-                 if (KS_WLAN_DEBUG>(n)) printk(KERN_NOTICE "%s: "fmt, __FUNCTION__, ## args)
+                 if (KS_WLAN_DEBUG > (n)) printk(KERN_NOTICE "%s: "fmt, __FUNCTION__, ## args)
 #else
 #define DPRINTK(n, fmt, args...)
 #endif
@@ -94,7 +94,7 @@ enum {
 #define SME_WEP_VAL2        (1<<6)
 #define SME_WEP_VAL3        (1<<7)
 #define SME_WEP_VAL4        (1<<8)
-#define SME_WEP_VAL_MASK    (SME_WEP_VAL1|SME_WEP_VAL2|SME_WEP_VAL3|SME_WEP_VAL4)
+#define SME_WEP_VAL_MASK    (SME_WEP_VAL1 | SME_WEP_VAL2 | SME_WEP_VAL3 | SME_WEP_VAL4)
 #define SME_RSN             (1<<9)
 #define SME_RSN_MULTICAST   (1<<10)
 #define SME_RSN_UNICAST	    (1<<11)

commit 38fb746872a85f66e6858d5858077a2aa5cc9ce2
Author: Shiva Kerdel <shiva@exdev.nl>
Date:   Thu Feb 16 16:31:01 2017 +0100

    Staging: ks7010: ks*: Add missing blank lines after declarations
    
    A blank line should be added after function/struct/union/enum
    declarations.
    
    Signed-off-by: Shiva Kerdel <shiva@exdev.nl>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index c7fa508bffe4..f0c083b2b6aa 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -363,6 +363,7 @@ struct wpa_key_t {
 	u8 tx_mic_key[MIC_KEY_SIZE];
 	u8 rx_mic_key[MIC_KEY_SIZE];
 };
+
 #define WPA_KEY_INDEX_MAX 4
 #define WPA_RX_SEQ_LEN 6
 

commit fac103e0ab8dfc8fecf1462f6f3777ea9744fc4d
Author: Shiva Kerdel <shiva@exdev.nl>
Date:   Fri Feb 10 17:08:14 2017 +0100

    Staging: ks7010: ks_*: Removed blank lines before and after braces.
    
    Removing unnecessary blank lines around braces to solve CHECKS.
    
    Signed-off-by: Shiva Kerdel <shiva@exdev.nl>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 279e9b06fc4b..c7fa508bffe4 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -408,7 +408,6 @@ struct wps_status_t {
 #endif /* WPS */
 
 struct ks_wlan_private {
-
 	struct hw_info_t ks_wlan_hw;	/* hardware information */
 
 	struct net_device *net_dev;

commit 81710951fb36ff5d53fb4cfc8a31e6e73302be83
Author: Punit Vara <punitvara@gmail.com>
Date:   Tue Nov 15 18:27:23 2016 +0530

    Staging: ks7010: Use preffered kernel types
    
    Replace uint8_t, uint16_t and uint32_t with preferred kernel types
    u8, u16 and u32 respectively suggested by checkpatch.pl
    
    Signed-off-by: Punit Vara <punitvara@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 69811706bd24..279e9b06fc4b 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -42,36 +42,36 @@
 #endif
 
 struct ks_wlan_parameter {
-	uint8_t operation_mode;	/* Operation Mode */
-	uint8_t channel;	/*  Channel */
-	uint8_t tx_rate;	/*  Transmit Rate */
+	u8 operation_mode;	/* Operation Mode */
+	u8 channel;	/*  Channel */
+	u8 tx_rate;	/*  Transmit Rate */
 	struct {
-		uint8_t size;
-		uint8_t body[16];
+		u8 size;
+		u8 body[16];
 	} rate_set;
-	uint8_t bssid[ETH_ALEN];	/* BSSID */
+	u8 bssid[ETH_ALEN];	/* BSSID */
 	struct {
-		uint8_t size;
-		uint8_t body[32 + 1];
+		u8 size;
+		u8 body[32 + 1];
 	} ssid;	/*  SSID */
-	uint8_t preamble;	/*  Preamble */
-	uint8_t powermgt;	/*  PowerManagementMode */
-	uint32_t scan_type;	/*  AP List Scan Type */
+	u8 preamble;	/*  Preamble */
+	u8 powermgt;	/*  PowerManagementMode */
+	u32 scan_type;	/*  AP List Scan Type */
 #define BEACON_LOST_COUNT_MIN 0
 #define BEACON_LOST_COUNT_MAX 65535
-	uint32_t beacon_lost_count;	/*  Beacon Lost Count */
-	uint32_t rts;	/*  RTS Threashold */
-	uint32_t fragment;	/*  Fragmentation Threashold */
-	uint32_t privacy_invoked;
-	uint32_t wep_index;
+	u32 beacon_lost_count;	/*  Beacon Lost Count */
+	u32 rts;	/*  RTS Threashold */
+	u32 fragment;	/*  Fragmentation Threashold */
+	u32 privacy_invoked;
+	u32 wep_index;
 	struct {
-		uint8_t size;
-		uint8_t val[13 * 2 + 1];
+		u8 size;
+		u8 val[13 * 2 + 1];
 	} wep_key[4];
-	uint16_t authenticate_type;
-	uint16_t phy_type;	/* 11b/11g/11bg mode type */
-	uint16_t cts_mode;	/* for 11g/11bg mode cts mode */
-	uint16_t phy_info_timer;	/* phy information timer */
+	u16 authenticate_type;
+	u16 phy_type;	/* 11b/11g/11bg mode type */
+	u16 cts_mode;	/* for 11g/11bg mode cts mode */
+	u16 phy_info_timer;	/* phy information timer */
 };
 
 enum {
@@ -215,37 +215,37 @@ struct hostt_t {
 
 #define RSN_IE_BODY_MAX 64
 struct rsn_ie_t {
-	uint8_t id;	/* 0xdd = WPA or 0x30 = RSN */
-	uint8_t size;	/* max ? 255 ? */
-	uint8_t body[RSN_IE_BODY_MAX];
+	u8 id;	/* 0xdd = WPA or 0x30 = RSN */
+	u8 size;	/* max ? 255 ? */
+	u8 body[RSN_IE_BODY_MAX];
 } __packed;
 
 #ifdef WPS
 #define WPS_IE_BODY_MAX 255
 struct wps_ie_t {
-	uint8_t id;	/* 221 'dd <len> 00 50 F2 04' */
-	uint8_t size;	/* max ? 255 ? */
-	uint8_t body[WPS_IE_BODY_MAX];
+	u8 id;	/* 221 'dd <len> 00 50 F2 04' */
+	u8 size;	/* max ? 255 ? */
+	u8 body[WPS_IE_BODY_MAX];
 } __packed;
 #endif /* WPS */
 
 struct local_ap_t {
-	uint8_t bssid[6];
-	uint8_t rssi;
-	uint8_t sq;
+	u8 bssid[6];
+	u8 rssi;
+	u8 sq;
 	struct {
-		uint8_t size;
-		uint8_t body[32];
-		uint8_t ssid_pad;
+		u8 size;
+		u8 body[32];
+		u8 ssid_pad;
 	} ssid;
 	struct {
-		uint8_t size;
-		uint8_t body[16];
-		uint8_t rate_pad;
+		u8 size;
+		u8 body[16];
+		u8 rate_pad;
 	} rate_set;
-	uint16_t capability;
-	uint8_t channel;
-	uint8_t noise;
+	u16 capability;
+	u8 channel;
+	u8 noise;
 	struct rsn_ie_t wpa_ie;
 	struct rsn_ie_t rsn_ie;
 #ifdef WPS
@@ -261,15 +261,15 @@ struct local_aplist_t {
 };
 
 struct local_gain_t {
-	uint8_t TxMode;
-	uint8_t RxMode;
-	uint8_t TxGain;
-	uint8_t RxGain;
+	u8 TxMode;
+	u8 RxMode;
+	u8 TxGain;
+	u8 RxGain;
 };
 
 struct local_eeprom_sum_t {
-	uint8_t type;
-	uint8_t result;
+	u8 type;
+	u8 result;
 };
 
 enum {
@@ -351,25 +351,25 @@ enum {
 #define MIC_KEY_SIZE 8
 
 struct wpa_key_t {
-	uint32_t ext_flags;	/* IW_ENCODE_EXT_xxx */
-	uint8_t tx_seq[IW_ENCODE_SEQ_MAX_SIZE];	/* LSB first */
-	uint8_t rx_seq[IW_ENCODE_SEQ_MAX_SIZE];	/* LSB first */
+	u32 ext_flags;	/* IW_ENCODE_EXT_xxx */
+	u8 tx_seq[IW_ENCODE_SEQ_MAX_SIZE];	/* LSB first */
+	u8 rx_seq[IW_ENCODE_SEQ_MAX_SIZE];	/* LSB first */
 	struct sockaddr addr;	/* ff:ff:ff:ff:ff:ff for broadcast/multicast
 				 * (group) keys or unicast address for
 				 * individual keys */
-	uint16_t alg;
-	uint16_t key_len;	/* WEP: 5 or 13, TKIP: 32, CCMP: 16 */
-	uint8_t key_val[IW_ENCODING_TOKEN_MAX];
-	uint8_t tx_mic_key[MIC_KEY_SIZE];
-	uint8_t rx_mic_key[MIC_KEY_SIZE];
+	u16 alg;
+	u16 key_len;	/* WEP: 5 or 13, TKIP: 32, CCMP: 16 */
+	u8 key_val[IW_ENCODING_TOKEN_MAX];
+	u8 tx_mic_key[MIC_KEY_SIZE];
+	u8 rx_mic_key[MIC_KEY_SIZE];
 };
 #define WPA_KEY_INDEX_MAX 4
 #define WPA_RX_SEQ_LEN 6
 
 struct mic_failure_t {
-	uint16_t failure;	/* MIC Failure counter 0 or 1 or 2 */
-	uint16_t counter;	/* 1sec counter 0-60 */
-	uint32_t last_failure_time;
+	u16 failure;	/* MIC Failure counter 0 or 1 or 2 */
+	u16 counter;	/* 1sec counter 0-60 */
+	u32 last_failure_time;
 	int stop;	/* stop flag */
 };
 
@@ -390,12 +390,12 @@ struct wpa_status_t {
 #include <linux/list.h>
 #define PMK_LIST_MAX 8
 struct pmk_list_t {
-	uint16_t size;
+	u16 size;
 	struct list_head head;
 	struct pmk_t {
 		struct list_head list;
-		uint8_t bssid[ETH_ALEN];
-		uint8_t pmkid[IW_PMKID_LEN];
+		u8 bssid[ETH_ALEN];
+		u8 pmkid[IW_PMKID_LEN];
 	} pmk[PMK_LIST_MAX];
 };
 
@@ -403,7 +403,7 @@ struct pmk_list_t {
 struct wps_status_t {
 	int wps_enabled;
 	int ielen;
-	uint8_t ie[255];
+	u8 ie[255];
 };
 #endif /* WPS */
 
@@ -438,7 +438,7 @@ struct ks_wlan_private {
 	struct pmk_list_t pmklist;
 	/* wireless parameter */
 	struct ks_wlan_parameter reg;
-	uint8_t current_rate;
+	u8 current_rate;
 
 	char nick[IW_ESSID_MAX_SIZE + 1];
 
@@ -471,24 +471,24 @@ struct ks_wlan_private {
 	/* spinlock_t lock; */
 #define FORCE_DISCONNECT    0x80000000
 #define CONNECT_STATUS_MASK 0x7FFFFFFF
-	uint32_t connect_status;	/* connect status */
+	u32 connect_status;	/* connect status */
 	int infra_status;	/* Infractructure status */
 
-	uint8_t data_buff[0x1000];
+	u8 data_buff[0x1000];
 
-	uint8_t scan_ssid_len;
-	uint8_t scan_ssid[IW_ESSID_MAX_SIZE + 1];
+	u8 scan_ssid_len;
+	u8 scan_ssid[IW_ESSID_MAX_SIZE + 1];
 	struct local_gain_t gain;
 #ifdef WPS
 	struct net_device *l2_dev;
 	int l2_fd;
 	struct wps_status_t wps;
 #endif /* WPS */
-	uint8_t sleep_mode;
+	u8 sleep_mode;
 
-	uint8_t region;
+	u8 region;
 	struct local_eeprom_sum_t eeprom_sum;
-	uint8_t eeprom_checksum;
+	u8 eeprom_checksum;
 
 	struct hostt_t hostt;
 

commit 5e935b782a7177361603ffb061c5d2fe49ea6b80
Author: Wei Yongjun <weiyongjun1@huawei.com>
Date:   Tue Oct 18 14:38:06 2016 +0000

    staging: ks7010: remove unused including <linux/version.h>
    
    Remove including <linux/version.h> that don't need it.
    
    Signed-off-by: Wei Yongjun <weiyongjun1@huawei.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 5851714b6359..69811706bd24 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -14,7 +14,6 @@
 
 #define WPS
 
-#include <linux/version.h>
 #include <linux/interrupt.h>
 #include <linux/kernel.h>
 #include <linux/module.h>

commit 592c61165b52ef2047aad179fc8bd63bdc5e4770
Author: Sabitha George <sabitha.george@gmail.com>
Date:   Sun Oct 9 11:24:02 2016 +0530

    staging: ks7010: Replace header files
    
    This patch replaces inclusion of asm/atomic.h with linux/atomic.h and
    asm/io.h with linux/io.h to fix checkpatch warning in ks_wlan.h
    
    Signed-off-by: Sabitha George <sabitha.george@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index c2cc288ae899..5851714b6359 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -25,13 +25,13 @@
 #include <linux/netdevice.h>	/* struct net_device_stats,  struct sk_buff     */
 #include <linux/etherdevice.h>
 #include <linux/wireless.h>
-#include <asm/atomic.h>	/* struct atmic_t                               */
+#include <linux/atomic.h>	/* struct atomic_t */
 #include <linux/timer.h>	/* struct timer_list */
 #include <linux/string.h>
 #include <linux/completion.h>	/* struct completion */
 #include <linux/workqueue.h>
 
-#include <asm/io.h>
+#include <linux/io.h>
 
 #include "ks7010_sdio.h"
 

commit 2460563fb490b8061d614f99b1ce1a470fde4913
Author: Matt Kilgore <mattkilgore12@gmail.com>
Date:   Tue Sep 27 02:05:44 2016 -0400

    staging: ks7010: Use __packed over __attribute__((packed))
    
    This replaces uses of __attribute__((packed)) with __packed, which is
    recommended to be used over the direct __attribute__.  This patch then
    includes <linux/compiler.h> as necessary to use __packed.
    
    Signed-off-by: Matthew Kilgore <mattkilgore12@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 693e7d8d35b4..c2cc288ae899 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -219,7 +219,7 @@ struct rsn_ie_t {
 	uint8_t id;	/* 0xdd = WPA or 0x30 = RSN */
 	uint8_t size;	/* max ? 255 ? */
 	uint8_t body[RSN_IE_BODY_MAX];
-} __attribute__ ((packed));
+} __packed;
 
 #ifdef WPS
 #define WPS_IE_BODY_MAX 255
@@ -227,7 +227,7 @@ struct wps_ie_t {
 	uint8_t id;	/* 221 'dd <len> 00 50 F2 04' */
 	uint8_t size;	/* max ? 255 ? */
 	uint8_t body[WPS_IE_BODY_MAX];
-} __attribute__ ((packed));
+} __packed;
 #endif /* WPS */
 
 struct local_ap_t {

commit 2751bc918e61a114704f2a6673d316a38878319d
Author: Bhumika Goyal <bhumirks@gmail.com>
Date:   Sat Sep 17 13:09:13 2016 +0530

    Staging: ks7010: Remove extern keyword from function declaration
    
    Remove extern specifier from function declaration as they have
    it by default. Also move extern declaration from .c files to
    their respective header file 'ks_hostif.h'. Coccinelle was used
    to remove extern and other changes were done by hand.
    Script:
    @@
    identifier func;
    type T;
    @@
    - extern
    T func(...);
    
    Signed-off-by: Bhumika Goyal <bhumirks@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index f05dc0122fcb..693e7d8d35b4 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -499,7 +499,7 @@ struct ks_wlan_private {
 	uint wakeup_count;	/* for detect wakeup loop */
 };
 
-extern int ks_wlan_net_start(struct net_device *dev);
-extern int ks_wlan_net_stop(struct net_device *dev);
+int ks_wlan_net_start(struct net_device *dev);
+int ks_wlan_net_stop(struct net_device *dev);
 
 #endif /* _KS_WLAN_H */

commit 30776cf921cd9033d88da56d33707515ce892a8a
Author: Wolfram Sang <wsa@the-dreams.de>
Date:   Fri Jun 17 10:46:53 2016 +0200

    staging: ks7010: function declaration should be in a header file
    
    Signed-off-by: Wolfram Sang <wsa@the-dreams.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 019c43031d3b..f05dc0122fcb 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -499,4 +499,7 @@ struct ks_wlan_private {
 	uint wakeup_count;	/* for detect wakeup loop */
 };
 
+extern int ks_wlan_net_start(struct net_device *dev);
+extern int ks_wlan_net_stop(struct net_device *dev);
+
 #endif /* _KS_WLAN_H */

commit 6ee9169b407f70334f59cdf5a40a72a5d27f0ec2
Author: Wolfram Sang <wsa@the-dreams.de>
Date:   Fri Jun 17 10:46:52 2016 +0200

    staging: ks7010: remove cfg file handling
    
    I verified that all but two settings from the config file can be set up
    also via 'iwconfig' or 'iwpriv'. The two missing are ROM_FILE and
    PhyInformationTimer. ROM_FILE can be easily dropped. There is only one
    known firmware floating on the net, so, the name is fix and we can make
    this constant. Frankly, I don't know when PhyInformationTimer needs to
    be set to non-zero. But if we need it somewhen, there is already
    (currently commented out) code to add this as another private method, so
    we could use that. Summa summarum: We can remove the config file
    handling and the example config file. The only useful action,
    initialization of the configuration struct, is now moved to the sdio
    main file.
    
    Signed-off-by: Wolfram Sang <wsa@the-dreams.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index c42d99c6bc1f..019c43031d3b 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -73,7 +73,6 @@ struct ks_wlan_parameter {
 	uint16_t phy_type;	/* 11b/11g/11bg mode type */
 	uint16_t cts_mode;	/* for 11g/11bg mode cts mode */
 	uint16_t phy_info_timer;	/* phy information timer */
-	char rom_file[256];
 };
 
 enum {

commit c5d9a03031a645a8c63fdaa6a650113f8bd55b2b
Author: Wolfram Sang <wsa+renesas@sang-engineering.com>
Date:   Tue May 31 12:56:43 2016 +0200

    staging: ks7010: cleanup file headers
    
    Remove svn-ids and fix typos in the licence declaration. Add my
    copyright to the sdio code which I worked on mainly.
    
    Signed-off-by: Wolfram Sang <wsa+renesas@sang-engineering.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index a2126c2e728d..c42d99c6bc1f 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -1,15 +1,12 @@
 /*
  *   Driver for KeyStream IEEE802.11 b/g wireless LAN cards.
- *   
- *   ks_wlan.h
- *   $Id: ks_wlan.h 994 2009-09-14 01:51:16Z sekine $
  *
  *   Copyright (C) 2006-2008 KeyStream Corp.
  *   Copyright (C) 2009 Renesas Technology Corp.
  *
  *   This program is free software; you can redistribute it and/or modify
- *   it undr the terms of the GNU General Public License version 2 as
- *   published by the Free Sotware Foundation.
+ *   it under the terms of the GNU General Public License version 2 as
+ *   published by the Free Software Foundation.
  */
 
 #ifndef _KS_WLAN_H

commit 9adca34b7eea096db6757ee7263fbc002e64c5eb
Author: Wolfram Sang <wsa+renesas@sang-engineering.com>
Date:   Tue May 31 12:56:42 2016 +0200

    staging: ks7010: drop counting sd errors
    
    They were counted but never really used anywhere. Also change the printk
    to a debug print, since it mostly shows on the expected -ENOMEDIUM on
    card removal.
    
    Signed-off-by: Wolfram Sang <wsa+renesas@sang-engineering.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index f0f9f8ef7d61..a2126c2e728d 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -500,9 +500,7 @@ struct ks_wlan_private {
 	unsigned long last_doze;
 	unsigned long last_wakeup;
 
-	uint sdio_error_count;	/* SDIO error */
 	uint wakeup_count;	/* for detect wakeup loop */
-
 };
 
 #endif /* _KS_WLAN_H */

commit d6e25e7048eb6a9f086f3cbf4a42a7a6a5b66bae
Author: Wolfram Sang <wsa+renesas@sang-engineering.com>
Date:   Tue May 31 12:56:32 2016 +0200

    staging: ks7010: indent ks_wlan.h
    
    Signed-off-by: Wolfram Sang <wsa+renesas@sang-engineering.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 58e3a5a6b444..f0f9f8ef7d61 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -22,16 +22,16 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 
-#include <linux/spinlock.h>	/* spinlock_t					*/
-#include <linux/sched.h>	/* wait_queue_head_t				*/
-#include <linux/types.h>	/* pid_t					*/
-#include <linux/netdevice.h>	/* struct net_device_stats,  struct sk_buff	*/
+#include <linux/spinlock.h>	/* spinlock_t                                   */
+#include <linux/sched.h>	/* wait_queue_head_t                            */
+#include <linux/types.h>	/* pid_t                                        */
+#include <linux/netdevice.h>	/* struct net_device_stats,  struct sk_buff     */
 #include <linux/etherdevice.h>
 #include <linux/wireless.h>
-#include <asm/atomic.h> 	/* struct atmic_t				*/
+#include <asm/atomic.h>	/* struct atmic_t                               */
 #include <linux/timer.h>	/* struct timer_list */
 #include <linux/string.h>
-#include <linux/completion.h>   /* struct completion */
+#include <linux/completion.h>	/* struct completion */
 #include <linux/workqueue.h>
 
 #include <asm/io.h>
@@ -46,37 +46,37 @@
 #endif
 
 struct ks_wlan_parameter {
-	uint8_t		operation_mode;	   /* Operation Mode */
-	uint8_t		channel;	   /*  Channel */
-	uint8_t		tx_rate;	   /*  Transmit Rate */
+	uint8_t operation_mode;	/* Operation Mode */
+	uint8_t channel;	/*  Channel */
+	uint8_t tx_rate;	/*  Transmit Rate */
 	struct {
 		uint8_t size;
 		uint8_t body[16];
 	} rate_set;
-	uint8_t		bssid[ETH_ALEN];	/* BSSID */
+	uint8_t bssid[ETH_ALEN];	/* BSSID */
 	struct {
 		uint8_t size;
-		uint8_t body[32+1];
-	} ssid;				   /*  SSID */
-	uint8_t		preamble;	   /*  Preamble */
-	uint8_t		powermgt;	   /*  PowerManagementMode */
-	uint32_t	scan_type;         /*  AP List Scan Type */
+		uint8_t body[32 + 1];
+	} ssid;	/*  SSID */
+	uint8_t preamble;	/*  Preamble */
+	uint8_t powermgt;	/*  PowerManagementMode */
+	uint32_t scan_type;	/*  AP List Scan Type */
 #define BEACON_LOST_COUNT_MIN 0
 #define BEACON_LOST_COUNT_MAX 65535
-	uint32_t	beacon_lost_count; /*  Beacon Lost Count */
-	uint32_t	rts;		   /*  RTS Threashold */
-	uint32_t	fragment;	   /*  Fragmentation Threashold */
-	uint32_t	privacy_invoked;
-	uint32_t	wep_index;
+	uint32_t beacon_lost_count;	/*  Beacon Lost Count */
+	uint32_t rts;	/*  RTS Threashold */
+	uint32_t fragment;	/*  Fragmentation Threashold */
+	uint32_t privacy_invoked;
+	uint32_t wep_index;
 	struct {
 		uint8_t size;
-		uint8_t val[13*2+1];
+		uint8_t val[13 * 2 + 1];
 	} wep_key[4];
-	uint16_t	authenticate_type;	
-	uint16_t	phy_type; /* 11b/11g/11bg mode type*/
-	uint16_t	cts_mode; /* for 11g/11bg mode cts mode */
-	uint16_t	phy_info_timer; /* phy information timer */
-	char		rom_file[256];
+	uint16_t authenticate_type;
+	uint16_t phy_type;	/* 11b/11g/11bg mode type */
+	uint16_t cts_mode;	/* for 11g/11bg mode cts mode */
+	uint16_t phy_info_timer;	/* phy information timer */
+	char rom_file[256];
 };
 
 enum {
@@ -157,7 +157,6 @@ enum {
 	SME_START_REQUEST,
 	SME_GET_EEPROM_CKSUM,
 
-
 	SME_MIC_FAILURE_CONFIRM,
 	SME_START_CONFIRM,
 
@@ -187,7 +186,7 @@ enum {
 	SME_WEP_SET_CONFIRM,
 	SME_TERMINATE,
 
-	SME_EVENT_SIZE        /* end */
+	SME_EVENT_SIZE	/* end */
 };
 
 /* SME Status */
@@ -200,58 +199,58 @@ enum {
 
 #define	SME_EVENT_BUFF_SIZE	128
 
-struct	sme_info{
-	int	sme_status;
-	int	event_buff[SME_EVENT_BUFF_SIZE];
-	unsigned int	qhead;
-	unsigned int	qtail;
+struct sme_info {
+	int sme_status;
+	int event_buff[SME_EVENT_BUFF_SIZE];
+	unsigned int qhead;
+	unsigned int qtail;
 #ifdef KS_WLAN_DEBUG
-  /* for debug */
+	/* for debug */
 	unsigned int max_event_count;
 #endif
-	spinlock_t    sme_spin;
+	spinlock_t sme_spin;
 	unsigned long sme_flag;
 };
 
-struct	hostt_t{
-	int	buff[SME_EVENT_BUFF_SIZE];
-	unsigned int	qhead;
-	unsigned int	qtail;
+struct hostt_t {
+	int buff[SME_EVENT_BUFF_SIZE];
+	unsigned int qhead;
+	unsigned int qtail;
 };
 
 #define RSN_IE_BODY_MAX 64
 struct rsn_ie_t {
-	uint8_t	id; /* 0xdd = WPA or 0x30 = RSN */
-	uint8_t	size; /* max ? 255 ? */
-	uint8_t	body[RSN_IE_BODY_MAX];
-} __attribute__((packed));
+	uint8_t id;	/* 0xdd = WPA or 0x30 = RSN */
+	uint8_t size;	/* max ? 255 ? */
+	uint8_t body[RSN_IE_BODY_MAX];
+} __attribute__ ((packed));
 
 #ifdef WPS
 #define WPS_IE_BODY_MAX 255
 struct wps_ie_t {
-	uint8_t id; /* 221 'dd <len> 00 50 F2 04' */
-	uint8_t size; /* max ? 255 ? */
+	uint8_t id;	/* 221 'dd <len> 00 50 F2 04' */
+	uint8_t size;	/* max ? 255 ? */
 	uint8_t body[WPS_IE_BODY_MAX];
-} __attribute__((packed));
+} __attribute__ ((packed));
 #endif /* WPS */
 
 struct local_ap_t {
-	uint8_t	bssid[6];
-	uint8_t	rssi;
-	uint8_t	sq;
+	uint8_t bssid[6];
+	uint8_t rssi;
+	uint8_t sq;
 	struct {
-		uint8_t	size;
-		uint8_t	body[32];
-		uint8_t	ssid_pad;
+		uint8_t size;
+		uint8_t body[32];
+		uint8_t ssid_pad;
 	} ssid;
 	struct {
-		uint8_t	size;
-		uint8_t	body[16];
-		uint8_t	rate_pad;
+		uint8_t size;
+		uint8_t body[16];
+		uint8_t rate_pad;
 	} rate_set;
-	uint16_t	capability;
-	uint8_t	channel;
-	uint8_t	noise;
+	uint16_t capability;
+	uint8_t channel;
+	uint8_t noise;
 	struct rsn_ie_t wpa_ie;
 	struct rsn_ie_t rsn_ie;
 #ifdef WPS
@@ -263,19 +262,19 @@ struct local_ap_t {
 #define LOCAL_CURRENT_AP LOCAL_APLIST_MAX
 struct local_aplist_t {
 	int size;
-	struct local_ap_t ap[LOCAL_APLIST_MAX+1];
+	struct local_ap_t ap[LOCAL_APLIST_MAX + 1];
 };
 
-struct local_gain_t{
-	uint8_t	TxMode;
-	uint8_t	RxMode;
-	uint8_t	TxGain;
-	uint8_t	RxGain;
+struct local_gain_t {
+	uint8_t TxMode;
+	uint8_t RxMode;
+	uint8_t TxGain;
+	uint8_t RxGain;
 };
 
-struct local_eeprom_sum_t{
-	uint8_t	type;
-	uint8_t	result;
+struct local_eeprom_sum_t {
+	uint8_t type;
+	uint8_t result;
 };
 
 enum {
@@ -285,7 +284,6 @@ enum {
 	EEPROM_NG,
 };
 
-
 /* Power Save Status */
 enum {
 	PS_NONE,
@@ -297,22 +295,22 @@ enum {
 };
 
 struct power_save_status_t {
-        atomic_t	  status;      	/* initialvalue 0 */
+	atomic_t status;	/* initialvalue 0 */
 	struct completion wakeup_wait;
-	atomic_t	  confirm_wait;
-	atomic_t	  snooze_guard;
+	atomic_t confirm_wait;
+	atomic_t snooze_guard;
 };
 
 struct sleep_status_t {
-        atomic_t	  status;      	/* initialvalue 0 */
-	atomic_t	  doze_request;
-	atomic_t	  wakeup_request;
+	atomic_t status;	/* initialvalue 0 */
+	atomic_t doze_request;
+	atomic_t wakeup_request;
 };
 
 /* WPA */
 struct scan_ext_t {
 	unsigned int flag;
-	char ssid[IW_ESSID_MAX_SIZE+1];
+	char ssid[IW_ESSID_MAX_SIZE + 1];
 };
 
 enum {
@@ -337,7 +335,7 @@ enum {
 
 #define CIPHER_ID_LEN    4
 
-enum { 
+enum {
 	KEY_MGMT_802_1X,
 	KEY_MGMT_PSK,
 	KEY_MGMT_WPANONE,
@@ -358,26 +356,26 @@ enum {
 #define MIC_KEY_SIZE 8
 
 struct wpa_key_t {
-	uint32_t	ext_flags; /* IW_ENCODE_EXT_xxx */
-	uint8_t	tx_seq[IW_ENCODE_SEQ_MAX_SIZE]; /* LSB first */
-	uint8_t	rx_seq[IW_ENCODE_SEQ_MAX_SIZE]; /* LSB first */
-	struct sockaddr	addr; /* ff:ff:ff:ff:ff:ff for broadcast/multicast
-			       * (group) keys or unicast address for
-			       * individual keys */
-	uint16_t	alg;
-	uint16_t	key_len; /* WEP: 5 or 13, TKIP: 32, CCMP: 16 */
-	uint8_t	key_val[IW_ENCODING_TOKEN_MAX];
-	uint8_t	tx_mic_key[MIC_KEY_SIZE];
-	uint8_t	rx_mic_key[MIC_KEY_SIZE];
+	uint32_t ext_flags;	/* IW_ENCODE_EXT_xxx */
+	uint8_t tx_seq[IW_ENCODE_SEQ_MAX_SIZE];	/* LSB first */
+	uint8_t rx_seq[IW_ENCODE_SEQ_MAX_SIZE];	/* LSB first */
+	struct sockaddr addr;	/* ff:ff:ff:ff:ff:ff for broadcast/multicast
+				 * (group) keys or unicast address for
+				 * individual keys */
+	uint16_t alg;
+	uint16_t key_len;	/* WEP: 5 or 13, TKIP: 32, CCMP: 16 */
+	uint8_t key_val[IW_ENCODING_TOKEN_MAX];
+	uint8_t tx_mic_key[MIC_KEY_SIZE];
+	uint8_t rx_mic_key[MIC_KEY_SIZE];
 };
 #define WPA_KEY_INDEX_MAX 4
 #define WPA_RX_SEQ_LEN 6
 
 struct mic_failure_t {
-	uint16_t	failure; /* MIC Failure counter 0 or 1 or 2 */
-	uint16_t	counter; /* 1sec counter 0-60 */
-	uint32_t	last_failure_time;
-	int stop; /* stop flag */
+	uint16_t failure;	/* MIC Failure counter 0 or 1 or 2 */
+	uint16_t counter;	/* 1sec counter 0-60 */
+	uint32_t last_failure_time;
+	int stop;	/* stop flag */
 };
 
 struct wpa_status_t {
@@ -401,36 +399,36 @@ struct pmk_list_t {
 	struct list_head head;
 	struct pmk_t {
 		struct list_head list;
-		uint8_t	bssid[ETH_ALEN];
-		uint8_t	pmkid[IW_PMKID_LEN];
+		uint8_t bssid[ETH_ALEN];
+		uint8_t pmkid[IW_PMKID_LEN];
 	} pmk[PMK_LIST_MAX];
 };
 
 #ifdef WPS
 struct wps_status_t {
-       int wps_enabled;
-       int ielen;
-       uint8_t ie[255];
+	int wps_enabled;
+	int ielen;
+	uint8_t ie[255];
 };
 #endif /* WPS */
 
 struct ks_wlan_private {
 
-	struct hw_info_t ks_wlan_hw;  /* hardware information */
+	struct hw_info_t ks_wlan_hw;	/* hardware information */
 
 	struct net_device *net_dev;
-	int reg_net; /* register_netdev */
+	int reg_net;	/* register_netdev */
 	struct net_device_stats nstats;
 	struct iw_statistics wstats;
 
 	struct completion confirm_wait;
 
-        /* trx device & sme */
+	/* trx device & sme */
 	struct tx_device tx_dev;
 	struct rx_device rx_dev;
-	struct sme_info  sme_i;
+	struct sme_info sme_i;
 	u8 *rxp;
-	unsigned int  rx_size;
+	unsigned int rx_size;
 	struct tasklet_struct sme_task;
 	struct work_struct ks_wlan_wakeup_task;
 	int scan_ind_count;
@@ -443,33 +441,33 @@ struct ks_wlan_private {
 	struct sleep_status_t sleepstatus;
 	struct wpa_status_t wpa;
 	struct pmk_list_t pmklist;
-        /* wireless parameter */
+	/* wireless parameter */
 	struct ks_wlan_parameter reg;
 	uint8_t current_rate;
 
-	char nick[IW_ESSID_MAX_SIZE+1];
-	
-        spinlock_t multicast_spin;
+	char nick[IW_ESSID_MAX_SIZE + 1];
+
+	spinlock_t multicast_spin;
 
 	spinlock_t dev_read_lock;
-        wait_queue_head_t devread_wait;
+	wait_queue_head_t devread_wait;
 
-	unsigned int need_commit; /* for ioctl */
+	unsigned int need_commit;	/* for ioctl */
 
-        /* DeviceIoControl */
+	/* DeviceIoControl */
 	int device_open_status;
 	atomic_t event_count;
-        atomic_t rec_count;
-        int dev_count; 
+	atomic_t rec_count;
+	int dev_count;
 #define DEVICE_STOCK_COUNT 20
 	unsigned char *dev_data[DEVICE_STOCK_COUNT];
 	int dev_size[DEVICE_STOCK_COUNT];
 
-        /* ioctl : IOCTL_FIRMWARE_VERSION */
-	unsigned char firmware_version[128+1];
+	/* ioctl : IOCTL_FIRMWARE_VERSION */
+	unsigned char firmware_version[128 + 1];
 	int version_size;
 
-	int mac_address_valid; /* Mac Address Status */
+	int mac_address_valid;	/* Mac Address Status */
 
 	int dev_state;
 
@@ -478,35 +476,33 @@ struct ks_wlan_private {
 	/* spinlock_t lock; */
 #define FORCE_DISCONNECT    0x80000000
 #define CONNECT_STATUS_MASK 0x7FFFFFFF
-	uint32_t connect_status;    /* connect status */
-	int infra_status;  /* Infractructure status */
+	uint32_t connect_status;	/* connect status */
+	int infra_status;	/* Infractructure status */
 
-        uint8_t data_buff[0x1000];
+	uint8_t data_buff[0x1000];
 
 	uint8_t scan_ssid_len;
-	uint8_t scan_ssid[IW_ESSID_MAX_SIZE+1];
+	uint8_t scan_ssid[IW_ESSID_MAX_SIZE + 1];
 	struct local_gain_t gain;
 #ifdef WPS
 	struct net_device *l2_dev;
-	int l2_fd;      
+	int l2_fd;
 	struct wps_status_t wps;
 #endif /* WPS */
- 	uint8_t sleep_mode;
+	uint8_t sleep_mode;
 
 	uint8_t region;
 	struct local_eeprom_sum_t eeprom_sum;
 	uint8_t eeprom_checksum;
 
-	struct hostt_t  hostt;
+	struct hostt_t hostt;
 
 	unsigned long last_doze;
 	unsigned long last_wakeup;
 
-	uint   sdio_error_count;  /* SDIO error */
-	uint   wakeup_count;      /* for detect wakeup loop */
-	
-};
-
+	uint sdio_error_count;	/* SDIO error */
+	uint wakeup_count;	/* for detect wakeup loop */
 
+};
 
 #endif /* _KS_WLAN_H */

commit feedcf1a5f3d4fc964d9f7b4d755fc0992378abf
Author: Wolfram Sang <wsa+renesas@sang-engineering.com>
Date:   Tue May 31 12:56:26 2016 +0200

    staging: ks7010: remove unecessary typedef
    
    Let's simply specify the struct to keep in sync with kernel coding
    style.
    
    Signed-off-by: Wolfram Sang <wsa+renesas@sang-engineering.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index c460741c6606..58e3a5a6b444 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -414,7 +414,7 @@ struct wps_status_t {
 };
 #endif /* WPS */
 
-typedef struct ks_wlan_private{
+struct ks_wlan_private {
 
 	struct hw_info_t ks_wlan_hw;  /* hardware information */
 
@@ -505,7 +505,7 @@ typedef struct ks_wlan_private{
 	uint   sdio_error_count;  /* SDIO error */
 	uint   wakeup_count;      /* for detect wakeup loop */
 	
-} ks_wlan_private; 
+};
 
 
 

commit 564efd793545d245ed158e5855dbee9706864365
Author: Wolfram Sang <wsa+renesas@sang-engineering.com>
Date:   Tue May 31 12:56:21 2016 +0200

    staging: ks7010: delete seperate debug header
    
    Move the one debug macro to the generic wlan header.
    
    Signed-off-by: Wolfram Sang <wsa+renesas@sang-engineering.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 6bd016414a4f..c460741c6606 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -38,6 +38,13 @@
 
 #include "ks7010_sdio.h"
 
+#ifdef KS_WLAN_DEBUG
+#define DPRINTK(n, fmt, args...) \
+                 if (KS_WLAN_DEBUG>(n)) printk(KERN_NOTICE "%s: "fmt, __FUNCTION__, ## args)
+#else
+#define DPRINTK(n, fmt, args...)
+#endif
+
 struct ks_wlan_parameter {
 	uint8_t		operation_mode;	   /* Operation Mode */
 	uint8_t		channel;	   /*  Channel */

commit 72bf750007297c33fe2331d2125118d4885367c2
Author: Wolfram Sang <wsa+renesas@sang-engineering.com>
Date:   Tue May 31 12:56:17 2016 +0200

    staging: ks7010: remove code for old kernel versions
    
    No need to be backwards compatible.
    
    Signed-off-by: Wolfram Sang <wsa+renesas@sang-engineering.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index 329a062419fe..6bd016414a4f 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -18,9 +18,6 @@
 #define WPS
 
 #include <linux/version.h>
-#if (LINUX_VERSION_CODE < KERNEL_VERSION(2,6,24)) 
-#include <linux/config.h>
-#endif
 #include <linux/interrupt.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
@@ -35,32 +32,9 @@
 #include <linux/timer.h>	/* struct timer_list */
 #include <linux/string.h>
 #include <linux/completion.h>   /* struct completion */
-
-#include <asm/io.h>
-
-/* Workqueue / task queue backwards compatibility stuff */
-#if ((LINUX_VERSION_CODE > KERNEL_VERSION(2,5,41)) || (defined _MVL31_) || (defined _CELF3_))
 #include <linux/workqueue.h>
-#else
-#include <linux/tqueue.h>
-#define work_struct tq_struct
-#define INIT_WORK INIT_TQUEUE
-#define schedule_work schedule_task
-#endif
 
-/* Interrupt handler backwards compatibility stuff */
-/*
-#ifndef IRQ_NONE
-#define IRQ_NONE
-#define IRQ_HANDLED
-typedef void irqreturn_t;
-#endif
-*/
-
-#if LINUX_VERSION_CODE < KERNEL_VERSION(2,4,23)
-#define free_netdev(x) kfree(x) 
-#define pci_name(x) x->slot_name 
-#endif
+#include <asm/io.h>
 
 #include "ks7010_sdio.h"
 

commit 021873f650658fb1d8da5f3ee7d31eba40b21a93
Author: Wolfram Sang <wsa+renesas@sang-engineering.com>
Date:   Tue May 31 12:56:14 2016 +0200

    staging: ks7010: remove non-SDIO code and #ifdefs
    
    I couldn't find any trace of code or even products using ks7010 with
    something else than SDIO. So, remove the conditionals.
    
    Signed-off-by: Wolfram Sang <wsa+renesas@sang-engineering.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
index c7cbde1e1d0a..329a062419fe 100644
--- a/drivers/staging/ks7010/ks_wlan.h
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -62,17 +62,7 @@ typedef void irqreturn_t;
 #define pci_name(x) x->slot_name 
 #endif
 
-#if (defined _PCMCIA_)
-#include "pcmcia/ks7010_pcmcia.h"
-#elif (defined _PCI_)
-#include "pci/ks7010_pci.h"
-#elif (defined _SDIO_)
 #include "ks7010_sdio.h"
-#elif (defined _SPI_)
-#include "spi/ks7010_spi.h"
-#else
-#error not defined bus type !
-#endif
 
 struct ks_wlan_parameter {
 	uint8_t		operation_mode;	   /* Operation Mode */

commit 13a9930d15b424ab7d3b906af8ba7ff8c409edfe
Author: Wolfram Sang <wsa+renesas@sang-engineering.com>
Date:   Tue May 31 12:56:13 2016 +0200

    staging: ks7010: add driver from Nanonote extra-repository
    
    See the TODO for details where this driver came from. Only a few minor
    changes were made to make the driver suitable for staging:
    
    * updated Kconfig help text and dependencies
    * added TODO
    * removed two __DATE__ and __TIME__ printouts to allow reproducible builds
    * added to staging main Kconfig + Makefile
    
    Tested on a Renesas Salvator-X board with a Spectec SDW-823 card. I
    could connect to a WPA-protected network.
    
    Signed-off-by: Wolfram Sang <wsa+renesas@sang-engineering.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/drivers/staging/ks7010/ks_wlan.h b/drivers/staging/ks7010/ks_wlan.h
new file mode 100644
index 000000000000..c7cbde1e1d0a
--- /dev/null
+++ b/drivers/staging/ks7010/ks_wlan.h
@@ -0,0 +1,541 @@
+/*
+ *   Driver for KeyStream IEEE802.11 b/g wireless LAN cards.
+ *   
+ *   ks_wlan.h
+ *   $Id: ks_wlan.h 994 2009-09-14 01:51:16Z sekine $
+ *
+ *   Copyright (C) 2006-2008 KeyStream Corp.
+ *   Copyright (C) 2009 Renesas Technology Corp.
+ *
+ *   This program is free software; you can redistribute it and/or modify
+ *   it undr the terms of the GNU General Public License version 2 as
+ *   published by the Free Sotware Foundation.
+ */
+
+#ifndef _KS_WLAN_H
+#define _KS_WLAN_H
+
+#define WPS
+
+#include <linux/version.h>
+#if (LINUX_VERSION_CODE < KERNEL_VERSION(2,6,24)) 
+#include <linux/config.h>
+#endif
+#include <linux/interrupt.h>
+#include <linux/kernel.h>
+#include <linux/module.h>
+
+#include <linux/spinlock.h>	/* spinlock_t					*/
+#include <linux/sched.h>	/* wait_queue_head_t				*/
+#include <linux/types.h>	/* pid_t					*/
+#include <linux/netdevice.h>	/* struct net_device_stats,  struct sk_buff	*/
+#include <linux/etherdevice.h>
+#include <linux/wireless.h>
+#include <asm/atomic.h> 	/* struct atmic_t				*/
+#include <linux/timer.h>	/* struct timer_list */
+#include <linux/string.h>
+#include <linux/completion.h>   /* struct completion */
+
+#include <asm/io.h>
+
+/* Workqueue / task queue backwards compatibility stuff */
+#if ((LINUX_VERSION_CODE > KERNEL_VERSION(2,5,41)) || (defined _MVL31_) || (defined _CELF3_))
+#include <linux/workqueue.h>
+#else
+#include <linux/tqueue.h>
+#define work_struct tq_struct
+#define INIT_WORK INIT_TQUEUE
+#define schedule_work schedule_task
+#endif
+
+/* Interrupt handler backwards compatibility stuff */
+/*
+#ifndef IRQ_NONE
+#define IRQ_NONE
+#define IRQ_HANDLED
+typedef void irqreturn_t;
+#endif
+*/
+
+#if LINUX_VERSION_CODE < KERNEL_VERSION(2,4,23)
+#define free_netdev(x) kfree(x) 
+#define pci_name(x) x->slot_name 
+#endif
+
+#if (defined _PCMCIA_)
+#include "pcmcia/ks7010_pcmcia.h"
+#elif (defined _PCI_)
+#include "pci/ks7010_pci.h"
+#elif (defined _SDIO_)
+#include "ks7010_sdio.h"
+#elif (defined _SPI_)
+#include "spi/ks7010_spi.h"
+#else
+#error not defined bus type !
+#endif
+
+struct ks_wlan_parameter {
+	uint8_t		operation_mode;	   /* Operation Mode */
+	uint8_t		channel;	   /*  Channel */
+	uint8_t		tx_rate;	   /*  Transmit Rate */
+	struct {
+		uint8_t size;
+		uint8_t body[16];
+	} rate_set;
+	uint8_t		bssid[ETH_ALEN];	/* BSSID */
+	struct {
+		uint8_t size;
+		uint8_t body[32+1];
+	} ssid;				   /*  SSID */
+	uint8_t		preamble;	   /*  Preamble */
+	uint8_t		powermgt;	   /*  PowerManagementMode */
+	uint32_t	scan_type;         /*  AP List Scan Type */
+#define BEACON_LOST_COUNT_MIN 0
+#define BEACON_LOST_COUNT_MAX 65535
+	uint32_t	beacon_lost_count; /*  Beacon Lost Count */
+	uint32_t	rts;		   /*  RTS Threashold */
+	uint32_t	fragment;	   /*  Fragmentation Threashold */
+	uint32_t	privacy_invoked;
+	uint32_t	wep_index;
+	struct {
+		uint8_t size;
+		uint8_t val[13*2+1];
+	} wep_key[4];
+	uint16_t	authenticate_type;	
+	uint16_t	phy_type; /* 11b/11g/11bg mode type*/
+	uint16_t	cts_mode; /* for 11g/11bg mode cts mode */
+	uint16_t	phy_info_timer; /* phy information timer */
+	char		rom_file[256];
+};
+
+enum {
+	DEVICE_STATE_OFF = 0,	/* this means hw_unavailable is != 0 */
+	DEVICE_STATE_PREBOOT,	/* we are in a pre-boot state (empty RAM) */
+	DEVICE_STATE_BOOT,	/* boot state (fw upload, run fw) */
+	DEVICE_STATE_PREINIT,	/* pre-init state */
+	DEVICE_STATE_INIT,	/* init state (restore MIB backup to device) */
+	DEVICE_STATE_READY,	/* driver&device are in operational state */
+	DEVICE_STATE_SLEEP	/* device in sleep mode */
+};
+
+/* SME flag */
+#define SME_MODE_SET	    (1<<0)
+#define SME_RTS             (1<<1)
+#define SME_FRAG            (1<<2)
+#define SME_WEP_FLAG        (1<<3)
+#define SME_WEP_INDEX       (1<<4)
+#define SME_WEP_VAL1        (1<<5)
+#define SME_WEP_VAL2        (1<<6)
+#define SME_WEP_VAL3        (1<<7)
+#define SME_WEP_VAL4        (1<<8)
+#define SME_WEP_VAL_MASK    (SME_WEP_VAL1|SME_WEP_VAL2|SME_WEP_VAL3|SME_WEP_VAL4)
+#define SME_RSN             (1<<9)
+#define SME_RSN_MULTICAST   (1<<10)
+#define SME_RSN_UNICAST	    (1<<11)
+#define SME_RSN_AUTH	    (1<<12)
+
+#define SME_AP_SCAN         (1<<13)
+#define SME_MULTICAST       (1<<14)
+
+/* SME Event */
+enum {
+	SME_START,
+
+	SME_MULTICAST_REQUEST,
+	SME_MACADDRESS_SET_REQUEST,
+	SME_BSS_SCAN_REQUEST,
+	SME_SET_FLAG,
+	SME_SET_TXKEY,
+	SME_SET_KEY1,
+	SME_SET_KEY2,
+	SME_SET_KEY3,
+	SME_SET_KEY4,
+	SME_SET_PMK_TSC,
+	SME_SET_GMK1_TSC,
+	SME_SET_GMK2_TSC,
+	SME_SET_GMK3_TSC,
+	SME_SET_PMKSA,
+	SME_POW_MNGMT_REQUEST,
+	SME_PHY_INFO_REQUEST,
+	SME_MIC_FAILURE_REQUEST,
+	SME_GET_MAC_ADDRESS,
+	SME_GET_PRODUCT_VERSION,
+	SME_STOP_REQUEST,
+	SME_RTS_THRESHOLD_REQUEST,
+	SME_FRAGMENTATION_THRESHOLD_REQUEST,
+	SME_WEP_INDEX_REQUEST,
+	SME_WEP_KEY1_REQUEST,
+	SME_WEP_KEY2_REQUEST,
+	SME_WEP_KEY3_REQUEST,
+	SME_WEP_KEY4_REQUEST,
+	SME_WEP_FLAG_REQUEST,
+	SME_RSN_UCAST_REQUEST,
+	SME_RSN_MCAST_REQUEST,
+	SME_RSN_AUTH_REQUEST,
+	SME_RSN_ENABLED_REQUEST,
+	SME_RSN_MODE_REQUEST,
+#ifdef WPS
+	SME_WPS_ENABLE_REQUEST,
+	SME_WPS_PROBE_REQUEST,
+#endif
+	SME_SET_GAIN,
+	SME_GET_GAIN,
+	SME_SLEEP_REQUEST,
+	SME_SET_REGION,
+	SME_MODE_SET_REQUEST,
+	SME_START_REQUEST,
+	SME_GET_EEPROM_CKSUM,
+
+
+	SME_MIC_FAILURE_CONFIRM,
+	SME_START_CONFIRM,
+
+	SME_MULTICAST_CONFIRM,
+	SME_BSS_SCAN_CONFIRM,
+	SME_GET_CURRENT_AP,
+	SME_POW_MNGMT_CONFIRM,
+	SME_PHY_INFO_CONFIRM,
+	SME_STOP_CONFIRM,
+	SME_RTS_THRESHOLD_CONFIRM,
+	SME_FRAGMENTATION_THRESHOLD_CONFIRM,
+	SME_WEP_INDEX_CONFIRM,
+	SME_WEP_KEY1_CONFIRM,
+	SME_WEP_KEY2_CONFIRM,
+	SME_WEP_KEY3_CONFIRM,
+	SME_WEP_KEY4_CONFIRM,
+	SME_WEP_FLAG_CONFIRM,
+	SME_RSN_UCAST_CONFIRM,
+	SME_RSN_MCAST_CONFIRM,
+	SME_RSN_AUTH_CONFIRM,
+	SME_RSN_ENABLED_CONFIRM,
+	SME_RSN_MODE_CONFIRM,
+	SME_MODE_SET_CONFIRM,
+	SME_SLEEP_CONFIRM,
+
+	SME_RSN_SET_CONFIRM,
+	SME_WEP_SET_CONFIRM,
+	SME_TERMINATE,
+
+	SME_EVENT_SIZE        /* end */
+};
+
+/* SME Status */
+enum {
+	SME_IDLE,
+	SME_SETUP,
+	SME_DISCONNECT,
+	SME_CONNECT
+};
+
+#define	SME_EVENT_BUFF_SIZE	128
+
+struct	sme_info{
+	int	sme_status;
+	int	event_buff[SME_EVENT_BUFF_SIZE];
+	unsigned int	qhead;
+	unsigned int	qtail;
+#ifdef KS_WLAN_DEBUG
+  /* for debug */
+	unsigned int max_event_count;
+#endif
+	spinlock_t    sme_spin;
+	unsigned long sme_flag;
+};
+
+struct	hostt_t{
+	int	buff[SME_EVENT_BUFF_SIZE];
+	unsigned int	qhead;
+	unsigned int	qtail;
+};
+
+#define RSN_IE_BODY_MAX 64
+struct rsn_ie_t {
+	uint8_t	id; /* 0xdd = WPA or 0x30 = RSN */
+	uint8_t	size; /* max ? 255 ? */
+	uint8_t	body[RSN_IE_BODY_MAX];
+} __attribute__((packed));
+
+#ifdef WPS
+#define WPS_IE_BODY_MAX 255
+struct wps_ie_t {
+	uint8_t id; /* 221 'dd <len> 00 50 F2 04' */
+	uint8_t size; /* max ? 255 ? */
+	uint8_t body[WPS_IE_BODY_MAX];
+} __attribute__((packed));
+#endif /* WPS */
+
+struct local_ap_t {
+	uint8_t	bssid[6];
+	uint8_t	rssi;
+	uint8_t	sq;
+	struct {
+		uint8_t	size;
+		uint8_t	body[32];
+		uint8_t	ssid_pad;
+	} ssid;
+	struct {
+		uint8_t	size;
+		uint8_t	body[16];
+		uint8_t	rate_pad;
+	} rate_set;
+	uint16_t	capability;
+	uint8_t	channel;
+	uint8_t	noise;
+	struct rsn_ie_t wpa_ie;
+	struct rsn_ie_t rsn_ie;
+#ifdef WPS
+	struct wps_ie_t wps_ie;
+#endif /* WPS */
+};
+
+#define LOCAL_APLIST_MAX 31
+#define LOCAL_CURRENT_AP LOCAL_APLIST_MAX
+struct local_aplist_t {
+	int size;
+	struct local_ap_t ap[LOCAL_APLIST_MAX+1];
+};
+
+struct local_gain_t{
+	uint8_t	TxMode;
+	uint8_t	RxMode;
+	uint8_t	TxGain;
+	uint8_t	RxGain;
+};
+
+struct local_eeprom_sum_t{
+	uint8_t	type;
+	uint8_t	result;
+};
+
+enum {
+	EEPROM_OK,
+	EEPROM_CHECKSUM_NONE,
+	EEPROM_FW_NOT_SUPPORT,
+	EEPROM_NG,
+};
+
+
+/* Power Save Status */
+enum {
+	PS_NONE,
+	PS_ACTIVE_SET,
+	PS_SAVE_SET,
+	PS_CONF_WAIT,
+	PS_SNOOZE,
+	PS_WAKEUP
+};
+
+struct power_save_status_t {
+        atomic_t	  status;      	/* initialvalue 0 */
+	struct completion wakeup_wait;
+	atomic_t	  confirm_wait;
+	atomic_t	  snooze_guard;
+};
+
+struct sleep_status_t {
+        atomic_t	  status;      	/* initialvalue 0 */
+	atomic_t	  doze_request;
+	atomic_t	  wakeup_request;
+};
+
+/* WPA */
+struct scan_ext_t {
+	unsigned int flag;
+	char ssid[IW_ESSID_MAX_SIZE+1];
+};
+
+enum {
+	CIPHER_NONE,
+	CIPHER_WEP40,
+	CIPHER_TKIP,
+	CIPHER_CCMP,
+	CIPHER_WEP104
+};
+
+#define CIPHER_ID_WPA_NONE    "\x00\x50\xf2\x00"
+#define CIPHER_ID_WPA_WEP40   "\x00\x50\xf2\x01"
+#define CIPHER_ID_WPA_TKIP    "\x00\x50\xf2\x02"
+#define CIPHER_ID_WPA_CCMP    "\x00\x50\xf2\x04"
+#define CIPHER_ID_WPA_WEP104  "\x00\x50\xf2\x05"
+
+#define CIPHER_ID_WPA2_NONE   "\x00\x0f\xac\x00"
+#define CIPHER_ID_WPA2_WEP40  "\x00\x0f\xac\x01"
+#define CIPHER_ID_WPA2_TKIP   "\x00\x0f\xac\x02"
+#define CIPHER_ID_WPA2_CCMP   "\x00\x0f\xac\x04"
+#define CIPHER_ID_WPA2_WEP104 "\x00\x0f\xac\x05"
+
+#define CIPHER_ID_LEN    4
+
+enum { 
+	KEY_MGMT_802_1X,
+	KEY_MGMT_PSK,
+	KEY_MGMT_WPANONE,
+};
+
+#define KEY_MGMT_ID_WPA_NONE     "\x00\x50\xf2\x00"
+#define KEY_MGMT_ID_WPA_1X       "\x00\x50\xf2\x01"
+#define KEY_MGMT_ID_WPA_PSK      "\x00\x50\xf2\x02"
+#define KEY_MGMT_ID_WPA_WPANONE  "\x00\x50\xf2\xff"
+
+#define KEY_MGMT_ID_WPA2_NONE    "\x00\x0f\xac\x00"
+#define KEY_MGMT_ID_WPA2_1X      "\x00\x0f\xac\x01"
+#define KEY_MGMT_ID_WPA2_PSK     "\x00\x0f\xac\x02"
+#define KEY_MGMT_ID_WPA2_WPANONE "\x00\x0f\xac\xff"
+
+#define KEY_MGMT_ID_LEN  4
+
+#define MIC_KEY_SIZE 8
+
+struct wpa_key_t {
+	uint32_t	ext_flags; /* IW_ENCODE_EXT_xxx */
+	uint8_t	tx_seq[IW_ENCODE_SEQ_MAX_SIZE]; /* LSB first */
+	uint8_t	rx_seq[IW_ENCODE_SEQ_MAX_SIZE]; /* LSB first */
+	struct sockaddr	addr; /* ff:ff:ff:ff:ff:ff for broadcast/multicast
+			       * (group) keys or unicast address for
+			       * individual keys */
+	uint16_t	alg;
+	uint16_t	key_len; /* WEP: 5 or 13, TKIP: 32, CCMP: 16 */
+	uint8_t	key_val[IW_ENCODING_TOKEN_MAX];
+	uint8_t	tx_mic_key[MIC_KEY_SIZE];
+	uint8_t	rx_mic_key[MIC_KEY_SIZE];
+};
+#define WPA_KEY_INDEX_MAX 4
+#define WPA_RX_SEQ_LEN 6
+
+struct mic_failure_t {
+	uint16_t	failure; /* MIC Failure counter 0 or 1 or 2 */
+	uint16_t	counter; /* 1sec counter 0-60 */
+	uint32_t	last_failure_time;
+	int stop; /* stop flag */
+};
+
+struct wpa_status_t {
+	int wpa_enabled;
+	unsigned int rsn_enabled;
+	int version;
+	int pairwise_suite;	/* unicast cipher */
+	int group_suite;	/* multicast cipher */
+	int key_mgmt_suite;	/* authentication key management suite */
+	int auth_alg;
+	int txkey;
+	struct wpa_key_t key[WPA_KEY_INDEX_MAX];
+	struct scan_ext_t scan_ext;
+	struct mic_failure_t mic_failure;
+};
+
+#include <linux/list.h>
+#define PMK_LIST_MAX 8
+struct pmk_list_t {
+	uint16_t size;
+	struct list_head head;
+	struct pmk_t {
+		struct list_head list;
+		uint8_t	bssid[ETH_ALEN];
+		uint8_t	pmkid[IW_PMKID_LEN];
+	} pmk[PMK_LIST_MAX];
+};
+
+#ifdef WPS
+struct wps_status_t {
+       int wps_enabled;
+       int ielen;
+       uint8_t ie[255];
+};
+#endif /* WPS */
+
+typedef struct ks_wlan_private{
+
+	struct hw_info_t ks_wlan_hw;  /* hardware information */
+
+	struct net_device *net_dev;
+	int reg_net; /* register_netdev */
+	struct net_device_stats nstats;
+	struct iw_statistics wstats;
+
+	struct completion confirm_wait;
+
+        /* trx device & sme */
+	struct tx_device tx_dev;
+	struct rx_device rx_dev;
+	struct sme_info  sme_i;
+	u8 *rxp;
+	unsigned int  rx_size;
+	struct tasklet_struct sme_task;
+	struct work_struct ks_wlan_wakeup_task;
+	int scan_ind_count;
+
+	unsigned char eth_addr[ETH_ALEN];
+
+	struct local_aplist_t aplist;
+	struct local_ap_t current_ap;
+	struct power_save_status_t psstatus;
+	struct sleep_status_t sleepstatus;
+	struct wpa_status_t wpa;
+	struct pmk_list_t pmklist;
+        /* wireless parameter */
+	struct ks_wlan_parameter reg;
+	uint8_t current_rate;
+
+	char nick[IW_ESSID_MAX_SIZE+1];
+	
+        spinlock_t multicast_spin;
+
+	spinlock_t dev_read_lock;
+        wait_queue_head_t devread_wait;
+
+	unsigned int need_commit; /* for ioctl */
+
+        /* DeviceIoControl */
+	int device_open_status;
+	atomic_t event_count;
+        atomic_t rec_count;
+        int dev_count; 
+#define DEVICE_STOCK_COUNT 20
+	unsigned char *dev_data[DEVICE_STOCK_COUNT];
+	int dev_size[DEVICE_STOCK_COUNT];
+
+        /* ioctl : IOCTL_FIRMWARE_VERSION */
+	unsigned char firmware_version[128+1];
+	int version_size;
+
+	int mac_address_valid; /* Mac Address Status */
+
+	int dev_state;
+
+	struct sk_buff *skb;
+	unsigned int cur_rx;	/* Index into the Rx buffer of next Rx pkt. */
+	/* spinlock_t lock; */
+#define FORCE_DISCONNECT    0x80000000
+#define CONNECT_STATUS_MASK 0x7FFFFFFF
+	uint32_t connect_status;    /* connect status */
+	int infra_status;  /* Infractructure status */
+
+        uint8_t data_buff[0x1000];
+
+	uint8_t scan_ssid_len;
+	uint8_t scan_ssid[IW_ESSID_MAX_SIZE+1];
+	struct local_gain_t gain;
+#ifdef WPS
+	struct net_device *l2_dev;
+	int l2_fd;      
+	struct wps_status_t wps;
+#endif /* WPS */
+ 	uint8_t sleep_mode;
+
+	uint8_t region;
+	struct local_eeprom_sum_t eeprom_sum;
+	uint8_t eeprom_checksum;
+
+	struct hostt_t  hostt;
+
+	unsigned long last_doze;
+	unsigned long last_wakeup;
+
+	uint   sdio_error_count;  /* SDIO error */
+	uint   wakeup_count;      /* for detect wakeup loop */
+	
+} ks_wlan_private; 
+
+
+
+#endif /* _KS_WLAN_H */
